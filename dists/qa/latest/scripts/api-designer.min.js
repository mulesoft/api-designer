function range(a,b){for(var c=new Array(b-a+1),d=a;b>=d;d++)c[d-a]=d;return c}!function(a){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=a();else if("function"==typeof define&&define.amd)define([],a);else{var b;b="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,(b.jsTraverse||(b.jsTraverse={})).traverse=a()}}(function(){return function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){function d(a){this.value=a}function e(a,b,c){var d=[],e=[],g=!0;return function h(a){function i(){if("object"==typeof m.node&&null!==m.node){m.keys&&m.node_===m.node||(m.keys=o(m.node)),m.isLeaf=0==m.keys.length;for(var b=0;b<e.length;b++)if(e[b].node_===a){m.circular=e[b];break}}else m.isLeaf=!0,m.keys=null;m.notLeaf=!m.isLeaf,m.notRoot=!m.isRoot}var j=c?f(a):a,k={},l=!0,m={node:j,node_:a,path:[].concat(d),parent:e[e.length-1],parents:e,key:d.slice(-1)[0],isRoot:0===d.length,level:d.length,circular:null,update:function(a,b){m.isRoot||(m.parent.node[m.key]=a),m.node=a,b&&(l=!1)},"delete":function(a){delete m.parent.node[m.key],a&&(l=!1)},remove:function(a){p(m.parent.node)?m.parent.node.splice(m.key,1):delete m.parent.node[m.key],a&&(l=!1)},keys:null,before:function(a){k.before=a},after:function(a){k.after=a},pre:function(a){k.pre=a},post:function(a){k.post=a},stop:function(){g=!1},block:function(){l=!1}};if(!g)return m;i();var n=b.call(m,m.node);return void 0!==n&&m.update&&m.update(n),k.before&&k.before.call(m,m.node),l?("object"!=typeof m.node||null===m.node||m.circular||(e.push(m),i(),q(m.keys,function(a,b){d.push(a),k.pre&&k.pre.call(m,m.node[a],a);var e=h(m.node[a]);c&&r.call(m.node,a)&&(m.node[a]=e.node),e.isLast=b==m.keys.length-1,e.isFirst=0==b,k.post&&k.post.call(m,e),d.pop()}),e.pop()),k.after&&k.after.call(m,m.node),m):m}(a).node}function f(a){if("object"==typeof a&&null!==a){var b;if(p(a))b=[];else if(h(a))b=new Date(a.getTime?a.getTime():a);else if(i(a))b=new RegExp(a);else if(j(a))b={message:a.message};else if(k(a))b=new Boolean(a);else if(l(a))b=new Number(a);else if(m(a))b=new String(a);else if(Object.create&&Object.getPrototypeOf)b=Object.create(Object.getPrototypeOf(a));else if(a.constructor===Object)b={};else{var c=a.constructor&&a.constructor.prototype||a.__proto__||{},d=function(){};d.prototype=c,b=new d}return q(o(a),function(c){b[c]=a[c]}),b}return a}function g(a){return Object.prototype.toString.call(a)}function h(a){return"[object Date]"===g(a)}function i(a){return"[object RegExp]"===g(a)}function j(a){return"[object Error]"===g(a)}function k(a){return"[object Boolean]"===g(a)}function l(a){return"[object Number]"===g(a)}function m(a){return"[object String]"===g(a)}var n=b.exports=function(a){return new d(a)};d.prototype.get=function(a){for(var b=this.value,c=0;c<a.length;c++){var d=a[c];if(!b||!r.call(b,d)){b=void 0;break}b=b[d]}return b},d.prototype.has=function(a){for(var b=this.value,c=0;c<a.length;c++){var d=a[c];if(!b||!r.call(b,d))return!1;b=b[d]}return!0},d.prototype.set=function(a,b){for(var c=this.value,d=0;d<a.length-1;d++){var e=a[d];r.call(c,e)||(c[e]={}),c=c[e]}return c[a[d]]=b,b},d.prototype.map=function(a){return e(this.value,a,!0)},d.prototype.forEach=function(a){return this.value=e(this.value,a,!1),this.value},d.prototype.reduce=function(a,b){var c=1===arguments.length,d=c?this.value:b;return this.forEach(function(b){this.isRoot&&c||(d=a.call(this,d,b))}),d},d.prototype.paths=function(){var a=[];return this.forEach(function(b){a.push(this.path)}),a},d.prototype.nodes=function(){var a=[];return this.forEach(function(b){a.push(this.node)}),a},d.prototype.clone=function(){var a=[],b=[];return function c(d){for(var e=0;e<a.length;e++)if(a[e]===d)return b[e];if("object"==typeof d&&null!==d){var g=f(d);return a.push(d),b.push(g),q(o(d),function(a){g[a]=c(d[a])}),a.pop(),b.pop(),g}return d}(this.value)};var o=Object.keys||function(a){var b=[];for(var c in a)b.push(c);return b},p=Array.isArray||function(a){return"[object Array]"===Object.prototype.toString.call(a)},q=function(a,b){if(a.forEach)return a.forEach(b);for(var c=0;c<a.length;c++)b(a[c],c,a)};q(o(d.prototype),function(a){n[a]=function(b){var c=[].slice.call(arguments,1),e=new d(b);return e[a].apply(e,c)}});var r=Object.hasOwnProperty||function(a,b){return b in a}},{}]},{},[1])(1)}),function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){(function(){var c,d,e,f,g;f=a("./scorer"),d=a("./legacy"),e=function(a){return a.candidate},g=function(a,b){return b.score-a.score},c=a("path").sep,b.exports=function(a,b,c){var h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A;if(A=null!=c?c:{},m=A.key,p=A.maxResults,o=A.maxInners,h=A.allowErrors,n=A.legacy,t=[],u=null!=o&&o>0?o:a.length,i=!!h,j=null!=m,q=f.prepQuery(b),n)for(r=q.depth>0,l=q.core,x=0,z=a.length;z>x;x++)k=a[x],v=null!=m?k[m]:k,v&&(s=d.score(v,l,r),r||(s=d.basenameScore(v,l,s)),s>0&&t.push({candidate:k,score:s}));else for(w=0,y=a.length;y>w&&(k=a[w],v=j?k[m]:k,!(v&&(s=f.score(v,b,q,i),s>0&&(t.push({candidate:k,score:s}),!--u))));w++);return t.sort(g),a=t.map(e),null!=p&&(a=a.slice(0,p)),a}}).call(this)},{"./legacy":3,"./scorer":5,path:6}],2:[function(a,b,c){(function(){var c,d,e,f,g,h;h=a("./scorer"),e=a("./legacy"),d=a("./filter"),f=a("./matcher"),c=a("path").sep,g=null,b.exports={filter:function(a,b,c){return(null!=b?b.length:void 0)&&(null!=a?a.length:void 0)?d(a,b,c):[]},prepQuery:function(a){return h.prepQuery(a)},score:function(a,b,c,d){var f,i,j,k,l,m;return m=null!=d?d:{},f=m.allowErrors,j=m.legacy,(null!=a?a.length:void 0)&&(null!=b?b.length:void 0)?(null==c&&(c=g&&g.query===b?g:g=h.prepQuery(b)),j?(k=c.depth>0,i=c.core,l=e.score(a,i,k),k||(l=e.basenameScore(a,i,l))):l=h.score(a,b,c,!!f),l):0},match:function(a,b,d,e){var i,j,k,l,m,n;return i=(null!=e?e:{}).allowErrors,a&&b?a===b?function(){n=[];for(var b=0,c=a.length;c>=0?c>b:b>c;c>=0?b++:b--)n.push(b);return n}.apply(this):(null==d&&(d=g&&g.query===b?g:g=h.prepQuery(b)),i||h.isMatch(a,d.core_lw,d.core_up)?(m=a.toLowerCase(),l=d.query_lw,k=f.match(a,m,d),0===k.length?k:(a.indexOf(c)>-1&&(j=f.basenameMatch(a,m,d),k=f.mergeMatches(k,j)),k)):[]):[]}}}).call(this)},{"./filter":1,"./legacy":3,"./matcher":4,"./scorer":5,path:6}],3:[function(a,b,c){(function(){var b,d;b=a("path").sep,c.basenameScore=function(a,d,e){var f,g,h,i,j,k;for(h=a.length-1;a[h]===b;)h--;for(k=0,i=h,f=null;h>=0;)a[h]===b?(k++,null==f&&(f=a.substring(h+1,i+1))):0===h&&(i<a.length-1?null==f&&(f=a.substring(0,i+1)):null==f&&(f=a)),h--;return f===a?e*=2:f&&(e+=c.score(f,d)),j=k+1,g=Math.max(1,10-j),e*=.01*g},c.score=function(a,c){var e,f,g,h,i,j,k,l,m,n,o,p;if(a===c)return 1;if(d(a,c))return 1;for(n=0,k=c.length,m=a.length,g=0,h=0;k>g;){if(e=c[g++],i=a.indexOf(e.toLowerCase()),o=a.indexOf(e.toUpperCase()),j=Math.min(i,o),-1===j&&(j=Math.max(i,o)),h=j,-1===h)return 0;f=.1,a[h]===e&&(f+=.1),0===h||a[h-1]===b?f+=.8:("-"===(p=a[h-1])||"_"===p||" "===p)&&(f+=.7),a=a.substring(h+1,m),n+=f}return l=n/k,(l*(k/m)+l)/2},d=function(a,c){return a[a.length-c.length-1]===b?a.lastIndexOf(c)===a.length-c.length:void 0},c.match=function(a,b,c){var d,e,f,g,h,i,j,k,l,m;if(null==c&&(c=0),a===b)return function(){m=[];for(var b=c,d=c+a.length;d>=c?d>b:b>d;d>=c?b++:b--)m.push(b);return m}.apply(this);for(j=b.length,k=a.length,e=0,f=0,h=[];j>e;){if(d=b[e++],g=a.indexOf(d.toLowerCase()),l=a.indexOf(d.toUpperCase()),i=Math.min(g,l),-1===i&&(i=Math.max(g,l)),f=i,-1===f)return[];h.push(c+f),c+=f+1,a=a.substring(f+1,k)}return h}}).call(this)},{path:6}],4:[function(a,b,c){(function(){var b,d;b=a("path").sep,d=a("./scorer"),c.basenameMatch=function(a,d,e){var f,g,h;for(h=a.length-1;a[h]===b;)h--;if(f=a.lastIndexOf(b,h),-1===f)return[];for(g=e.depth;g-->0;)if(f=a.lastIndexOf(b,f-1),-1===f)return[];return f++,h++,c.match(a.slice(f,h),d.slice(f,h),e,f)},c.mergeMatches=function(a,b){var c,d,e,f,g,h,i;if(g=a.length,h=b.length,0===h)return a.slice();if(0===g)return b.slice();for(e=-1,f=0,d=b[f],i=[];++e<g;){for(c=a[e];c>=d&&++f<h;)c>d&&i.push(d),d=b[f];i.push(c)}for(;h>f;)i.push(b[f++]);return i},c.match=function(a,b,c,e){var f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E;for(null==e&&(e=0),w=c.query,x=c.query_lw,r=a.length,u=w.length,j=d.scoreAcronyms(a,b,w,x).score,A=new Array(u),n=new Array(u),h=0,i=1,g=2,f=3,E=new Array(r*u),v=-1,q=-1;++q<u;)A[q]=0,n[q]=0;for(p=-1;++p<r;)for(y=0,B=0,m=0,C=b[p],q=-1;++q<u;)o=0,k=0,z=B,x[q]===C&&(D=d.isWordStart(p,a,b),o=m>0?m:d.scoreConsecutives(a,b,w,x,p,q,D),k=z+d.scoreCharacter(p,q,D,j,o)),B=A[q],m=n[q],y>B?t=g:(y=B,t=i),k>y?(y=k,t=f):o=0,A[q]=y,n[q]=o,E[++v]=y>0?t:h;for(p=r-1,q=u-1,v=p*u+q,l=!0,s=[];l&&p>=0&&q>=0;)switch(E[v]){case i:p--,v-=u;break;case g:q--,v--;break;case f:s.push(p+e),q--,p--,v-=u+1;break;default:l=!1}return s.reverse(),s}}).call(this)},{"./scorer":5,path:6}],5:[function(a,b,c){(function(){var b,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D;d=a("path").sep,D=150,r=20,A=13,B=85,k=1.2,p=.75,q=/[ _\-:\/\\]/g,c.coreChars=g=function(a){return a.replace(q,"")},c.score=function(a,b,c,d){var g,h;return null==c&&(c=new e(b)),null==d&&(d=!1),d||l(a,c.core_lw,c.core_up)?(h=a.toLowerCase(),g=i(a,h,c),Math.ceil(f(a,h,c,g))):0},e=function(){function a(a){return(null!=a?a.length:void 0)?(this.query=a,this.query_lw=a.toLowerCase(),this.core=g(a),this.core_lw=this.core.toLowerCase(),this.core_up=C(this.core),void(this.depth=h(a,a.length))):null}return a}(),c.prepQuery=function(a){return new e(a)},c.isMatch=l=function(a,b,c){var d,e,f,g,h,i,j;if(f=a.length,g=b.length,!f||g>f)return!1;for(d=-1,e=-1;++e<g;){for(h=b[e],i=c[e];++d<f&&(j=a[d],j!==h&&j!==i););if(d===f)return!1}return!0},i=function(a,b,c){var d,e,f,g,h,i,j,k,l,m,n,q,r,x,y,A,B,C,D,E,F,G,H,I;if(y=c.query,A=c.query_lw,l=a.length,r=y.length,d=s(a,b,y,A),e=d.score,d.count===r)return v(r,l,e,d.pos);if(x=b.indexOf(A),x>-1)return w(a,b,y,A,x,r,l);for(E=new Array(r),h=new Array(r),I=z(r,l),m=Math.ceil(p*r)+5,n=m,k=-1;++k<r;)E[k]=0,h[k]=0;for(j=b.indexOf(A[0]),j>-1&&j--,q=b.lastIndexOf(A[r-1],l),q>j&&(l=q+1);++j<l;)for(C=0,D=0,g=0,G=b[j],B=!0,k=-1;++k<r;){if(F=E[k],F>C&&(C=F),i=0,A[k]===G)if(H=o(j,a,b),i=g>0?g:u(a,b,y,A,j,k,H),f=D+t(j,k,H,e,i),f>C)C=f,n=m;else{if(B&&--n<=0)return E[r-1]*I;B=!1}D=F,g=h[k],h[k]=i,E[k]=C}return C*I},c.isWordStart=o=function(a,b,c){var d,e;return 0===a?!0:(d=b[a],e=b[a-1],m(d)||m(e)||d!==c[a]&&e===c[a-1])},c.isWordEnd=n=function(a,b,c,d){var e,f;return a===d-1?!0:(e=b[a],f=b[a+1],m(e)||m(f)||e===c[a]&&f!==c[a+1])},m=function(a){return" "===a||"."===a||"-"===a||"_"===a||"/"===a||"\\"===a},y=function(a){var b;return r>a?(b=r-a,100+b*b):Math.max(100+r-a,0)},z=function(a,b){return B/(B+Math.abs(b-a))},v=function(a,b,c,d){return 2*a*(D*c+y(d))*z(a,b)},c.scorePattern=x=function(a,b,c,d,e){var f,g;return g=a,f=6,c===a&&(f+=2),d&&(f+=3),e&&(f+=1),a===b&&(d&&(g+=c===b?2:1),e&&(f+=1)),c+g*(g+f)},c.scoreCharacter=t=function(a,b,c,d,e){var f;return f=y(a),c?f+D*((d>e?d:e)+10):f+D*e},c.scoreConsecutives=u=function(a,b,c,d,e,f,g){var h,i,j,k,l,m,o,p;for(i=a.length,k=c.length,j=i-e,l=k-f,h=l>j?j:l,o=e,m=0,p=0,c[f]===a[e]&&m++;++p<h&&d[++f]===b[++e];)c[f]===a[e]&&m++;return 1===p?1+2*m:x(p,k,m,g,n(e,a,b,i))},c.scoreExactMatch=w=function(a,b,c,d,e,f,g){var h,i,j,k,l;for(l=o(e,a,b),l||(j=b.indexOf(d,e+1),j>-1&&(l=o(j,a,b),l&&(e=j))),i=-1,k=0;++i<f;)c[e+i]===a[i]&&k++;return h=n(e+f-1,a,b,g),v(f,g,x(f,f,k,l,h),e)},b=function(){function a(a,b,c){this.score=a,this.pos=b,this.count=c}return a}(),j=new b(0,.1,0),c.scoreAcronyms=s=function(a,c,d,e){var f,g,h,i,k,l,m,n,p;if(i=a.length,k=d.length,!(i>1&&k>1))return j;for(f=0,l=0,n=0,g=-1,h=-1;++h<k;){for(m=e[h];++g<i;)if(m===c[g]&&o(g,a,c)){d[h]===a[g]&&n++,l+=g,f++;break}if(g===i)break}return 2>f?j:(p=x(f,k,n,!0,!1),new b(p,l/f,f))},f=function(a,b,c,e){var f,g,j,l,m;if(0===e)return 0;for(m=a.length-1;a[m]===d;)m--;if(j=a.lastIndexOf(d,m),-1===j)return e;for(l=c.depth;l-->0;)if(j=a.lastIndexOf(d,j-1),-1===j)return e;return j++,m++,g=i(a.slice(j,m),b.slice(j,m),c),f=.5*A/(A+h(a,m+1)),f*g+(1-f)*e*z(0,k*(m-j))},c.countDir=h=function(a,b){var c,e;if(1>b)return 0;for(c=0,e=-1;++e<b&&a[e]===d;);for(;++e<b;)if(a[e]===d)for(c++;++e<b&&a[e]===d;);return c},C=function(a){var b,c,d,e;for(c="",d=0,e=a.length;e>d;d++)b=a[d],c+=b.toUpperCase()[0];return c}}).call(this)},{path:6}],6:[function(a,b,c){(function(a){function b(a,b){for(var c=0,d=a.length-1;d>=0;d--){var e=a[d];"."===e?a.splice(d,1):".."===e?(a.splice(d,1),c++):c&&(a.splice(d,1),c--)}if(b)for(;c--;c)a.unshift("..");return a}function d(a,b){if(a.filter)return a.filter(b);for(var c=[],d=0;d<a.length;d++)b(a[d],d,a)&&c.push(a[d]);return c}var e=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,f=function(a){return e.exec(a).slice(1)};c.resolve=function(){for(var c="",e=!1,f=arguments.length-1;f>=-1&&!e;f--){var g=f>=0?arguments[f]:a.cwd();if("string"!=typeof g)throw new TypeError("Arguments to path.resolve must be strings");g&&(c=g+"/"+c,e="/"===g.charAt(0))}return c=b(d(c.split("/"),function(a){return!!a}),!e).join("/"),(e?"/":"")+c||"."},c.normalize=function(a){var e=c.isAbsolute(a),f="/"===g(a,-1);return a=b(d(a.split("/"),function(a){return!!a}),!e).join("/"),a||e||(a="."),a&&f&&(a+="/"),(e?"/":"")+a},c.isAbsolute=function(a){return"/"===a.charAt(0)},c.join=function(){var a=Array.prototype.slice.call(arguments,0);return c.normalize(d(a,function(a,b){if("string"!=typeof a)throw new TypeError("Arguments to path.join must be strings");return a}).join("/"))},c.relative=function(a,b){function d(a){for(var b=0;b<a.length&&""===a[b];b++);for(var c=a.length-1;c>=0&&""===a[c];c--);return b>c?[]:a.slice(b,c-b+1)}a=c.resolve(a).substr(1),b=c.resolve(b).substr(1);for(var e=d(a.split("/")),f=d(b.split("/")),g=Math.min(e.length,f.length),h=g,i=0;g>i;i++)if(e[i]!==f[i]){h=i;break}for(var j=[],i=h;i<e.length;i++)j.push("..");return j=j.concat(f.slice(h)),j.join("/")},c.sep="/",c.delimiter=":",c.dirname=function(a){var b=f(a),c=b[0],d=b[1];return c||d?(d&&(d=d.substr(0,d.length-1)),c+d):"."},c.basename=function(a,b){var c=f(a)[2];return b&&c.substr(-1*b.length)===b&&(c=c.substr(0,c.length-b.length)),c},c.extname=function(a){return f(a)[3]};var g="b"==="ab".substr(-1)?function(a,b,c){return a.substr(b,c)}:function(a,b,c){return 0>b&&(b=a.length+b),a.substr(b,c)}}).call(this,a("_process"))},{_process:7}],7:[function(a,b,c){function d(){throw new Error("setTimeout has not been defined")}function e(){throw new Error("clearTimeout has not been defined")}function f(a){if(l===setTimeout)return setTimeout(a,0);if((l===d||!l)&&setTimeout)return l=setTimeout,setTimeout(a,0);try{return l(a,0)}catch(b){try{return l.call(null,a,0)}catch(b){return l.call(this,a,0)}}}function g(a){if(m===clearTimeout)return clearTimeout(a);if((m===e||!m)&&clearTimeout)return m=clearTimeout,clearTimeout(a);try{return m(a)}catch(b){try{return m.call(null,a)}catch(b){return m.call(this,a)}}}function h(){q&&o&&(q=!1,o.length?p=o.concat(p):r=-1,p.length&&i())}function i(){if(!q){var a=f(h);q=!0;for(var b=p.length;b;){for(o=p,p=[];++r<b;)o&&o[r].run();r=-1,b=p.length}o=null,q=!1,g(a)}}function j(a,b){this.fun=a,this.array=b}function k(){}var l,m,n=b.exports={};!function(){try{l="function"==typeof setTimeout?setTimeout:d}catch(a){l=d}try{m="function"==typeof clearTimeout?clearTimeout:e}catch(a){m=e}}();var o,p=[],q=!1,r=-1;n.nextTick=function(a){var b=new Array(arguments.length-1);if(arguments.length>1)for(var c=1;c<arguments.length;c++)b[c-1]=arguments[c];p.push(new j(a,b)),1!==p.length||q||f(i)},j.prototype.run=function(){this.fun.apply(null,this.array)},n.title="browser",n.browser=!0,n.env={},n.argv=[],n.version="",n.versions={},n.on=k,n.addListener=k,n.once=k,n.off=k,n.removeListener=k,n.removeAllListeners=k,n.emit=k,n.binding=function(a){throw new Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(a){throw new Error("process.chdir is not supported")},n.umask=function(){return 0}},{}],8:[function(a,b,c){window.RAML=window.RAML||{},window.RAML.Suggestions=a("./index")},{"./index":10}],9:[function(a,b,c){"use strict";function d(a,b){var c=new ja(a),d=new ka(b);return d.suggest(c,!0)}function e(a,b){var c=new ja(a),d=new ka(b);return d.suggestAsync(c,!0)}function f(a,b,c){for(var d=Object.keys(ia),e=0;e<d.length;e++)for(var f=d[e],h=Object.keys(ia[f]),i=0;i<h.length;i++){var j=h[i];if(j===a){var k=ia[f][j],l=k.is||[],m=k.parentIs||[];if(c&&ha.find(l,function(a){return g(c,a)}))return f;if(b&&ha.find(m,function(a){return g(b,a)}))return f}}return"unknown"}function g(a,b){for(var c=b.split("."),d=ba.universes,e=0;e<c.length;e++)d=d[c[e]];return a.isAssignableFrom(d.name)}function h(a,b){var c=j(a,b);return c?c:[]}function i(a,b){a.async=!0,a.promises=[];var c=ba.parseRAML(n(a),{fsResolver:b.contentProvider.fsResolver,filePath:a.content.getPath()}),d=c.then(function(c){return j(a,b,o(a.content.getOffset(),c.highLevel()))}),e=d.then(function(b){return Promise.all([b].concat(a.promises))}),f=e.then(function(a){var b=[];return a.forEach(function(a){b=b.concat(a)}),b});return f}function j(a,b,c,d){void 0===c&&(c=void 0),b.currentRequest=a;try{if(b.level>100)return;b.level++;var e=a.content.getOffset(),f=a.content.getText(),g=l(a),h=c?c:m(a,b.contentProvider,!0,!0,d),i=h;if(g===ba.search.LocationKind.DIRECTIVE_COMPLETION)return[{text:"include"}];if(g===ba.search.LocationKind.ANNOTATION_COMPLETION){var j=ba.search.globalDeclarations(i).filter(function(a){return ba.universeHelpers.isAnnotationTypesProperty(a.property())});return j.map(function(a){return{text:ba.search.qName(a,i),annotation:!0}})}if(g===ba.search.LocationKind.VERSION_COMPLETION)return k(a);if(g===ba.search.LocationKind.INCOMMENT)return[];if(null===h)return[];for(var n=!1,o=e-1;o>=i.lowLevel().start();o--){var q=f[o];if("\r"==q||"\n"==q){n=!0;break}}for(var t=e,u=e-1;u>=0;u--){var v=f[u];{if(" "!==v&&"	"!==v)break;t=u}}var w=ha.find(i.attrs(),function(a){return a.lowLevel().start()<t&&a.lowLevel().end()>=t&&!a.property().getAdapter(ba.ds.RAMLPropertyService).isKey()});if(!w){var y=ha.find(i.definition().allProperties(),function(a){return a.canBeValue()});if(n){var A=ha.find(i.lowLevel().children(),function(a){return a.start()<e&&a.end()>=e});if(A){var y=ha.find(i.definition().allProperties(),function(a){return a.nameId()==A.key()});if(y){var B=p(A.keyStart(),A.unit().contents()),D=p(e,A.unit().contents());if(D.length>B.length+1){var E=y.range().hasValueTypeInHierarchy();E?w=ba.stubs.createVirtualASTPropImpl(A,i,y.range(),y):A.children().length>0&&(i=ba.stubs.createVirtualNodeImpl(A.children()[0],i,y.range(),y))}}}}else y&&g==ba.search.LocationKind.VALUE_COMPLETION&&ba.universeHelpers.isTypeProperty(y)&&1==i.children().length&&(w=ba.stubs.createASTPropImpl(i.lowLevel(),i,y.range(),y))}if(g==ba.search.LocationKind.PATH_COMPLETION)return s(a,b.contentProvider,w,i,!1);if(w&&(g===ba.search.LocationKind.KEY_COMPLETION||g===ba.search.LocationKind.SEQUENCE_KEY_COPLETION)){for(var F="",o=e-1;o>=0;o--){var q=f[o];if("\r"==q||"\n"==q)break;F=q+F}F=F.trim(),F!=w.name()&&(g=ba.search.LocationKind.VALUE_COMPLETION)}if(g==ba.search.LocationKind.VALUE_COMPLETION){var G=w&&w.parent&&w.parent()&&w.parent().property&&w.parent().property();if(G&&fa.isUsesProperty(G))return s(a,b.contentProvider,w,i,!1);var H=C(h,w,a,b);if(!w&&(!H||0==H.length)&&!n&&i.definition().getAdapter(ba.ds.RAMLService).isUserDefined())return z(i,a,aa,ia,n);if(w&&w.property()&&(w.property().getAdapter(ba.ds.RAMLPropertyService).isTypeExpr()||w.property().isAnnotation())){H||(H=[]),H=H.filter(function(a){var b=M(a);return b===i.name()?!1:!0});var I=a.valuePrefix(),J=I.lastIndexOf(".");I=J?I.substr(0,J+1):null,I&&(H=H.filter(function(a){return 0==M(a).indexOf(I)}),H.forEach(function(a){return N(a,M(a).substring(I.length))}))}if(H)if(":"==f[e-1]&&H.forEach(function(a){a.extra?a.extra=" "+a.extra:a.extra=" "}),-1!=a.prefix().indexOf("["))a.setPrefix(""),H.forEach(function(a){a.text=": [ "+a.displayText});else if(P(w)){H=H.filter(function(a){return!O(w,a.displayText)});for(var L="",R=e,S=R;S<f.length&&!/[\t\n\r]/.test(f[S]);S++)if(L+=f[S],":"===L.replace(/\s/g,"")){H.forEach(function(a){a.text=a.displayText,a.snippet=null,a.extra=null});break}var U=!1;R=e-1;for(var S=R;S>=0&&!/[\t\n\r]/.test(f[S]);S--)if("["===f[S]){U=!0;break}U||H.forEach(function(b){return!a.valuePrefix()&&b.snippet?(b.text=b.displayText,void(b.snippet="["+b.snippet+"]")):(b.extra=" [",b.text=(b.snippet||b.displayText)+"]",void(b.snippet=null))})}else{for(var L="",R=e,S=R;S<f.length&&!/[\t\n\r]/.test(f[S]);S++)if(L+=f[S],":"===L.replace(/\s/g,"")){H.forEach(function(a){a.text=a.displayText,a.snippet=null,a.extra=null});break}H.forEach(function(b){b.isResourceType&&!a.valuePrefix()&&b.snippet&&(b.snippet=b.extra+b.snippet,b.extra=null,b.text=b.displayText)})}if(!n&&H&&H.length>0&&(H=K(H,i.lowLevel().start(),f)),H&&Q(w)&&a.prefix()&&a.prefix().length>0){for(var V=!1,W=0,X=0,F="",o=e-1;o>=0;o--){var q=f[o];if("\r"===q||"\n"===q)break;if("<"===q&&"<"===f[o-1]){V=!0;break}"!"===q&&W++,"|"===q&&1===W&&X++,F=q+F}if(V&&1===W&&1===X){var Y=new RegExp(/\|\s*!\s*/.source+a.prefix());Y.test(F)&&(H=ma(H,a.prefix()))}}return H}if(g==da.LocationKind.KEY_COMPLETION||g==da.LocationKind.SEQUENCE_KEY_COPLETION&&e>0&&"-"!=f.charAt(e-1)&&" "!=f.charAt(e-1)){if(h.isAttr()||h.isImplicit())throw new Error("Should be highlevel node at this place");if(da.isExampleNode(i))return T(i,a,b);if(i.property()&&fa.isUriParametersProperty(i.property())&&i.definition()instanceof ca.NodeClass){var Z=i.parent().attr("relativeUri");if(Z&&i.name().substring(0,i.name().length-1)==a.valuePrefix()){var $=ba.utils.parseUrl(Z.value());if($ instanceof Array&&$){if(x(e,f))var _=$.map(function(a){return{text:a+": \n"+r(e,f)+"  "}});else var _=$.map(function(a){return{text:a}});return _}}}if(i.property()&&fa.isBaseUriParametersProperty(i.property())&&i.definition()instanceof ca.NodeClass){var Z=i.root().attr(ea.Universe10.Api.properties.baseUri.name);if(Z&&i.name().substring(0,i.name().length-1)==a.valuePrefix()){var $=ba.utils.parseUrl(Z.value());if($ instanceof Array&&$){if(x(e,f))var _=$.map(function(a){return{text:a+": \n"+r(e,f)+"  "}});else var _=$.map(function(a){return{text:a}});return _}}}if(i.property()&&fa.isResourcesProperty(i.property())){var Z=i.attr("relativeUri");if(Z&&i.name().substring(0,i.name().length-1)==a.valuePrefix())return Z&&-1!=Z.value().indexOf("{")?[{text:"mediaTypeExtension}"}]:[]}var aa=i.property()&&i.property().isMultiValue();i.lowLevel().keyEnd()<e&&(aa=!1);var ia=!0;if(aa){var ja=i.definition().getAdapter(ga.RAMLService).getCanInherit();if(ja){var ka=i.computedValue(ja[0]);ka&&(ia=!0,aa=!1)}}return z(i,a,aa,ia)}return[]}finally{b.level--}}function k(a){var b=["RAML 0.8","RAML 1.0"],c=[],d=a.content.getText(),e=a.content.getOffset(),f=d.substr(0,e);if(0==f.indexOf("#%RAML 1.0 ")){var g=["DocumentationItem","DataType","NamedExample","ResourceType","Trait","SecurityScheme","AnnotationTypeDeclaration","Library","Overlay","Extension"];return g.map(function(a){return{text:a}})}return b.forEach(function(b){if(0==("#%"+b).indexOf(f))if(0==d.trim().indexOf("#%"))if(-1!=a.prefix().indexOf("R"))c.push({displayText:b,text:b});else{var g=d.substring(2,e);0==b.indexOf(g)&&("1"==a.prefix()||"0"==a.prefix()?c.push({displayText:b,text:a.prefix()+b.substr(e-2)}):c.push({displayText:b,text:b.substr(e-2)}))}else c.push({displayText:b,text:b,extra:"%"})}),c}function l(a){return ba.search.determineCompletionKind(a.content.getText(),a.content.getOffset())}function m(a,b,c,d,e){void 0===c&&(c=!0),void 0===d&&(d=!0);var f=b.contentDirName(a.content),g=e||ba.project.createProject(f,b.fsResolver),h=a.content.getOffset(),i=a.content.getText(),j=l(a);j===ba.search.LocationKind.KEY_COMPLETION&&c&&(i=i.substring(0,h)+"k:"+i.substring(h));for(var k=g.setCachedUnitContent(a.content.getBaseName(),i),m=k.highLevel(),n=h,o=h-1;o>=0;o--){var p=i[o];{if(" "!==p&&"	"!==p)break;n=o-1}}var q=m.findElementAtOffset(n);if(!d&&!q)return m;if(q&&da.isExampleNode(q)){var r=q.lowLevel().end();r===n&&"\n"===i[r]&&(q=q.parent())}return q}function n(a){var b=a.content.getOffset(),c=a.content.getText(),d=l(a);return d===ba.search.LocationKind.KEY_COMPLETION&&(c=c.substring(0,b)+"k:"+c.substring(b)),c}function o(a,b){for(var c=a,d=b.lowLevel().unit().contents(),e=a-1;e>=0;e--){var f=d[e];{if(" "!==f&&"	"!==f)break;c=e-1}}return b.findElementAtOffset(c)}function p(a,b){for(var c="",d=a-1;d>=0;d--){var e=b.charAt(d);if(" "==e||"	"==e)c?c+=e:c=e;else{if("\r"==e||"\n"==e)return c;if(c)return""}}return""}function q(a,b){for(var c="",d=a-1;d>=0;d--){var e=b.charAt(d);if(" "==e||"	"==e||"-"==e)c?c+=e:c=e;else{if("\r"==e||"\n"==e)return c;if(c)return""}}return""}function r(a,b){for(var c="",d=a-1;d>=0;d--){var e=b.charAt(d);if(" "==e||"	"==e)c?c+=e:c=e;else if("\r"==e||"\n"==e)return c}}function s(a,b,c,d,e){var f=a.valuePrefix();return-1===f.indexOf("#")?t(a,b,c,d,e):w(a,b,c,d,e)}function t(a,b,c,d,e){var f=a.valuePrefix(),g=b.contentDirName(a.content),h=b.resolve(g,f),i=h.lastIndexOf("."),j=h.lastIndexOf("/");i>0&&(i>j||0>j)||(i=-1);var k=h;h&&(g=b.dirName(h),a.async?g=b.existsAsync(h).then(function(a){return a?b.isDirectoryAsync(h).then(function(a){return a?h:b.dirName(h)}):b.dirName(h)}):b.exists(h)&&b.isDirectory(h)&&(g=h));var l=[],m=!e;if(c&&e&&("example"===c.name()&&(l=l.concat(v(f,g,"examples",b,a.promises)),m=!0),"value"===c.name()&&ba.universeHelpers.isGlobalSchemaType(c.parent().definition())&&(l=l.concat(v(f,g,"schemas",b,a.promises)),m=!0)),c||e&&(ba.universeHelpers.isTraitType(d.definition())&&(l=l.concat(v(f,g,"traits",b,a.promises)),m=!0),ba.universeHelpers.isResourceTypeType(d.definition())&&(l=l.concat(v(f,g,"resourceTypes",b,a.promises)),m=!0),ba.universeHelpers.isSecuritySchemaType(d.definition())&&(l=l.concat(v(f,g,"securitySchemes",b,a.promises)),m=!0),ba.universeHelpers.isGlobalSchemaType(d.definition())&&(l=l.concat(v(f,g,"schemas",b,a.promises)),m=!0)),!m||!e)if(a.async)u(g,k,i,b,a.promises);else if(b.exists(g)&&b.isDirectory(g)){var n=b.readDir(g);l=l.concat(n.filter(function(a){try{var c=b.resolve(g,a);if(0===c.indexOf(k))return!0}catch(d){return!1}}).map(function(a){return{text:i>0?b.resolve(g,a).substr(i+1):a}}))}return l}function u(a,b,c,d,e){if(e){var f,g=a.then(function(a){return f=a,d.existsAsync(a)}),h=g.then(function(e){return e?d.isDirectoryAsync(f).then(function(e){return e?d.readDirAsync(f).then(function(e){return e.filter(function(a){try{var c=d.resolve(f,a);if(0===c.indexOf(b))return!0}catch(e){return!1}}).map(function(b){return{text:c>0?d.resolve(a,b).substr(c+1):b}})}):[]}):[]});e.push(h)}}function v(a,b,c,d,e){if(e){var f=b.then(function(a){var b=d.resolve(a,c);return d.existsAsync(b)}),g=f.then(function(b){return b?d.readDirAsync(h).then(function(b){var d=b.map(function(b){return{text:b,replacementPrefix:a,extra:"./"+c+"/"}});return d}):[]});return e.push(g),[]}var h=d.resolve(b,c);if(d.exists(h)){var i=d.readDir(h),j=i.map(function(b){return{text:b,replacementPrefix:a,extra:"./"+c+"/"}});return j}return[]}function w(a,b,c,d,e){var f=a.valuePrefix(),g=ba.schema.getIncludePath(f),h=ba.schema.getIncludeReference(f);if(!g||!h)return[];var i=c.lowLevel().unit().resolve(g);if(!i)return[];var j=i.contents();if(!j)return[];try{var k=ba.schema.completeReference(g,h,j);return k.map(function(a){return{text:a}})}catch(l){console.log(l)}return[]}function x(a,b){for(var c=!0,d=a>0?a-1:0;d<b.length;d++){var e=b.charAt(d);if(" "==e||"\r"==e||"\n"==e)break;":"==e&&(c=!1)}return c}function y(a,b){var c=!0;return b.getContextRequirements().forEach(function(b){if(-1===b.name.indexOf("(")){var d=a.computedValue(b.name);d?c=c&&d==b.value:b.value&&(c=!1)}}),c}function z(a,b,c,d,e){void 0===e&&(e=!0);var g=a,h=!1,i=!1,j=b.content.getText(),k=b.content.getOffset();if(e){var l=q(a.lowLevel().keyStart(),j);void 0==l&&(l="");var m=q(k,j),n=l.length,o=m.length;for(n==o&&a.parent()&&(a.property().getAdapter(ba.ds.RAMLPropertyService).isMerged()?g=g.parent():(h=!1,i=!0)),o>n&&(h=!0,o>=n+4&&(i=!0,h=!1));n>o&&g.parent();)g=g.parent(),n-=2}var r=x(k,j),s=r?": ":"",t=g.definition().allProperties();t=t.filter(function(a){return!a.getAdapter(ba.ds.RAMLPropertyService).isKey()&&!a.getAdapter(ba.ds.RAMLPropertyService).isMerged()&&!a.getAdapter(ga.RAMLPropertyService).isSystem()}),t=t.filter(function(a){return y(g,a)});var u={};if(g.attrs().forEach(function(a){u[a.name()]=!0}),t=t.filter(function(a){return!u[a.nameId()]}).filter(function(a){return!a.isAnnotation()}),a.definition().isAssignableFrom(ba.universes.Universe10.TypeDeclaration.name)&&!a.definition().isAssignableFrom("ObjectTypeDeclaration")&&!a.attr("type")){var v=a.definition().universe().type("ObjectTypeDeclaration");v&&t.push(v.property("properties"))}var w=[];return c||i||(w=t.map(function(b){var c=b.nameId()+s;return b.range().isAssignableFrom(ea.Universe10.ExampleSpec.name)?c=c.trim():!b.range().hasValueTypeInHierarchy()&&r&&(c+="\n"+p(k,j)+"  "),{text:c,displayText:b.nameId(),description:b.description(),category:f(b.nameId(),a.definition(),b.range())}})),d&&g.definition().allProperties().filter(function(a){return a.getAdapter(ba.ds.RAMLPropertyService).isMerged()||a.isFromParentKey()}).forEach(function(a){if((!i||a.isFromParentKey())&&(!h||!a.isFromParentKey())){var c=a,d=a.getOftenKeys();if(!d){var e=a.suggester();e&&(d=e(g))}d||(d=a.enumOptions()),g.property()&&ba.universeHelpers.isBodyProperty(g.property())&&(d||(ba.universeHelpers.isResponseType(g.property().domain())&&(d=["application/json","application/xml"]),(ba.universeHelpers.isMethodBaseType(g.property().domain())||ba.universeHelpers.isMethodType(g.property().domain()))&&(d=["application/json","application/xml","multipart/form-data","application/x-www-form-urlencoded"]))),d&&d.forEach(function(a){var d=a,e=c.valueDocProvider(),h="";e&&(h=e(a)),r?w.push({text:a+":\n"+p(k,j)+"  ",description:h,displayText:a,prefix:a.indexOf("/")>=0?b.valuePrefix():null,category:f(d,g.definition(),c.range())}):w.push({text:a,description:h,displayText:a,prefix:a.indexOf("/")>=0?b.valuePrefix():null,category:f(d,g.definition(),c.range())})})}}),w}function A(a){return"'"===a?!0:'"'===a?!0:!1}function B(a){var b=a.content.getText(),c=a.content.getOffset(),d=a.prefix(),e=b.substring(0,c),f=e.substring(e.lastIndexOf(":")+1).trim();if(!f.length)return!1;if(","===f[f.length-1]&&f.indexOf("[")<0)return!0;if(" "===e[e.length-1]){if(/^\w$/.test(f[f.length-1]))return!0;if(","===f[f.length-1]&&f.indexOf("[")<0)return!0}if(/^\w+$/.test(d)){if(f=f.substring(0,f.lastIndexOf(d)).trim(),/^\w$/.test(f[f.length-1]))return!0;if(","===f[f.length-1]&&f.indexOf("[")<0)return!0}return A(f[f.length-1])?!0:!1}function C(a,b,c,d){var e=a,f=c.content.getText(),g=c.content.getOffset();if(B(c))return[];if(b){var h=b.property(),i=b.value();if("object"==typeof i&&i){var k=i.toHighLevel();if(k)return j(d.currentRequest,d,D(k,c));if(ba.search.isExampleNodeContent(b)){var l=ba.search.findExampleContentType(b);if(l){var m=ba.search.parseDocumentationContent(b,l);if(m)return j(d.currentRequest,d,D(m,c))}}}if(h){var n=E(h,e);if(h.isAllowNull()&&n.push({text:"null",description:"null means - that no value is allowed"}),!n||0==n.length){var o=h.getOftenKeys();if(o)return o.map(function(a){return{text:a,displayText:a}})}if(fa.isExampleProperty(h)&&fa.isBodyLikeType(e.definition())){
if(!R(b.value(),g,f))return;var p=s(c,d.contentProvider,b,e,!0).map(function(a){return a.extra="!include ./examples/",a.displayText="!include ./examples/"+a.text,a});return p=J(p,b.lowLevel().start(),f)}if(fa.isValueProperty(h)&&fa.isGlobalSchemaType(e.definition())){if(!R(b.value(),g,f))return;p=s(c,d.contentProvider,b,e,!0).map(function(a){return a.extra="!include ./schemas/",a.displayText="!include ./schemas/"+a.text,a}),p=J(p,b.lowLevel().start(),f)}if(n)return n}return[]}if(fa.isGlobalSchemaType(e.definition())&&(p=s(c,d.contentProvider,b,e,!0).map(function(a){return a.extra="!include ./schemas/",a.displayText="!include ./schemas/"+a.text,a}),p=J(p,e.lowLevel().start(),f)),fa.isTraitType(e.definition()))return p=s(c,d.contentProvider,b,e,!0).map(function(a){return a.extra="!include ./traits/",a.displayText="!include ./traits/"+a.text,a}),p=K(p,e.lowLevel().start(),f);if(fa.isResourceTypeType(e.definition())){var p=s(c,d.contentProvider,b,e,!0).map(function(a){return a.extra="!include ./resourceTypes/",a.displayText="!include ./resourceTypes/"+a.text,a});return p=K(p,e.lowLevel().start(),f)}if(fa.isSecuritySchemaType(e.definition())){var p=s(c,d.contentProvider,b,e,!0).map(function(a){return a.extra="!include ./securitySchemes/",a.displayText="!include ./securitySchemes/"+a.text,a});return p=K(p,e.lowLevel().start(),f)}return fa.isExampleSpecType(e.definition())?T(e,c,d):void 0}function D(a,b){for(var c=b.content.getText(),d=b.content.getOffset(),e=d-1;e>=0;e--){var f=c[e];{if(" "!=f&&"	"!=f)break;d=e}}var g=a.findElementAtOffset(d);return g}function E(a,b){if(b){if(a.getAdapter(ba.ds.RAMLPropertyService).isTypeExpr()){var c,d=b.associatedType(),e=b.definition(),g=b.attr(ba.universes.Universe10.TypeDeclaration.properties.type.name),h=g&&g.value(),i=b.children()&&b.children().filter(function(a){return a.isAttr()&&ba.universeHelpers.isTypeProperty(a.property())}),j=[],k=b&&b.root&&b.root();k&&k.lowLevel()&&k.lowLevel().unit()&&j.push(k.lowLevel().unit().absolutePath()),k&&k.wrapperNode&&k.wrapperNode()&&k.wrapperNode().uses&&k.wrapperNode().uses().forEach(function(a){a&&a.value&&a.value()&&j.push(k.lowLevel().unit().resolve(a.value()).absolutePath())});var l=ba.search.globalDeclarations(b).filter(function(f){var g=f.lowLevel().unit().absolutePath();if(j.indexOf(g)<0)return!1;if(ba.universeHelpers.isGlobalSchemaType(f.definition()))return!0;var k=f.definition().allSuperTypes();if(ha.find(k,function(a){return ba.universeHelpers.isTypeDeclarationType(a)})){var l=h&&a&&a.isMultiValue()&&i&&i.length>1;if(l){if(!d)try{d=b.localType()}catch(m){console.log(m)}if(d&&!e.hasUnionInHierarchy()){var n=d.superTypes().filter(function(a){return!a.isAssignableFrom("unknown")});if(n){var o=ha.find(n,function(a){return G(a)}),p=ha.find(n,function(a){return F(a)}),q=ha.find(n,function(a){return H(a)})||e&&H(e),r=q||p;if(c=o||r,ha.find(n,function(a){return ba.search.qName(f,b)===a.nameId()}))return!1;if(c&&(F(f.definition())||H(f.definition())))return!1;if(r&&G(f.definition()))return!1}}if(e.hasUnionInHierarchy()){var s=I(e);if(ha.find(s,function(a){return ba.search.qName(f,b)===a.nameId()}))return!1}}return!0}return fa.isTypeDeclarationType(f.definition())&&"models"===f.property().nameId()}),m=l.map(function(a){return{text:da.qName(a,b),description:""}}),n=a.domain().universe().type("TypeDeclaration");if(n){var o=n.allSubTypes();m=m.concat(o.filter(function(a){return c&&(F(a)||H(a))?!1:!0}).map(function(a){return{text:a.getAdapter(ga.RAMLService).descriminatorValue(),description:a.description()}}))}return m}if(fa.isSchemaStringType(a.range())&&"RAML10"===a.range().universe().version()){var l=da.globalDeclarations(b).filter(function(a){if(fa.isGlobalSchemaType(a.definition()))return!0;var b=a.definition().allSuperTypes();return ha.find(b,function(a){return fa.isTypeDeclarationType(a)})?!0:fa.isTypeDeclarationType(a.definition())&&"models"===a.property().nameId()}),m=l.map(function(a){return{text:da.qName(a,b),description:""}}),o=da.subTypesWithLocals(a.domain().universe().type("TypeDeclaration"),b);return m=m.concat(o.map(function(a){return{text:a.getAdapter(ga.RAMLService).descriminatorValue(),description:a.description()}}))}if(a.isDescriminator()){var o=da.subTypesWithLocals(a.domain(),b);return o.map(function(b){var c=b.getAdapter(ga.RAMLService).descriminatorValue();return{text:c,description:b.description(),category:f(c,a.domain(),null)}})}if(a.isReference())return da.nodesDeclaringType(a.referencesTo(),b).map(function(a){return S(a,b)});if(a.range().hasValueTypeInHierarchy()){var p=a.range().getAdapter(ga.RAMLService);if(p.globallyDeclaredBy().length>0){var l=da.globalDeclarations(b).filter(function(a){var b=a.definition();return null!=ha.find(p.globallyDeclaredBy(),function(a){return a==b})});return l.map(function(a){return S(a,b)})}if(fa.isBooleanTypeType(a.range()))return["false","true"].map(function(a){return{text:a}});var q=a.node&&a.node();if(q){var r=ha.filter(q.children(),function(a){return a.name&&a.value&&a.property()&&fa.isEnumProperty(a.property())}).map(function(a){return{text:a.value()}});return r}}}return da.enumValues(a,b).map(function(a){return{text:a,category:f(a,b&&b.definition(),null)}})}function F(a){var b=!a.isArray()&&!G(a)&&!a.hasUnionInHierarchy()&&a.key()!==ea.Universe10.TypeDeclaration;return b}function G(a){return a.isAssignableFrom(ea.Universe10.ObjectTypeDeclaration.name)||a.isAssignableFrom("object")}function H(a){return a.isAssignableFrom(ea.Universe10.ArrayTypeDeclaration.name)}function I(a){var b=[];return a&&a.isUnion()?a.left?(b.push(a.left),b.concat(I(a.right))):void 0:a?[a]:b}function J(a,b,c){return a=[{displayText:"Define Inline",text:"|\n"+L(b-1,c)+"  "}].concat(a)}function K(a,b,c){return a=[{displayText:"Define Inline",text:"\n"+L(b-1,c)+"  "}].concat(a)}function L(a,b){for(var c="";a>0;){var d=b[a];if("\r"==d||"\n"==d||" "!=d&&"-"!=d)break;c+=" ",a--}return c}function M(a){return a.text?a.text:a.snippet?a.snippet:a.displayText}function N(a,b){return a.text?void(a.text=b):a.snippet?void(a.snippet=b):void(a.displayText=b)}function O(a,b){var c=a.parent&&a.parent();if(!c)return!1;var d=a.name&&a.name();if(!d)return!1;var e=c.attributes&&c.attributes(d);if(!e)return!1;if(0===e.length)return!1;var f=[];return e.forEach(function(a){var b=a.value&&a.value()&&a.value().valueName&&a.value().valueName();b&&f.push(b)}),ha.find(f,function(a){return b===a})}function P(a){return a&&a.definition()&&a.property()&&a.definition().isAssignableFrom(ea.Universe10.TraitRef.name)?!0:!1}function Q(a){var b=a&&a.definition?a.definition():null;if(b){var c=b.nameId();if("Api"===c)return!1;if("ResourceType"===c||"Trait"===c)return!0;var d=a.parent();return d?Q(d):!1}return!1}function R(a,b,c){if(a&&a.length>0){var d=a.trim();if(0==d.indexOf("{"))return!1;if(0==d.indexOf("<"))return!1;if(0==d.indexOf("["))return!1}for(var e=b;e>=0;e--){var f=c[e];if(":"==f)return!0;if("|"==f)return!1;if("'"==f)return!1;if('"'==f)return!1}return!0}function S(a,b){var c=!1,d=a.attr("description"),e="";d?e=d.value():(d=a.attr("usage"),d&&(e=d.value()));var f=a.localType(),g=f.allProperties().filter(function(a){return a.isRequired()&&!a.getAdapter(ga.RAMLPropertyService).isKey()}),h=da.qName(a,b);if(!fa.isAnnotationTypeType(a.definition())&&g.length>0){h+=": {",h+=g.map(function(a){return a.nameId()+" : "}).join(", ")+"}";var i="";fa.isResourceTypeType(a.definition())&&(h=""+h+" }",i=" { ",c=!0)}return{displayText:da.qName(a,b),snippet:h,description:e,extra:i,isResourceType:c}}function T(a,b,c){if(!da.isExampleNode(a))return[];var d=da.findExampleContentType(a);if(!d)return[];var e=da.parseStructuredExample(a,d);if(!e)return[];var f=a&&a.lowLevel()&&a.lowLevel().unit()&&a.lowLevel().unit().project();return j(b,c,D(e,b),f)}function U(a,b){var c=V(a,b),d=[],e=[];return c.forEach(function(a){var b=Z(a);d.indexOf(b)<0&&(e.push(a),d.push(b))}),e}function V(a,b){var c,d,e,f,g;if(null!=a){for(c&&(a=a.map(function(a){var b,c,d;return b={text:null!=(c=a.text)?c:a.word,snippet:a.snippet,replacementPrefix:null!=(d=a.replacementPrefix)?d:a.prefix,className:a.className,type:a.type},null==b.rightLabelHTML&&a.renderLabelAsHtml&&(b.rightLabelHTML=a.label),null!=b.rightLabel||a.renderLabelAsHtml||(b.rightLabel=a.label),b})),d=!1,f=0,g=a.length;g>f;f++)e=a[f],e.snippet||e.text||(d=!0),null==e.replacementPrefix&&(e.replacementPrefix=Y(b.prefix()));return d&&(a=function(){var b,c,d;for(d=[],b=0,c=a.length;c>b;b++)e=a[b],(e.snippet||e.text)&&d.push(e);return d}()),a=W(a,b)}}function W(a,b){var c,d,e,f,g,h,i,j,k,l,m,n;for(e=b.prefix(),g=[],d=l=0,m=a.length;m>l;d=++l)i=a[d],i.sortScore=Math.max(-d/10+3,0)+1,i.score=null,k=i.snippet||i.text,j=null!=(n=i.replacementPrefix)?n:e,f=!j||" "===j,c=!f&&j[0].toLowerCase()===k[0].toLowerCase(),f&&g.push(i),c&&(h=na.score(k,j))>0&&(i.score=h*i.sortScore,g.push(i));return g.sort(X),g}function X(a,b){var c,d;return(null!=(c=b.score)?c:b.sortScore)-(null!=(d=a.score)?d:a.sortScore)}function Y(a){return oa.test(a)?a:""}function Z(a){return a&&(a.displayText||a.text)||null}function $(a){var b,c;return b=_(a),(null!=(c=pa.exec(b))?c[2]:void 0)||""}function _(a){for(var b=a.content.getOffset(),c=a.content.getText(),d=b-1;d>=0;d--){var e=c.charAt(d);if("\r"===e||"\n"===e||" "===e||"	"===e)return c.substring(d+1,b)}return""}function aa(a){return new qa(a)}var ba=window.RAML.Parser,ca=ba.ds,da=ba.search,ea=ba.universes,fa=ba.universeHelpers,ga=ca,ha=a("underscore"),ia=a("../resources/categories.json"),ja=function(){function a(a){this.async=!1,this.content=a}return a.prototype.prefix=function(){return"undefined"!=typeof this.prefixValue?this.prefixValue:$(this)},a.prototype.setPrefix=function(a){this.prefixValue=a},a.prototype.valuePrefix=function(){for(var a=this.content.getOffset(),b=this.content.getText(),c=a-1;c>=0;c--){var d=b.charAt(c);if("\r"===d||"\n"===d||" "===d||"	"===d||'"'===d||"'"===d||":"===d||"("===d)return b.substring(c+1,a)}return""},a}();c.CompletionRequest=ja;var ka=function(){function a(a){this.currentRequest=null,this.level=0,this.contentProvider=a}return a.prototype.suggest=function(a,b){void 0===b&&(b=!1);var c=h(a,this);return b?U(c,a):c},a.prototype.suggestAsync=function(a,b){return void 0===b&&(b=!1),i(a,this).then(function(c){return b?U(c,a):c},function(a){return a})},a}();c.CompletionProvider=ka,c.suggest=d,c.suggestAsync=e,c.valueCompletion=C;var la=ba.utils.getTransformerNames(),ma=function(a,b){var c=[];return la.filter(function(a){return 0===a.indexOf(b)}).forEach(function(a){c.push({displayText:a,text:a})}),c.concat(a)};c.postProcess=U;var na=a("fuzzaldrin-plus"),oa=/^\w+[\w-]*$/,pa=/(\b|['"~`!@#\$%^&*\(\)\{\}\[\]=\+,\/\?>])((\w+[\w-]*)|([.:;[{(< ]+))$/;c.getPrefix=$;var qa=function(){function a(a){this.resolver=a,this.fsResolver=a}return a.prototype.contentDirName=function(a){return this.resolver.dirname(a.getPath())},a.prototype.dirName=function(a){return this.resolver.dirname(a)},a.prototype.exists=function(a){return this.resolver.exists(a)},a.prototype.resolve=function(a,b){return this.resolver.resolve(a,b)},a.prototype.isDirectory=function(a){return this.resolver.isDirectory(a)},a.prototype.isDirectoryAsync=function(a){return this.resolver.isDirectoryAsync(a)},a.prototype.readDir=function(a){return this.resolver.list(a)},a.prototype.existsAsync=function(a){return this.resolver.existsAsync(a)},a.prototype.readDirAsync=function(a){return this.resolver.listAsync(a)},a}();c.getContentProvider=aa},{"../resources/categories.json":11,"fuzzaldrin-plus":2,underscore:12}],10:[function(a,b,c){"use strict";function d(a){k=a}function e(a){l=a}function f(){return j.suggest(k,l)}function g(a,b){return j.suggest(a,b)}function h(a,b){return j.suggestAsync(a,b)}function i(a){return j.getContentProvider(a)}var j=a("./completionProvider"),k=null;c.setDefaultEditorStateProvider=d;var l=null;c.setDefaultFSProvider=e,c.suggestDefault=f,c.suggest=g,c.suggestAsync=h,c.getContentProvider=i},{"./completionProvider":9}],11:[function(a,b,c){b.exports={docs:{description:{is:["Universe10.MarkdownString","Universe08.MarkdownString"]},displayName:{parentIs:["Universe10.ExampleSpec","Universe10.TypeDeclaration","Universe10.Trait","Universe10.MethodBase","Universe10.AbstractSecurityScheme","Universe10.ResourceType","Universe10.Resource","Universe08.Parameter","Universe08.Resource","Universe08.ResourceType","Universe08.Trait"]},example:{parentIs:["Universe10.TypeDeclaration","Universe08.Parameter","Universe08.BodyLike","Universe08.XMLBody","Universe08.JSONBody"]},usage:{parentIs:["Universe10.Library","Universe10.Overlay","Universe10.Extension","Universe10.Trait","Universe10.ResourceType","Universe08.ResourceType","Universe08.Trait"]},content:{parentIs:["Universe10.DocumentationItem","Universe08.DocumentationItem"]},documentation:{parentIs:["Universe10.Api","Universe10.Overlay","Universe10.Extension","Universe08.Api"]},title:{parentIs:["Universe10.DocumentationItem","Universe08.DocumentationItem"]}},parameters:{"default":{parentIs:["Universe10.TypeDeclaration","Universe08.Parameter"]},"enum":{parentIs:["Universe10.TypeDeclaration","Universe08.Parameter"]},maximum:{parentIs:["Universe10.TypeDeclaration","Universe08.Parameter"]},minimum:{parentIs:["Universe10.TypeDeclaration","Universe08.Parameter"]},maxLength:{parentIs:["Universe10.TypeDeclaration","Universe08.Parameter"]},minLength:{parentIs:["Universe10.TypeDeclaration","Universe08.Parameter"]},required:{parentIs:["Universe10.TypeDeclaration","Universe08.Parameter"]},baseUriParameters:{parentIs:["Universe10.Api","Universe10.Overlay","Universe10.Extension","Universe08.Api","Universe08.Resource","Universe08.ResourceType","Universe08.MethodBase","Universe08.Trait","Universe08.AbstractSecurityScheme"]},uriParameters:{parentIs:["Universe10.ResourceType","Universe10.ResourceBase","Universe10.Resource","Universe08.Api","Universe08.Resource","Universe08.ResourceType"]},headers:{parentIs:["Universe10.Response","Universe10.Trait","Universe10.MethodBase","Universe10.Operation","Universe10.AbstractSecurityScheme","Universe08.Response","Universe08.MethodBase","Universe08.Trait","Universe08.AbstractSecurityScheme"]},queryParameters:{parentIs:["Universe10.Trait","Universe10.MethodBase","Universe10.Operation","Universe10.AbstractSecurityScheme","Universe08.MethodBase","Universe08.Trait","Universe08.AbstractSecurityScheme"]},type:{parentIs:["Universe08.Parameter"]}},schemas:{schema:{parentIs:["Universe10.TypeDeclaration","Universe08.BodyLike","Universe08.XMLBody","Universe08.JSONBody"]},schemas:{parentIs:["Universe10.Library","Universe10.LibraryBase","Universe10.Api","Universe10.Overlay","Universe10.Extension","Universe08.Api"]}},root:{baseUri:{parentIs:["Universe10.Api","Universe10.Overlay","Universe10.Extension","Universe08.Api"]},mediaType:{parentIs:["Universe10.Api","Universe10.Overlay","Universe10.Extension","Universe08.Api"]},protocols:{parentIs:["Universe10.Api","Universe10.Overlay","Universe10.Extension","Universe10.Trait","Universe10.MethodBase","Universe08.Api","Universe08.MethodBase","Universe08.Trait","Universe08.AbstractSecurityScheme"]},version:{parentIs:["Universe10.Api","Universe10.Overlay","Universe10.Extension","Universe08.Api"]},title:{parentIs:["Universe10.Api","Universe10.Overlay","Universe10.Extension","Universe08.Api"]}},responses:{responses:{parentIs:["Universe10.Trait","Universe10.MethodBase","Universe10.Operation","Universe10.AbstractSecurityScheme","Universe08.MethodBase","Universe08.Trait","Universe08.AbstractSecurityScheme"]}},response:{body:{parentIs:["Universe10.Response","Universe08.Response"]}},security:{securedBy:{is:["Universe10.SecuritySchemeRef","Universe08.SecuritySchemeRef"]},securitySchemes:{parentIs:["Universe10.Library","Universe10.LibraryBase","Universe10.Api","Universe10.Overlay","Universe10.Extension","Universe08.Api"]},accessTokenUri:{parentIs:["Universe10.AbstractSecurityScheme","Universe08.AbstractSecurityScheme"]},authorizationGrants:{parentIs:["Universe10.AbstractSecurityScheme","Universe08.AbstractSecurityScheme"]},authorizationUri:{parentIs:["Universe10.Api","Universe10.Overlay","Universe10.Extension","Universe08.Api"]},requestTokenUri:{parentIs:["Universe10.Api","Universe10.Overlay","Universe10.Extension","Universe08.Api"]},scopes:{parentIs:["Universe10.Api","Universe10.Overlay","Universe10.Extension","Universe08.Api"]},describedBy:{parentIs:["Universe10.AbstractSecurityScheme","Universe08.AbstractSecurityScheme"]},settings:{parentIs:["Universe10.AbstractSecurityScheme","Universe08.AbstractSecurityScheme"]},"OAuth 1.0":{parentIs:["Universe10.AbstractSecurityScheme","Universe08.AbstractSecurityScheme"]},"OAuth 2.0":{parentIs:["Universe10.AbstractSecurityScheme","Universe08.AbstractSecurityScheme"]},"Basic Authentication":{parentIs:["Universe10.AbstractSecurityScheme","Universe08.AbstractSecurityScheme"]},"Digest Authentication":{parentIs:["Universe10.AbstractSecurityScheme","Universe08.AbstractSecurityScheme"]},type:{parentIs:["Universe10.AbstractSecurityScheme","Universe08.AbstractSecurityScheme"]}},"types and traits":{type:{parentIs:["Universe10.ResourceType","Universe10.ResourceBase","Universe10.Resource","Universe08.Resource","Universe08.ResourceType"]},is:{is:["Universe10.TraitRef","Universe08.TraitRef"]},resourceTypes:{parentIs:["Universe10.Library","Universe10.LibraryBase","Universe10.Api","Universe10.Overlay","Universe10.Extension","Universe08.Api"]},traits:{parentIs:["Universe10.Library","Universe10.LibraryBase","Universe10.Api","Universe10.Overlay","Universe10.Extension","Universe08.Api"]}},methods:{options:{is:["Universe10.MethodBase","Universe08.MethodBase"]},get:{is:["Universe10.MethodBase","Universe08.MethodBase"]},head:{is:["Universe10.MethodBase","Universe08.MethodBase"]},post:{is:["Universe10.MethodBase","Universe08.MethodBase"]},put:{is:["Universe10.MethodBase","Universe08.MethodBase"]},"delete":{is:["Universe10.MethodBase","Universe08.MethodBase"]},trace:{is:["Universe10.MethodBase","Universe08.MethodBase"]},connect:{is:["Universe10.MethodBase","Universe08.MethodBase"]},patch:{is:["Universe10.MethodBase","Universe08.MethodBase"]}},protocols:{HTTP:{parentIs:["Universe10.MethodBase","Universe08.MethodBase"]},HTTPS:{parentIs:["Universe10.MethodBase","Universe08.MethodBase"]}},body:{"application/json":{parentIs:["Universe10.TypeDeclaration","Universe08.BodyLike"]},"application/x-www-form-urlencoded":{parentIs:["Universe10.TypeDeclaration","Universe08.BodyLike"]},"application/xml":{parentIs:["Universe10.TypeDeclaration","Universe08.BodyLike"]},"multipart/form-data":{parentIs:["Universe10.TypeDeclaration","Universe08.BodyLike"]},body:{parentIs:["Universe10.MethodBase","Universe08.MethodBase"]}}}},{}],12:[function(a,b,c){(function(){function a(a){function b(b,c,d,e,f,g){for(;f>=0&&g>f;f+=a){var h=e?e[f]:f;d=c(d,b[h],h,b)}return d}return function(c,d,e,f){d=v(d,f,4);var g=!C(c)&&u.keys(c),h=(g||c).length,i=a>0?0:h-1;return arguments.length<3&&(e=c[g?g[i]:i],i+=a),b(c,d,e,g,i,h)}}function d(a){return function(b,c,d){c=w(c,d);for(var e=B(b),f=a>0?0:e-1;f>=0&&e>f;f+=a)if(c(b[f],f,b))return f;return-1}}function e(a,b,c){return function(d,e,f){var g=0,h=B(d);if("number"==typeof f)a>0?g=f>=0?f:Math.max(f+h,g):h=f>=0?Math.min(f+1,h):f+h+1;else if(c&&f&&h)return f=c(d,e),d[f]===e?f:-1;if(e!==e)return f=b(m.call(d,g,h),u.isNaN),f>=0?f+g:-1;for(f=a>0?g:h-1;f>=0&&h>f;f+=a)if(d[f]===e)return f;return-1}}function f(a,b){var c=H.length,d=a.constructor,e=u.isFunction(d)&&d.prototype||j,f="constructor";for(u.has(a,f)&&!u.contains(b,f)&&b.push(f);c--;)f=H[c],f in a&&a[f]!==e[f]&&!u.contains(b,f)&&b.push(f)}var g=this,h=g._,i=Array.prototype,j=Object.prototype,k=Function.prototype,l=i.push,m=i.slice,n=j.toString,o=j.hasOwnProperty,p=Array.isArray,q=Object.keys,r=k.bind,s=Object.create,t=function(){},u=function(a){return a instanceof u?a:this instanceof u?void(this._wrapped=a):new u(a)};"undefined"!=typeof c?("undefined"!=typeof b&&b.exports&&(c=b.exports=u),c._=u):g._=u,u.VERSION="1.8.3";var v=function(a,b,c){if(void 0===b)return a;switch(null==c?3:c){case 1:return function(c){return a.call(b,c)};case 2:return function(c,d){return a.call(b,c,d)};case 3:return function(c,d,e){return a.call(b,c,d,e)};case 4:return function(c,d,e,f){return a.call(b,c,d,e,f)}}return function(){return a.apply(b,arguments)}},w=function(a,b,c){return null==a?u.identity:u.isFunction(a)?v(a,b,c):u.isObject(a)?u.matcher(a):u.property(a)};u.iteratee=function(a,b){return w(a,b,1/0)};var x=function(a,b){return function(c){var d=arguments.length;if(2>d||null==c)return c;for(var e=1;d>e;e++)for(var f=arguments[e],g=a(f),h=g.length,i=0;h>i;i++){var j=g[i];b&&void 0!==c[j]||(c[j]=f[j])}return c}},y=function(a){if(!u.isObject(a))return{};if(s)return s(a);t.prototype=a;var b=new t;return t.prototype=null,b},z=function(a){return function(b){return null==b?void 0:b[a]}},A=Math.pow(2,53)-1,B=z("length"),C=function(a){var b=B(a);return"number"==typeof b&&b>=0&&A>=b};u.each=u.forEach=function(a,b,c){b=v(b,c);var d,e;if(C(a))for(d=0,e=a.length;e>d;d++)b(a[d],d,a);else{var f=u.keys(a);for(d=0,e=f.length;e>d;d++)b(a[f[d]],f[d],a)}return a},u.map=u.collect=function(a,b,c){b=w(b,c);for(var d=!C(a)&&u.keys(a),e=(d||a).length,f=Array(e),g=0;e>g;g++){var h=d?d[g]:g;f[g]=b(a[h],h,a)}return f},u.reduce=u.foldl=u.inject=a(1),u.reduceRight=u.foldr=a(-1),u.find=u.detect=function(a,b,c){var d;return d=C(a)?u.findIndex(a,b,c):u.findKey(a,b,c),void 0!==d&&-1!==d?a[d]:void 0},u.filter=u.select=function(a,b,c){var d=[];return b=w(b,c),u.each(a,function(a,c,e){b(a,c,e)&&d.push(a)}),d},u.reject=function(a,b,c){return u.filter(a,u.negate(w(b)),c)},u.every=u.all=function(a,b,c){b=w(b,c);for(var d=!C(a)&&u.keys(a),e=(d||a).length,f=0;e>f;f++){var g=d?d[f]:f;if(!b(a[g],g,a))return!1}return!0},u.some=u.any=function(a,b,c){b=w(b,c);for(var d=!C(a)&&u.keys(a),e=(d||a).length,f=0;e>f;f++){var g=d?d[f]:f;if(b(a[g],g,a))return!0}return!1},u.contains=u.includes=u.include=function(a,b,c,d){return C(a)||(a=u.values(a)),("number"!=typeof c||d)&&(c=0),u.indexOf(a,b,c)>=0},u.invoke=function(a,b){var c=m.call(arguments,2),d=u.isFunction(b);return u.map(a,function(a){var e=d?b:a[b];return null==e?e:e.apply(a,c)})},u.pluck=function(a,b){return u.map(a,u.property(b))},u.where=function(a,b){return u.filter(a,u.matcher(b))},u.findWhere=function(a,b){return u.find(a,u.matcher(b))},u.max=function(a,b,c){var d,e,f=-(1/0),g=-(1/0);if(null==b&&null!=a){a=C(a)?a:u.values(a);for(var h=0,i=a.length;i>h;h++)d=a[h],d>f&&(f=d)}else b=w(b,c),u.each(a,function(a,c,d){e=b(a,c,d),(e>g||e===-(1/0)&&f===-(1/0))&&(f=a,g=e)});return f},u.min=function(a,b,c){var d,e,f=1/0,g=1/0;if(null==b&&null!=a){a=C(a)?a:u.values(a);for(var h=0,i=a.length;i>h;h++)d=a[h],f>d&&(f=d)}else b=w(b,c),u.each(a,function(a,c,d){e=b(a,c,d),(g>e||e===1/0&&f===1/0)&&(f=a,g=e)});return f},u.shuffle=function(a){for(var b,c=C(a)?a:u.values(a),d=c.length,e=Array(d),f=0;d>f;f++)b=u.random(0,f),b!==f&&(e[f]=e[b]),e[b]=c[f];return e},u.sample=function(a,b,c){return null==b||c?(C(a)||(a=u.values(a)),a[u.random(a.length-1)]):u.shuffle(a).slice(0,Math.max(0,b))},u.sortBy=function(a,b,c){return b=w(b,c),u.pluck(u.map(a,function(a,c,d){return{value:a,index:c,criteria:b(a,c,d)}}).sort(function(a,b){var c=a.criteria,d=b.criteria;if(c!==d){if(c>d||void 0===c)return 1;if(d>c||void 0===d)return-1}return a.index-b.index}),"value")};var D=function(a){return function(b,c,d){var e={};return c=w(c,d),u.each(b,function(d,f){var g=c(d,f,b);a(e,d,g)}),e}};u.groupBy=D(function(a,b,c){u.has(a,c)?a[c].push(b):a[c]=[b]}),u.indexBy=D(function(a,b,c){a[c]=b}),u.countBy=D(function(a,b,c){u.has(a,c)?a[c]++:a[c]=1}),u.toArray=function(a){return a?u.isArray(a)?m.call(a):C(a)?u.map(a,u.identity):u.values(a):[]},u.size=function(a){return null==a?0:C(a)?a.length:u.keys(a).length},u.partition=function(a,b,c){b=w(b,c);var d=[],e=[];return u.each(a,function(a,c,f){(b(a,c,f)?d:e).push(a)}),[d,e]},u.first=u.head=u.take=function(a,b,c){return null==a?void 0:null==b||c?a[0]:u.initial(a,a.length-b)},u.initial=function(a,b,c){return m.call(a,0,Math.max(0,a.length-(null==b||c?1:b)))},u.last=function(a,b,c){return null==a?void 0:null==b||c?a[a.length-1]:u.rest(a,Math.max(0,a.length-b))},u.rest=u.tail=u.drop=function(a,b,c){return m.call(a,null==b||c?1:b)},u.compact=function(a){return u.filter(a,u.identity)};var E=function(a,b,c,d){for(var e=[],f=0,g=d||0,h=B(a);h>g;g++){var i=a[g];if(C(i)&&(u.isArray(i)||u.isArguments(i))){b||(i=E(i,b,c));var j=0,k=i.length;for(e.length+=k;k>j;)e[f++]=i[j++]}else c||(e[f++]=i)}return e};u.flatten=function(a,b){return E(a,b,!1)},u.without=function(a){return u.difference(a,m.call(arguments,1))},u.uniq=u.unique=function(a,b,c,d){u.isBoolean(b)||(d=c,c=b,b=!1),null!=c&&(c=w(c,d));for(var e=[],f=[],g=0,h=B(a);h>g;g++){var i=a[g],j=c?c(i,g,a):i;b?(g&&f===j||e.push(i),f=j):c?u.contains(f,j)||(f.push(j),e.push(i)):u.contains(e,i)||e.push(i)}return e},u.union=function(){return u.uniq(E(arguments,!0,!0))},u.intersection=function(a){for(var b=[],c=arguments.length,d=0,e=B(a);e>d;d++){var f=a[d];if(!u.contains(b,f)){for(var g=1;c>g&&u.contains(arguments[g],f);g++);g===c&&b.push(f)}}return b},u.difference=function(a){var b=E(arguments,!0,!0,1);return u.filter(a,function(a){return!u.contains(b,a)})},u.zip=function(){return u.unzip(arguments)},u.unzip=function(a){for(var b=a&&u.max(a,B).length||0,c=Array(b),d=0;b>d;d++)c[d]=u.pluck(a,d);return c},u.object=function(a,b){for(var c={},d=0,e=B(a);e>d;d++)b?c[a[d]]=b[d]:c[a[d][0]]=a[d][1];return c},u.findIndex=d(1),u.findLastIndex=d(-1),u.sortedIndex=function(a,b,c,d){c=w(c,d,1);for(var e=c(b),f=0,g=B(a);g>f;){var h=Math.floor((f+g)/2);c(a[h])<e?f=h+1:g=h}return f},u.indexOf=e(1,u.findIndex,u.sortedIndex),u.lastIndexOf=e(-1,u.findLastIndex),u.range=function(a,b,c){null==b&&(b=a||0,a=0),c=c||1;for(var d=Math.max(Math.ceil((b-a)/c),0),e=Array(d),f=0;d>f;f++,a+=c)e[f]=a;return e};var F=function(a,b,c,d,e){if(!(d instanceof b))return a.apply(c,e);var f=y(a.prototype),g=a.apply(f,e);return u.isObject(g)?g:f};u.bind=function(a,b){if(r&&a.bind===r)return r.apply(a,m.call(arguments,1));if(!u.isFunction(a))throw new TypeError("Bind must be called on a function");var c=m.call(arguments,2),d=function(){return F(a,d,b,this,c.concat(m.call(arguments)))};return d},u.partial=function(a){var b=m.call(arguments,1),c=function(){for(var d=0,e=b.length,f=Array(e),g=0;e>g;g++)f[g]=b[g]===u?arguments[d++]:b[g];for(;d<arguments.length;)f.push(arguments[d++]);return F(a,c,this,this,f)};return c},u.bindAll=function(a){var b,c,d=arguments.length;if(1>=d)throw new Error("bindAll must be passed function names");for(b=1;d>b;b++)c=arguments[b],a[c]=u.bind(a[c],a);return a},u.memoize=function(a,b){var c=function(d){var e=c.cache,f=""+(b?b.apply(this,arguments):d);return u.has(e,f)||(e[f]=a.apply(this,arguments)),e[f]};return c.cache={},c},u.delay=function(a,b){var c=m.call(arguments,2);return setTimeout(function(){return a.apply(null,c)},b)},u.defer=u.partial(u.delay,u,1),u.throttle=function(a,b,c){var d,e,f,g=null,h=0;c||(c={});var i=function(){h=c.leading===!1?0:u.now(),g=null,f=a.apply(d,e),g||(d=e=null)};return function(){var j=u.now();h||c.leading!==!1||(h=j);var k=b-(j-h);return d=this,e=arguments,0>=k||k>b?(g&&(clearTimeout(g),g=null),h=j,f=a.apply(d,e),g||(d=e=null)):g||c.trailing===!1||(g=setTimeout(i,k)),f}},u.debounce=function(a,b,c){var d,e,f,g,h,i=function(){var j=u.now()-g;b>j&&j>=0?d=setTimeout(i,b-j):(d=null,c||(h=a.apply(f,e),d||(f=e=null)))};return function(){f=this,e=arguments,g=u.now();var j=c&&!d;return d||(d=setTimeout(i,b)),j&&(h=a.apply(f,e),f=e=null),h}},u.wrap=function(a,b){return u.partial(b,a)},u.negate=function(a){return function(){return!a.apply(this,arguments)}},u.compose=function(){var a=arguments,b=a.length-1;return function(){for(var c=b,d=a[b].apply(this,arguments);c--;)d=a[c].call(this,d);return d}},u.after=function(a,b){return function(){return--a<1?b.apply(this,arguments):void 0}},u.before=function(a,b){var c;return function(){return--a>0&&(c=b.apply(this,arguments)),1>=a&&(b=null),c}},u.once=u.partial(u.before,2);var G=!{toString:null}.propertyIsEnumerable("toString"),H=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"];u.keys=function(a){if(!u.isObject(a))return[];if(q)return q(a);var b=[];for(var c in a)u.has(a,c)&&b.push(c);return G&&f(a,b),b},u.allKeys=function(a){if(!u.isObject(a))return[];var b=[];for(var c in a)b.push(c);return G&&f(a,b),b},u.values=function(a){for(var b=u.keys(a),c=b.length,d=Array(c),e=0;c>e;e++)d[e]=a[b[e]];return d},u.mapObject=function(a,b,c){b=w(b,c);for(var d,e=u.keys(a),f=e.length,g={},h=0;f>h;h++)d=e[h],g[d]=b(a[d],d,a);return g},u.pairs=function(a){for(var b=u.keys(a),c=b.length,d=Array(c),e=0;c>e;e++)d[e]=[b[e],a[b[e]]];return d},u.invert=function(a){for(var b={},c=u.keys(a),d=0,e=c.length;e>d;d++)b[a[c[d]]]=c[d];return b},u.functions=u.methods=function(a){var b=[];for(var c in a)u.isFunction(a[c])&&b.push(c);return b.sort()},u.extend=x(u.allKeys),u.extendOwn=u.assign=x(u.keys),u.findKey=function(a,b,c){b=w(b,c);for(var d,e=u.keys(a),f=0,g=e.length;g>f;f++)if(d=e[f],b(a[d],d,a))return d},u.pick=function(a,b,c){var d,e,f={},g=a;if(null==g)return f;u.isFunction(b)?(e=u.allKeys(g),d=v(b,c)):(e=E(arguments,!1,!1,1),d=function(a,b,c){return b in c},g=Object(g));for(var h=0,i=e.length;i>h;h++){var j=e[h],k=g[j];d(k,j,g)&&(f[j]=k)}return f},u.omit=function(a,b,c){if(u.isFunction(b))b=u.negate(b);else{var d=u.map(E(arguments,!1,!1,1),String);b=function(a,b){return!u.contains(d,b)}}return u.pick(a,b,c)},u.defaults=x(u.allKeys,!0),u.create=function(a,b){var c=y(a);return b&&u.extendOwn(c,b),c},u.clone=function(a){return u.isObject(a)?u.isArray(a)?a.slice():u.extend({},a):a},u.tap=function(a,b){return b(a),a},u.isMatch=function(a,b){var c=u.keys(b),d=c.length;if(null==a)return!d;for(var e=Object(a),f=0;d>f;f++){var g=c[f];if(b[g]!==e[g]||!(g in e))return!1}return!0};var I=function(a,b,c,d){if(a===b)return 0!==a||1/a===1/b;if(null==a||null==b)return a===b;a instanceof u&&(a=a._wrapped),b instanceof u&&(b=b._wrapped);var e=n.call(a);if(e!==n.call(b))return!1;switch(e){case"[object RegExp]":case"[object String]":return""+a==""+b;case"[object Number]":return+a!==+a?+b!==+b:0===+a?1/+a===1/b:+a===+b;case"[object Date]":case"[object Boolean]":return+a===+b}var f="[object Array]"===e;if(!f){if("object"!=typeof a||"object"!=typeof b)return!1;var g=a.constructor,h=b.constructor;if(g!==h&&!(u.isFunction(g)&&g instanceof g&&u.isFunction(h)&&h instanceof h)&&"constructor"in a&&"constructor"in b)return!1}c=c||[],d=d||[];for(var i=c.length;i--;)if(c[i]===a)return d[i]===b;if(c.push(a),d.push(b),f){if(i=a.length,i!==b.length)return!1;for(;i--;)if(!I(a[i],b[i],c,d))return!1}else{var j,k=u.keys(a);if(i=k.length,u.keys(b).length!==i)return!1;for(;i--;)if(j=k[i],!u.has(b,j)||!I(a[j],b[j],c,d))return!1}return c.pop(),d.pop(),!0};u.isEqual=function(a,b){return I(a,b)},u.isEmpty=function(a){return null==a?!0:C(a)&&(u.isArray(a)||u.isString(a)||u.isArguments(a))?0===a.length:0===u.keys(a).length},u.isElement=function(a){return!(!a||1!==a.nodeType)},u.isArray=p||function(a){return"[object Array]"===n.call(a)},u.isObject=function(a){var b=typeof a;return"function"===b||"object"===b&&!!a},u.each(["Arguments","Function","String","Number","Date","RegExp","Error"],function(a){u["is"+a]=function(b){return n.call(b)==="[object "+a+"]"}}),u.isArguments(arguments)||(u.isArguments=function(a){return u.has(a,"callee")}),"function"!=typeof/./&&"object"!=typeof Int8Array&&(u.isFunction=function(a){return"function"==typeof a||!1}),u.isFinite=function(a){return isFinite(a)&&!isNaN(parseFloat(a))},u.isNaN=function(a){return u.isNumber(a)&&a!==+a},u.isBoolean=function(a){return a===!0||a===!1||"[object Boolean]"===n.call(a)},u.isNull=function(a){return null===a},u.isUndefined=function(a){return void 0===a},u.has=function(a,b){return null!=a&&o.call(a,b)},u.noConflict=function(){return g._=h,this},u.identity=function(a){return a},u.constant=function(a){return function(){return a}},u.noop=function(){},
u.property=z,u.propertyOf=function(a){return null==a?function(){}:function(b){return a[b]}},u.matcher=u.matches=function(a){return a=u.extendOwn({},a),function(b){return u.isMatch(b,a)}},u.times=function(a,b,c){var d=Array(Math.max(0,a));b=v(b,c,1);for(var e=0;a>e;e++)d[e]=b(e);return d},u.random=function(a,b){return null==b&&(b=a,a=0),a+Math.floor(Math.random()*(b-a+1))},u.now=Date.now||function(){return(new Date).getTime()};var J={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},K=u.invert(J),L=function(a){var b=function(b){return a[b]},c="(?:"+u.keys(a).join("|")+")",d=RegExp(c),e=RegExp(c,"g");return function(a){return a=null==a?"":""+a,d.test(a)?a.replace(e,b):a}};u.escape=L(J),u.unescape=L(K),u.result=function(a,b,c){var d=null==a?void 0:a[b];return void 0===d&&(d=c),u.isFunction(d)?d.call(a):d};var M=0;u.uniqueId=function(a){var b=++M+"";return a?a+b:b},u.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var N=/(.)^/,O={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},P=/\\|'|\r|\n|\u2028|\u2029/g,Q=function(a){return"\\"+O[a]};u.template=function(a,b,c){!b&&c&&(b=c),b=u.defaults({},b,u.templateSettings);var d=RegExp([(b.escape||N).source,(b.interpolate||N).source,(b.evaluate||N).source].join("|")+"|$","g"),e=0,f="__p+='";a.replace(d,function(b,c,d,g,h){return f+=a.slice(e,h).replace(P,Q),e=h+b.length,c?f+="'+\n((__t=("+c+"))==null?'':_.escape(__t))+\n'":d?f+="'+\n((__t=("+d+"))==null?'':__t)+\n'":g&&(f+="';\n"+g+"\n__p+='"),b}),f+="';\n",b.variable||(f="with(obj||{}){\n"+f+"}\n"),f="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+f+"return __p;\n";try{var g=new Function(b.variable||"obj","_",f)}catch(h){throw h.source=f,h}var i=function(a){return g.call(this,a,u)},j=b.variable||"obj";return i.source="function("+j+"){\n"+f+"}",i},u.chain=function(a){var b=u(a);return b._chain=!0,b};var R=function(a,b){return a._chain?u(b).chain():b};u.mixin=function(a){u.each(u.functions(a),function(b){var c=u[b]=a[b];u.prototype[b]=function(){var a=[this._wrapped];return l.apply(a,arguments),R(this,c.apply(u,a))}})},u.mixin(u),u.each(["pop","push","reverse","shift","sort","splice","unshift"],function(a){var b=i[a];u.prototype[a]=function(){var c=this._wrapped;return b.apply(c,arguments),"shift"!==a&&"splice"!==a||0!==c.length||delete c[0],R(this,c)}}),u.each(["concat","join","slice"],function(a){var b=i[a];u.prototype[a]=function(){return R(this,b.apply(this._wrapped,arguments))}}),u.prototype.value=function(){return this._wrapped},u.prototype.valueOf=u.prototype.toJSON=u.prototype.value,u.prototype.toString=function(){return""+this._wrapped},"function"==typeof define&&define.amd&&define("underscore",[],function(){return u})}).call(this)},{}]},{},[8]),!function(a){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=a();else if("function"==typeof define&&define.amd)define([],a);else{var b;"undefined"!=typeof window?b=window:"undefined"!=typeof global?b=global:"undefined"!=typeof self&&(b=self),b.ramlObjectToRaml=a()}}(function(){return function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){var d=a("../utils/is");b.exports=function(a){return a.filter(function(a){return d.string(a.title)&&d.string(a.content)}).map(function(a){return{title:a.title,content:a.content}})}},{"../utils/is":12}],2:[function(a,b,c){var d=a("xtend/mutable"),e=a("../utils/is"),f=a("./schemas"),g=a("./parameters"),h=a("./documentation"),i=a("./security-schemes"),j=a("./resources"),k=a("./resource-types"),l=a("./traits");b.exports=function(a){var b={};return e.string(a.title)&&(b.title=a.title),(e.string(a.version)||e.number(a.version))&&(b.version=a.version),e.string(a.mediaType)&&(b.mediaType=a.mediaType),e.string(a.baseUri)&&(b.baseUri=a.baseUri),e.object(a.baseUriParameters)&&(b.baseUriParameters=g(a.baseUriParameters)),e.array(a.documentation)&&(b.documentation=h(a.documentation)),e.array(a.securitySchemes)&&(b.securitySchemes=i(a.securitySchemes)),e.array(a.schemas)&&(b.schemas=f(a.schemas)),e.array(a.resourceTypes)&&(b.resourceTypes=k(a.resourceTypes)),e.array(a.traits)&&(b.traits=l(a.traits)),e.array(a.resources)&&d(b,j(a.resources)),b}},{"../utils/is":12,"./documentation":1,"./parameters":3,"./resource-types":4,"./resources":5,"./schemas":7,"./security-schemes":8,"./traits":10,"xtend/mutable":18}],3:[function(a,b,c){var d=(a("xtend/mutable"),a("../utils/is")),e={string:!0,number:!0,integer:!0,date:!0,"boolean":!0,file:!0},f=function(a,b){var c={};return d.string(a.displayName)&&b!==a.displayName&&(c.displayName=a.displayName),d.string(a.type)&&e.hasOwnProperty(a.type)&&(c.type=a.type),d.string(a.description)&&(c.description=a.description),d.array(a["enum"])&&(c["enum"]=a["enum"]),d.string(a.pattern)&&(c.pattern=a.pattern),d.number(a.minLength)&&(c.minLength=a.minLength),d.number(a.maxLength)&&(c.maxLength=a.maxLength),d.number(a.minimum)&&(c.minimum=a.minimum),d.number(a.maximum)&&(c.maximum=a.maximum),null!=a.example&&d.primitive(a.example)&&(c.example=a.example),null!=a["default"]&&d.primitive(a["default"])&&(c["default"]=a["default"]),d["boolean"](a.repeat)&&(c.repeat=a.repeat),d["boolean"](a.required)&&(c.required=a.required),c};b.exports=function(a){var b={};return Object.keys(a).forEach(function(c){var e=a[c];return d.array(e)?b[c]=e.map(f):void(b[c]=f(e,c))}),b}},{"../utils/is":12,"xtend/mutable":18}],4:[function(a,b,c){var d=a("../utils/is"),e=a("./trait"),f=/^(?:GET|HEAD|POST|PUT|PATCH|DELETE|OPTIONS)\??$/i;b.exports=function(a){var b=[];return a.forEach(function(a){Object.keys(a).forEach(function(c){var g={},h=g[c]={},i=a[c];Object.keys(i).forEach(function(a){var b=i[a],c=["type","usage","description"];f.test(a)&&(h[a]=null==b?b:e(b)),~c.indexOf(a)&&d.string(b)&&(h[a]=b)}),b.push(g)})}),b}},{"../utils/is":12,"./trait":9}],5:[function(a,b,c){var d=a("xtend/mutable"),e=a("../utils/is"),f=a("./trait"),g=a("./parameters"),h=function(a){var b={};return a.forEach(function(a){var c=b[a.method.toLowerCase()]={};e.array(a.is)&&(c.is=a.is),d(c,f(a))}),b};b.exports=function i(a){var b={};return a.forEach(function(a){var c=b;a.relativeUri&&(c=b[a.relativeUri]=b[a.relativeUri]||{}),a.uriParameters&&(c.uriParameters=g(a.uriParameters)),(e.string(a.type)||e.object(a.type))&&(c.type=a.type),e.array(a.methods)&&d(c,h(a.methods)),e.array(a.resources)&&d(c,i(a.resources))}),b}},{"../utils/is":12,"./parameters":3,"./trait":9,"xtend/mutable":18}],6:[function(a,b,c){b.exports=function(a){var b={};return Object.keys(a).forEach(function(c){/^\d{3}$/.test(c)&&(b[c]=a[c])}),b}},{}],7:[function(a,b,c){var d=a("../utils/is");b.exports=function(a){var b=[];return a.forEach(function(a){Object.keys(a).forEach(function(c){if(d.string(a[c])){var e={};e[c]=a[c],b.push(e)}})}),b}},{"../utils/is":12}],8:[function(a,b,c){var d=a("../utils/is"),e=a("./trait"),f={"Basic Authentication":!0,"Digest Authentication":!0,"OAuth 1.0":!0,"OAuth 2.0":!0};b.exports=function(a){var b=[];return a.forEach(function(a){Object.keys(a).forEach(function(c){var g=a[c];if(f[g.type]||/^x-/i.test(g.type)){var h={},i=h[c]={type:g.type};d.string(g.description)&&(i.description=g.description),d.object(g.describedBy)&&(i.describedBy=e(g.describedBy)),d.object(g.settings)&&(i.settings=g.settings),b.push(h)}})}),b}},{"../utils/is":12,"./trait":9}],9:[function(a,b,c){var d=a("../utils/is"),e=a("./responses"),f=a("./parameters");b.exports=function(a){var b={};return d.string(a.usage)&&(b.usage=a.usage),d.string(a.description)&&(b.description=a.description),d.object(a.headers)&&(b.headers=f(a.headers)),d.object(a.queryParameters)&&(b.queryParameters=f(a.queryParameters)),d.object(a.body)&&(b.body=a.body),d.object(a.responses)&&(b.responses=e(a.responses)),b}},{"../utils/is":12,"./parameters":3,"./responses":6}],10:[function(a,b,c){var d=a("./trait");b.exports=function(a){var b=[];return a.forEach(function(a){Object.keys(a).forEach(function(c){var e={};e[c]=d(a[c]),b.push(e)})}),b}},{"./trait":9}],11:[function(a,b,c){var d=a("xtend/mutable"),e=a("indent-string"),f=a("repeat-string"),g=a("string-length"),h=a("./utils/is"),i=Function.prototype.call.bind(Object.prototype.toString),j={};j[0]="\\0",j[7]="\\a",j[8]="\\b",j[9]="\\t",j[10]="\\n",j[11]="\\v",j[12]="\\f",j[13]="\\r",j[27]="\\e",j[34]='\\"',j[92]="\\\\",j[133]="\\N",j[160]="\\_",j[8232]="\\L",j[8233]="\\P";var k={};k[9]=!0,k[10]=!0,k[13]=!0,k[33]=!0,k[34]=!0,k[35]=!0,k[37]=!0,k[38]=!0,k[39]=!0,k[42]=!0,k[62]=!0,k[64]=!0,k[91]=!0,k[93]=!0,k[96]=!0,k[123]=!0,k[124]=!0,k[125]=!0;var l=new RegExp("^(?:[-+]?(?:[0-9][0-9_]*)|[-+]?(?:[0-9][0-9_]*)\\.[0-9_]*(?:[eE][-+][0-9]+)?|\\.[0-9_]+(?:[eE][-+][0-9]+)?|[-+]?[0-9][0-9_]*(?::[0-5]?[0-9])+\\.[0-9_]*|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$"),m=function(a){return j[a]||!(a>=32&&126>=a||133===a||a>=160&&55295>=a||a>=57344&&65533>=a||a>=65536&&1114111>=a)},n=function(a){if(0===g(a))return!0;if(/^[ \-?]| $/.test(a)||l.test(a))return!0;for(var b=0;b<a.length;b++){var c=a.charCodeAt(b);if(m(c))return!0;if(k[c])return!0}return!1},o=function(a){return a.split("").map(function(a){var b=a.charCodeAt(0);return m(b)?j[b]||escapeHex(b):a}).join("")},p=function(a){return'"'+o(a)+'"'},q=function(a){return n(a)?p(a):a},r=function(a,b,c){if(!a.length)return!0;var d=4+2*(a.length-1);return a.every(function(a){return h.primitive(a)?(d+=g(B(a,0,c)),b>d):!1})},s=function(a,b,c){return a.length?"[ "+a.map(function(a){return h.string(a)&&a.indexOf(":")>-1?p(a):B(a,b,c)}).join(", ")+" ]":"[]"},t=function(a,b,c){return/\r?\n/.test(a)?!1:g(q(a))<b},u=function(a,b,c){return e(a,c.indent,b)},v=function(a,b,c,d){var e=d.maxLength-g(a)-1;return null==b?a:h.array(b)&&r(b,e,d)?a+" "+s(b,c+1,d):h.string(b)&&!t(b,e,d)?a+" |\n"+u(b,c+1,d):h.object(b)&&!Object.keys(b).length?a+" {}":h.primitive(b)?a+" "+B(b,c+1,d):a+"\n"+B(b,c+1,d)},w=function(a,b,c,d){var e=f(d.indent,c)+a+":";return v(e,b,c,d)},x=function(a,b,c){var d=Object.keys(a);return d.map(function(d){return w(d,a[d],b,c)}).join("\n")},y=function(a,b,c){var d=f(c.indent,b)+"-";return h.object(a)?d+" "+B(a,b+1,c).replace(/^ +/,""):h.string(a)&&a.indexOf(":")>-1?d+" "+p(a):v(d,a,b,c)},z=function(a,b,c){return a.map(function(a){return y(a,b,c)}).join("\n")},A={"[object String]":q,"[object Object]":x,"[object Array]":z,"[object Number]":String,"[object Boolean]":String},B=function(a,b,c){var d=i(a);return A[d]?A[d](a,b,c):""};b.exports=function(a,b){return B(a,0,d({indent:"  ",maxLength:80},b))}},{"./utils/is":12,"indent-string":13,"repeat-string":14,"string-length":15,"xtend/mutable":18}],12:[function(a,b,c){var d=c,e=Object.prototype.toString;["String","Number","Boolean","RegExp","Object","Array","Function","Null","Undefined"].forEach(function(a){var b=a.charAt(0).toLowerCase()+a.substr(1),c="[object "+a+"]";d[b]=function(a){return e.call(a)===c}});var f={"[object Number]":!0,"[object String]":!0,"[object Boolean]":!0,"[object Null]":!0,"[object Undefined]":!0};d.primitive=function(a){return!!f[e.call(a)]}},{}],13:[function(a,b,c){"use strict";var d=a("repeat-string");b.exports=function(a,b,c){if("string"!=typeof a||"string"!=typeof b)throw new TypeError("`string` and `indent` should be strings");if(null!=c&&"number"!=typeof c)throw new TypeError("`count` should be a number");return b=c>1?d(b,c):b,a.replace(/^(?!\s*$)/gm,b)}},{"repeat-string":14}],14:[function(a,b,c){b.exports=function(a,b){if(1>b)return"";for(var c="";b>0;)1&b&&(c+=a),b>>=1,a+=a;return c}},{}],15:[function(a,b,c){"use strict";var d=a("strip-ansi"),e=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g;b.exports=function(a){return d(a).replace(e," ").length}},{"strip-ansi":16}],16:[function(a,b,c){"use strict";var d=a("ansi-regex")();b.exports=function(a){return"string"==typeof a?a.replace(d,""):a}},{"ansi-regex":17}],17:[function(a,b,c){"use strict";b.exports=function(){return/(?:(?:\u001b\[)|\u009b)(?:(?:[0-9]{1,3})?(?:(?:;[0-9]{0,3})*)?[A-M|f-m])|\u001b[A-M]/g}},{}],18:[function(a,b,c){function d(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c)c.hasOwnProperty(d)&&(a[d]=c[d])}return a}b.exports=d},{}],19:[function(a,b,c){var d=a("./lib/sanitize"),e=a("./lib/stringify");b.exports=function(a){return"#%RAML 0.8\n"+e(d(a))}},{"./lib/sanitize":2,"./lib/stringify":11}]},{},[19])(19)}),!function(a){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=a();else if("function"==typeof define&&define.amd)define([],a);else{var b;"undefined"!=typeof window?b=window:"undefined"!=typeof global?b=global:"undefined"!=typeof self&&(b=self),b.swaggerToRamlObject=a()}}(function(){return function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){function d(a,b){var c=x(a);if(c>=2)throw new Error("Swagger "+c.toFixed(1)+" is not supported");if(!a.basePath||!a.apis)throw new Error("Must be a valid api declaration: "+E);if(b=b||{},!y(a.apiVersion,b.version))throw new Error("The api version has changed: "+b.version+" -> "+a.apiVersion);return b.version||(b.version=a.apiVersion),e(a.basePath,b),f(a,b),b}function e(a,b){if(!b.baseUri)return b.baseUri=a,b;if(b.baseUri!==a)throw new Error("The base uri has changed: "+b.baseUri+" -> "+a);return b}function f(a,b){var c=a.resourcePath,d=b.resources=b.resources||[],e=g(d,c);return a.apis.forEach(function(b){var f=b.path,g=e;return f.substr(0,c.length)===c?(f=f.substr(c.length),e||(g=e={relativeUri:c},d.push(g)),""!==f&&(g={relativeUri:f},e.resources=e.resources||[],e.resources.push(g))):d.push(g={relativeUri:f}),b.description&&(g.description=b.description),h(b.operations,a,g)}),e}function g(a,b){var c;return a.some(function(a){return a.relativeUri===b?(c=a,!0):void 0}),c}function h(a,b,c){return c.methods=c.methods||[],a.forEach(function(a){if(!a.method)throw new Error("Expected the operation to have a method defined");var d={method:a.method};a.nickname&&(d.displayName=a.nickname),(a.notes||a.summary)&&(d.description=a.notes||a.summary),("true"===a.deprecated||a.deprecated===!0)&&(d.description?d.description+="\n\n":d.description="",d.description+="This method has been deprecated."),l(a,b,d,c),i(a,b,d),c.methods.push(d)}),c}function i(a,b,c){if(!a.responseMessages||!a.responseMessages.length)return c;var d=c.responses=c.responses||{},e=a.produces||b.produces||[];return a.responseMessages.forEach(function(a){d[a.code]={description:a.message},e.length&&(d[a.code].body={},e.forEach(function(c){return a.responseModel&&G[c]?void(d[a.code].body[c]={schema:G[c](a.responseModel,b)}):void(d[a.code].body[c]=null)}))}),c}function j(a){return/^(?:[\w\.]|%\d{2})*$/.test(a)}function k(a){function b(b,c){if(j(c))return b;var d=w(c),e=a.uriParameters;return e[c]&&(e[d]=e[c],delete e[c]),"{"+d+"}"}return a.relativeUri=a.relativeUri.replace(/\{([^\}]+)\}/g,b),a}function l(a,b,c,d){var e=a.consumes||b.consumes||[],f=o(a.parameters);return f.path&&(d.uriParameters=p(f.path,b),k(d)),f.query&&(c.queryParameters=p(f.query,b)),f.header&&(c.headers=p(f.header,b)),f.body&&m(f.body,e,b,c),f.form&&n(f.form,e,b,c),c}function m(a,b,c,d){if(d.body=d.body||{},a.length>1)throw new Error("Found "+param.length+" parameters for body type");return a.forEach(function(a){b.forEach(function(b){return F[b]?d.body[b]={schema:F[b](a,c)}:void(d.body[b]=null)})}),d}function n(a,b,c,d){var e=b.indexOf(D)>-1,f=b.indexOf(C)>-1,g=p(a,c);return e||(e=a.some(function(a){return"File"===a.type})),d.body=d.body||{},e&&f?(d.body[D]={formParameters:g},d.body[C]={formParameters:g}):e?d.body[D]={formParameters:g}:d.body[C]={formParameters:g},d}function o(a){var b={};return Object.keys(a).forEach(function(c){var d=a[c],e=d.paramType,f=b[e]=b[e]||[];f.push(d)}),b}function p(a,b){var c={};return a.forEach(function(a){c[a.name]=q(a,b)}),c}function q(a,b){var c={};return a.type&&z[a.type]&&v(c,z[a.type]),B[a.format]&&v(c,B[a.format]),"string"==typeof a.description&&(c.description=a.description),"boolean"==typeof a.required&&(c.required=a.required),a.defaultValue&&(c["default"]=a.defaultValue),Array.isArray(a["enum"])&&(c["enum"]=a["enum"]),"number"==typeof a.minimum&&(c.minimum=a.minimum),"number"==typeof a.maximum&&(c.maximum=a.maximum),c}function r(a,b){var c={},d=b.models[a];return d?(Object.keys(b.models).some(function(d){var e=b.models[d];if(!e||!e.subTypes||!e.subTypes.indexOf(a))return!1;var f=s(d,b);return v(c,f),c.properties=v({},f.properties),!0}),Object.keys(d.properties||{}).forEach(function(a){var e=d.properties[a],f=c.properties=c.properties||{};f[a]=s(e,b)}),c):void 0}function s(a,b){var c={};return a.type&&A[a.type]?v(c,A[a.type]):(a.$ref||a.type)&&v(c,r(a.$ref||a.type,b)),["description","defaultValue","enum","minimum","maximum","items","required","uniqueItems"].forEach(function(d){return null!=a[d]?"items"===d?c[d]=s(a[d],b):void(c[d]=a[d]):void 0}),c}function t(a,b){var c=v({$schema:"http://json-schema.org/draft-04/schema#"},s(a,b));return JSON.stringify(c,null,2)}function u(a,b){var c=v({$schema:"http://json-schema.org/draft-04/schema#"},r(a,b));return JSON.stringify(c,null,2)}var v=a("extend"),w=a("camel-case"),x=a("./utils/version"),y=a("./utils/version-equal"),z={string:{type:"string"},number:{type:"number"},integer:{type:"integer"},"boolean":{type:"boolean"},File:{type:"file"},array:{repeat:!0}},A={string:{type:"string"},number:{type:"number"},integer:{type:"integer"},"boolean":{type:"boolean"},array:{type:"array"},object:{type:"object"}},B={int32:{type:"integer",minimum:-2147483648,maximum:2147483647},int64:{type:"integer",minimum:-0x8000000000000000,maximum:0x8000000000000000},date:{type:"date"},"date-time":{type:"date"}},C="application/x-www-form-urlencoded",D="multipart/form-data",E="https://github.com/wordnik/swagger-spec/blob/master/versions/1.2.md#52-api-declaration";b.exports=d;var F={"application/xml":null,"application/json":t},G={"application/xml":null,"application/json":u}},{"./utils/version":7,"./utils/version-equal":6,"camel-case":8,extend:13}],2:[function(a,b,c){function d(a){var b=JSON.parse(a);if(!b.swaggerVersion)throw new Error("Swagger version is required");return b}b.exports=d},{}],3:[function(a,b,c){function d(a,b){var c=k(a);if(c>=2)throw new Error("Swagger "+c.toFixed(1)+" is not supported");if(!a.apis)throw new Error("Must be a valid resource listing: "+o);return b=b||{},a.apiVersion&&(b.version=a.apiVersion),e(a.info,b),f(a.authorizations,b),b}function e(a,b){if(!a)return b;var c=Object.keys(l).filter(function(b){return a[b]}).map(function(b){return{title:l[b],content:a[b]}});return a.title&&(b.title=a.title),c.length&&(b.documentation=c),b}function f(a,b){return a?(b.securitySchemes=Object.keys(a).map(function(b){var c={};return c[b]=g(a[b]),c}),b):b}function g(a){return"oauth2"===a.type?h(a):"apiKey"===a.type?i(a):"basicAuth"===a.type?j(a):void 0}function h(a){var b={type:"OAuth 2.0",settings:{authorizationGrants:[]}},c=a.grantTypes.implicit,d=a.grantTypes.authorization_code,e=[],f=b.settings;if(a.scopes&&a.scopes.length){var g=[];f.scopes=a.scopes.map(function(a){var b=a.scope;return a.description&&g.push("* "+b+" - "+a.description),b}),g.length&&(e.push("Available scopes: "),e.push(g.join("\n")))}if(Object.keys(a.grantTypes).forEach(function(a){f.authorizationGrants.push(m[a])}),c&&(c.loginEndpoint&&c.loginEndpoint.url&&(f.authorizationUri=c.loginEndpoint.url),c.tokenName&&"access_token"!==c.tokenName&&e.push('The token grant uses "'+c.tokenName+'" as the token name.')),d){var h=d.tokenEndpoint,i=d.tokenRequestEndpoint,j=i.clientIdName,k=i.clientSecretName,l=h.tokenName;f.accessTokenUri=h.url,f.authorizationUri=i.url,j&&"client_id"!==j&&e.push('The code grant uses "'+j+'" as the parameter for passing the client id.'),k&&"client_secret"!==k&&e.push('The code grant uses "'+k+'" as the parameter for passing the client secret.'),l&&"access_code"!==l&&e.push('The code grant uses "'+l+'" as the parameter for passing the authorization token.')}return e.length&&(b.description=e.join("\n\n")),b}function i(a){var b={type:"x-api-key",describedBy:{}},c=n[a.passAs];if(c){var d=b.describedBy[c]={};d[a.keyname]={type:"string",description:"Used to send a valid API key for authentication."}}return b}function j(a){return{type:"Basic Authentication"}}var k=a("./utils/version"),l={description:"Description",termsOfServiceUrl:"Terms of Service URL",contact:"Contact",license:"License",licenseUrl:"License URL"},m={implicit:"token",authorization_code:"code"},n={header:"headers",query:"queryParameters"},o="https://github.com/wordnik/swagger-spec/blob/master/versions/1.2.md#51-resource-listing";b.exports=d},{"./utils/version":7}],4:[function(a,b,c){function d(a){return!a.basePath}b.exports=d},{}],5:[function(a,b,c){function d(){for(var a=Array.prototype.reduce.call(arguments,function(a,b){var c=e(b);return f(b)?c:a.concat(c)},[]),b=0;b<a.length;){var c=a[b];""===c||"."===c?a.splice(b,1):".."===c?(a.splice(b-1,2),b--):b++}return a.join("/")}function e(a){if(!f(a))return a.replace(/^\/+/,"").split(/\/+/g);var b=a.match(/^\w+:\/\//)[0],c=a.substr(b.length).indexOf("/");if(-1===c)return[a];var d=b.length+c,g=e(a.substr(d)),h=a.substr(0,d);return[h].concat(g)}function f(a){return/^\w+:\/\//.test(a)}b.exports=d},{}],6:[function(a,b,c){function d(a,b){if(null==b)return!0;var c=Number(b),d=Number(a);return c&&d?c===d:a===b}b.exports=d},{}],7:[function(a,b,c){function d(a){return parseFloat(a.swaggerVersion||a.swagger)}b.exports=d},{}],8:[function(a,b,c){var d=a("sentence-case");b.exports=function(a){return d(a).replace(/(\d) (?=\d)/g,"$1_").replace(/ (\w)/g,function(a,b){return b.toUpperCase()})}},{"sentence-case":9}],9:[function(a,b,c){var d=a("./vendor/non-word-regexp.js"),e=a("./vendor/camel-case-regexp.js"),f=a("./vendor/trailing-digit-regexp.js");b.exports=function(a){return null==a?"":String(a).replace(e,"$1 $2").replace(f,"$1 $2").replace(d," ").replace(/^ | $/g,"").toLowerCase()}},{"./vendor/camel-case-regexp.js":10,"./vendor/non-word-regexp.js":11,"./vendor/trailing-digit-regexp.js":12}],10:[function(a,b,c){b.exports=/([\u0061-\u007A\u00B5\u00DF-\u00F6\u00F8-\u00FF\u0101\u0103\u0105\u0107\u0109\u010B\u010D\u010F\u0111\u0113\u0115\u0117\u0119\u011B\u011D\u011F\u0121\u0123\u0125\u0127\u0129\u012B\u012D\u012F\u0131\u0133\u0135\u0137\u0138\u013A\u013C\u013E\u0140\u0142\u0144\u0146\u0148\u0149\u014B\u014D\u014F\u0151\u0153\u0155\u0157\u0159\u015B\u015D\u015F\u0161\u0163\u0165\u0167\u0169\u016B\u016D\u016F\u0171\u0173\u0175\u0177\u017A\u017C\u017E-\u0180\u0183\u0185\u0188\u018C\u018D\u0192\u0195\u0199-\u019B\u019E\u01A1\u01A3\u01A5\u01A8\u01AA\u01AB\u01AD\u01B0\u01B4\u01B6\u01B9\u01BA\u01BD-\u01BF\u01C6\u01C9\u01CC\u01CE\u01D0\u01D2\u01D4\u01D6\u01D8\u01DA\u01DC\u01DD\u01DF\u01E1\u01E3\u01E5\u01E7\u01E9\u01EB\u01ED\u01EF\u01F0\u01F3\u01F5\u01F9\u01FB\u01FD\u01FF\u0201\u0203\u0205\u0207\u0209\u020B\u020D\u020F\u0211\u0213\u0215\u0217\u0219\u021B\u021D\u021F\u0221\u0223\u0225\u0227\u0229\u022B\u022D\u022F\u0231\u0233-\u0239\u023C\u023F\u0240\u0242\u0247\u0249\u024B\u024D\u024F-\u0293\u0295-\u02AF\u0371\u0373\u0377\u037B-\u037D\u0390\u03AC-\u03CE\u03D0\u03D1\u03D5-\u03D7\u03D9\u03DB\u03DD\u03DF\u03E1\u03E3\u03E5\u03E7\u03E9\u03EB\u03ED\u03EF-\u03F3\u03F5\u03F8\u03FB\u03FC\u0430-\u045F\u0461\u0463\u0465\u0467\u0469\u046B\u046D\u046F\u0471\u0473\u0475\u0477\u0479\u047B\u047D\u047F\u0481\u048B\u048D\u048F\u0491\u0493\u0495\u0497\u0499\u049B\u049D\u049F\u04A1\u04A3\u04A5\u04A7\u04A9\u04AB\u04AD\u04AF\u04B1\u04B3\u04B5\u04B7\u04B9\u04BB\u04BD\u04BF\u04C2\u04C4\u04C6\u04C8\u04CA\u04CC\u04CE\u04CF\u04D1\u04D3\u04D5\u04D7\u04D9\u04DB\u04DD\u04DF\u04E1\u04E3\u04E5\u04E7\u04E9\u04EB\u04ED\u04EF\u04F1\u04F3\u04F5\u04F7\u04F9\u04FB\u04FD\u04FF\u0501\u0503\u0505\u0507\u0509\u050B\u050D\u050F\u0511\u0513\u0515\u0517\u0519\u051B\u051D\u051F\u0521\u0523\u0525\u0527\u0561-\u0587\u1D00-\u1D2B\u1D6B-\u1D77\u1D79-\u1D9A\u1E01\u1E03\u1E05\u1E07\u1E09\u1E0B\u1E0D\u1E0F\u1E11\u1E13\u1E15\u1E17\u1E19\u1E1B\u1E1D\u1E1F\u1E21\u1E23\u1E25\u1E27\u1E29\u1E2B\u1E2D\u1E2F\u1E31\u1E33\u1E35\u1E37\u1E39\u1E3B\u1E3D\u1E3F\u1E41\u1E43\u1E45\u1E47\u1E49\u1E4B\u1E4D\u1E4F\u1E51\u1E53\u1E55\u1E57\u1E59\u1E5B\u1E5D\u1E5F\u1E61\u1E63\u1E65\u1E67\u1E69\u1E6B\u1E6D\u1E6F\u1E71\u1E73\u1E75\u1E77\u1E79\u1E7B\u1E7D\u1E7F\u1E81\u1E83\u1E85\u1E87\u1E89\u1E8B\u1E8D\u1E8F\u1E91\u1E93\u1E95-\u1E9D\u1E9F\u1EA1\u1EA3\u1EA5\u1EA7\u1EA9\u1EAB\u1EAD\u1EAF\u1EB1\u1EB3\u1EB5\u1EB7\u1EB9\u1EBB\u1EBD\u1EBF\u1EC1\u1EC3\u1EC5\u1EC7\u1EC9\u1ECB\u1ECD\u1ECF\u1ED1\u1ED3\u1ED5\u1ED7\u1ED9\u1EDB\u1EDD\u1EDF\u1EE1\u1EE3\u1EE5\u1EE7\u1EE9\u1EEB\u1EED\u1EEF\u1EF1\u1EF3\u1EF5\u1EF7\u1EF9\u1EFB\u1EFD\u1EFF-\u1F07\u1F10-\u1F15\u1F20-\u1F27\u1F30-\u1F37\u1F40-\u1F45\u1F50-\u1F57\u1F60-\u1F67\u1F70-\u1F7D\u1F80-\u1F87\u1F90-\u1F97\u1FA0-\u1FA7\u1FB0-\u1FB4\u1FB6\u1FB7\u1FBE\u1FC2-\u1FC4\u1FC6\u1FC7\u1FD0-\u1FD3\u1FD6\u1FD7\u1FE0-\u1FE7\u1FF2-\u1FF4\u1FF6\u1FF7\u210A\u210E\u210F\u2113\u212F\u2134\u2139\u213C\u213D\u2146-\u2149\u214E\u2184\u2C30-\u2C5E\u2C61\u2C65\u2C66\u2C68\u2C6A\u2C6C\u2C71\u2C73\u2C74\u2C76-\u2C7B\u2C81\u2C83\u2C85\u2C87\u2C89\u2C8B\u2C8D\u2C8F\u2C91\u2C93\u2C95\u2C97\u2C99\u2C9B\u2C9D\u2C9F\u2CA1\u2CA3\u2CA5\u2CA7\u2CA9\u2CAB\u2CAD\u2CAF\u2CB1\u2CB3\u2CB5\u2CB7\u2CB9\u2CBB\u2CBD\u2CBF\u2CC1\u2CC3\u2CC5\u2CC7\u2CC9\u2CCB\u2CCD\u2CCF\u2CD1\u2CD3\u2CD5\u2CD7\u2CD9\u2CDB\u2CDD\u2CDF\u2CE1\u2CE3\u2CE4\u2CEC\u2CEE\u2CF3\u2D00-\u2D25\u2D27\u2D2D\uA641\uA643\uA645\uA647\uA649\uA64B\uA64D\uA64F\uA651\uA653\uA655\uA657\uA659\uA65B\uA65D\uA65F\uA661\uA663\uA665\uA667\uA669\uA66B\uA66D\uA681\uA683\uA685\uA687\uA689\uA68B\uA68D\uA68F\uA691\uA693\uA695\uA697\uA723\uA725\uA727\uA729\uA72B\uA72D\uA72F-\uA731\uA733\uA735\uA737\uA739\uA73B\uA73D\uA73F\uA741\uA743\uA745\uA747\uA749\uA74B\uA74D\uA74F\uA751\uA753\uA755\uA757\uA759\uA75B\uA75D\uA75F\uA761\uA763\uA765\uA767\uA769\uA76B\uA76D\uA76F\uA771-\uA778\uA77A\uA77C\uA77F\uA781\uA783\uA785\uA787\uA78C\uA78E\uA791\uA793\uA7A1\uA7A3\uA7A5\uA7A7\uA7A9\uA7FA\uFB00-\uFB06\uFB13-\uFB17\uFF41-\uFF5A])([\u0041-\u005A\u00C0-\u00D6\u00D8-\u00DE\u0100\u0102\u0104\u0106\u0108\u010A\u010C\u010E\u0110\u0112\u0114\u0116\u0118\u011A\u011C\u011E\u0120\u0122\u0124\u0126\u0128\u012A\u012C\u012E\u0130\u0132\u0134\u0136\u0139\u013B\u013D\u013F\u0141\u0143\u0145\u0147\u014A\u014C\u014E\u0150\u0152\u0154\u0156\u0158\u015A\u015C\u015E\u0160\u0162\u0164\u0166\u0168\u016A\u016C\u016E\u0170\u0172\u0174\u0176\u0178\u0179\u017B\u017D\u0181\u0182\u0184\u0186\u0187\u0189-\u018B\u018E-\u0191\u0193\u0194\u0196-\u0198\u019C\u019D\u019F\u01A0\u01A2\u01A4\u01A6\u01A7\u01A9\u01AC\u01AE\u01AF\u01B1-\u01B3\u01B5\u01B7\u01B8\u01BC\u01C4\u01C7\u01CA\u01CD\u01CF\u01D1\u01D3\u01D5\u01D7\u01D9\u01DB\u01DE\u01E0\u01E2\u01E4\u01E6\u01E8\u01EA\u01EC\u01EE\u01F1\u01F4\u01F6-\u01F8\u01FA\u01FC\u01FE\u0200\u0202\u0204\u0206\u0208\u020A\u020C\u020E\u0210\u0212\u0214\u0216\u0218\u021A\u021C\u021E\u0220\u0222\u0224\u0226\u0228\u022A\u022C\u022E\u0230\u0232\u023A\u023B\u023D\u023E\u0241\u0243-\u0246\u0248\u024A\u024C\u024E\u0370\u0372\u0376\u0386\u0388-\u038A\u038C\u038E\u038F\u0391-\u03A1\u03A3-\u03AB\u03CF\u03D2-\u03D4\u03D8\u03DA\u03DC\u03DE\u03E0\u03E2\u03E4\u03E6\u03E8\u03EA\u03EC\u03EE\u03F4\u03F7\u03F9\u03FA\u03FD-\u042F\u0460\u0462\u0464\u0466\u0468\u046A\u046C\u046E\u0470\u0472\u0474\u0476\u0478\u047A\u047C\u047E\u0480\u048A\u048C\u048E\u0490\u0492\u0494\u0496\u0498\u049A\u049C\u049E\u04A0\u04A2\u04A4\u04A6\u04A8\u04AA\u04AC\u04AE\u04B0\u04B2\u04B4\u04B6\u04B8\u04BA\u04BC\u04BE\u04C0\u04C1\u04C3\u04C5\u04C7\u04C9\u04CB\u04CD\u04D0\u04D2\u04D4\u04D6\u04D8\u04DA\u04DC\u04DE\u04E0\u04E2\u04E4\u04E6\u04E8\u04EA\u04EC\u04EE\u04F0\u04F2\u04F4\u04F6\u04F8\u04FA\u04FC\u04FE\u0500\u0502\u0504\u0506\u0508\u050A\u050C\u050E\u0510\u0512\u0514\u0516\u0518\u051A\u051C\u051E\u0520\u0522\u0524\u0526\u0531-\u0556\u10A0-\u10C5\u10C7\u10CD\u1E00\u1E02\u1E04\u1E06\u1E08\u1E0A\u1E0C\u1E0E\u1E10\u1E12\u1E14\u1E16\u1E18\u1E1A\u1E1C\u1E1E\u1E20\u1E22\u1E24\u1E26\u1E28\u1E2A\u1E2C\u1E2E\u1E30\u1E32\u1E34\u1E36\u1E38\u1E3A\u1E3C\u1E3E\u1E40\u1E42\u1E44\u1E46\u1E48\u1E4A\u1E4C\u1E4E\u1E50\u1E52\u1E54\u1E56\u1E58\u1E5A\u1E5C\u1E5E\u1E60\u1E62\u1E64\u1E66\u1E68\u1E6A\u1E6C\u1E6E\u1E70\u1E72\u1E74\u1E76\u1E78\u1E7A\u1E7C\u1E7E\u1E80\u1E82\u1E84\u1E86\u1E88\u1E8A\u1E8C\u1E8E\u1E90\u1E92\u1E94\u1E9E\u1EA0\u1EA2\u1EA4\u1EA6\u1EA8\u1EAA\u1EAC\u1EAE\u1EB0\u1EB2\u1EB4\u1EB6\u1EB8\u1EBA\u1EBC\u1EBE\u1EC0\u1EC2\u1EC4\u1EC6\u1EC8\u1ECA\u1ECC\u1ECE\u1ED0\u1ED2\u1ED4\u1ED6\u1ED8\u1EDA\u1EDC\u1EDE\u1EE0\u1EE2\u1EE4\u1EE6\u1EE8\u1EEA\u1EEC\u1EEE\u1EF0\u1EF2\u1EF4\u1EF6\u1EF8\u1EFA\u1EFC\u1EFE\u1F08-\u1F0F\u1F18-\u1F1D\u1F28-\u1F2F\u1F38-\u1F3F\u1F48-\u1F4D\u1F59\u1F5B\u1F5D\u1F5F\u1F68-\u1F6F\u1FB8-\u1FBB\u1FC8-\u1FCB\u1FD8-\u1FDB\u1FE8-\u1FEC\u1FF8-\u1FFB\u2102\u2107\u210B-\u210D\u2110-\u2112\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u2130-\u2133\u213E\u213F\u2145\u2183\u2C00-\u2C2E\u2C60\u2C62-\u2C64\u2C67\u2C69\u2C6B\u2C6D-\u2C70\u2C72\u2C75\u2C7E-\u2C80\u2C82\u2C84\u2C86\u2C88\u2C8A\u2C8C\u2C8E\u2C90\u2C92\u2C94\u2C96\u2C98\u2C9A\u2C9C\u2C9E\u2CA0\u2CA2\u2CA4\u2CA6\u2CA8\u2CAA\u2CAC\u2CAE\u2CB0\u2CB2\u2CB4\u2CB6\u2CB8\u2CBA\u2CBC\u2CBE\u2CC0\u2CC2\u2CC4\u2CC6\u2CC8\u2CCA\u2CCC\u2CCE\u2CD0\u2CD2\u2CD4\u2CD6\u2CD8\u2CDA\u2CDC\u2CDE\u2CE0\u2CE2\u2CEB\u2CED\u2CF2\uA640\uA642\uA644\uA646\uA648\uA64A\uA64C\uA64E\uA650\uA652\uA654\uA656\uA658\uA65A\uA65C\uA65E\uA660\uA662\uA664\uA666\uA668\uA66A\uA66C\uA680\uA682\uA684\uA686\uA688\uA68A\uA68C\uA68E\uA690\uA692\uA694\uA696\uA722\uA724\uA726\uA728\uA72A\uA72C\uA72E\uA732\uA734\uA736\uA738\uA73A\uA73C\uA73E\uA740\uA742\uA744\uA746\uA748\uA74A\uA74C\uA74E\uA750\uA752\uA754\uA756\uA758\uA75A\uA75C\uA75E\uA760\uA762\uA764\uA766\uA768\uA76A\uA76C\uA76E\uA779\uA77B\uA77D\uA77E\uA780\uA782\uA784\uA786\uA78B\uA78D\uA790\uA792\uA7A0\uA7A2\uA7A4\uA7A6\uA7A8\uA7AA\uFF21-\uFF3A\u0030-\u0039\u00B2\u00B3\u00B9\u00BC-\u00BE\u0660-\u0669\u06F0-\u06F9\u07C0-\u07C9\u0966-\u096F\u09E6-\u09EF\u09F4-\u09F9\u0A66-\u0A6F\u0AE6-\u0AEF\u0B66-\u0B6F\u0B72-\u0B77\u0BE6-\u0BF2\u0C66-\u0C6F\u0C78-\u0C7E\u0CE6-\u0CEF\u0D66-\u0D75\u0E50-\u0E59\u0ED0-\u0ED9\u0F20-\u0F33\u1040-\u1049\u1090-\u1099\u1369-\u137C\u16EE-\u16F0\u17E0-\u17E9\u17F0-\u17F9\u1810-\u1819\u1946-\u194F\u19D0-\u19DA\u1A80-\u1A89\u1A90-\u1A99\u1B50-\u1B59\u1BB0-\u1BB9\u1C40-\u1C49\u1C50-\u1C59\u2070\u2074-\u2079\u2080-\u2089\u2150-\u2182\u2185-\u2189\u2460-\u249B\u24EA-\u24FF\u2776-\u2793\u2CFD\u3007\u3021-\u3029\u3038-\u303A\u3192-\u3195\u3220-\u3229\u3248-\u324F\u3251-\u325F\u3280-\u3289\u32B1-\u32BF\uA620-\uA629\uA6E6-\uA6EF\uA830-\uA835\uA8D0-\uA8D9\uA900-\uA909\uA9D0-\uA9D9\uAA50-\uAA59\uABF0-\uABF9\uFF10-\uFF19])/g},{}],11:[function(a,b,c){b.exports=/[^\u0041-\u005A\u0061-\u007A\u00AA\u00B5\u00BA\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u0527\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u08A0\u08A2-\u08AC\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0977\u0979-\u097F\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C33\u0C35-\u0C39\u0C3D\u0C58\u0C59\u0C60\u0C61\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D60\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F4\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191C\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19C1-\u19C7\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FCC\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA697\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA78E\uA790-\uA793\uA7A0-\uA7AA\uA7F8-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA80-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uABC0-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC\u0030-\u0039\u00B2\u00B3\u00B9\u00BC-\u00BE\u0660-\u0669\u06F0-\u06F9\u07C0-\u07C9\u0966-\u096F\u09E6-\u09EF\u09F4-\u09F9\u0A66-\u0A6F\u0AE6-\u0AEF\u0B66-\u0B6F\u0B72-\u0B77\u0BE6-\u0BF2\u0C66-\u0C6F\u0C78-\u0C7E\u0CE6-\u0CEF\u0D66-\u0D75\u0E50-\u0E59\u0ED0-\u0ED9\u0F20-\u0F33\u1040-\u1049\u1090-\u1099\u1369-\u137C\u16EE-\u16F0\u17E0-\u17E9\u17F0-\u17F9\u1810-\u1819\u1946-\u194F\u19D0-\u19DA\u1A80-\u1A89\u1A90-\u1A99\u1B50-\u1B59\u1BB0-\u1BB9\u1C40-\u1C49\u1C50-\u1C59\u2070\u2074-\u2079\u2080-\u2089\u2150-\u2182\u2185-\u2189\u2460-\u249B\u24EA-\u24FF\u2776-\u2793\u2CFD\u3007\u3021-\u3029\u3038-\u303A\u3192-\u3195\u3220-\u3229\u3248-\u324F\u3251-\u325F\u3280-\u3289\u32B1-\u32BF\uA620-\uA629\uA6E6-\uA6EF\uA830-\uA835\uA8D0-\uA8D9\uA900-\uA909\uA9D0-\uA9D9\uAA50-\uAA59\uABF0-\uABF9\uFF10-\uFF19]+/g;
},{}],12:[function(a,b,c){b.exports=/([\u0030-\u0039\u00B2\u00B3\u00B9\u00BC-\u00BE\u0660-\u0669\u06F0-\u06F9\u07C0-\u07C9\u0966-\u096F\u09E6-\u09EF\u09F4-\u09F9\u0A66-\u0A6F\u0AE6-\u0AEF\u0B66-\u0B6F\u0B72-\u0B77\u0BE6-\u0BF2\u0C66-\u0C6F\u0C78-\u0C7E\u0CE6-\u0CEF\u0D66-\u0D75\u0E50-\u0E59\u0ED0-\u0ED9\u0F20-\u0F33\u1040-\u1049\u1090-\u1099\u1369-\u137C\u16EE-\u16F0\u17E0-\u17E9\u17F0-\u17F9\u1810-\u1819\u1946-\u194F\u19D0-\u19DA\u1A80-\u1A89\u1A90-\u1A99\u1B50-\u1B59\u1BB0-\u1BB9\u1C40-\u1C49\u1C50-\u1C59\u2070\u2074-\u2079\u2080-\u2089\u2150-\u2182\u2185-\u2189\u2460-\u249B\u24EA-\u24FF\u2776-\u2793\u2CFD\u3007\u3021-\u3029\u3038-\u303A\u3192-\u3195\u3220-\u3229\u3248-\u324F\u3251-\u325F\u3280-\u3289\u32B1-\u32BF\uA620-\uA629\uA6E6-\uA6EF\uA830-\uA835\uA8D0-\uA8D9\uA900-\uA909\uA9D0-\uA9D9\uAA50-\uAA59\uABF0-\uABF9\uFF10-\uFF19])([^\u0030-\u0039\u00B2\u00B3\u00B9\u00BC-\u00BE\u0660-\u0669\u06F0-\u06F9\u07C0-\u07C9\u0966-\u096F\u09E6-\u09EF\u09F4-\u09F9\u0A66-\u0A6F\u0AE6-\u0AEF\u0B66-\u0B6F\u0B72-\u0B77\u0BE6-\u0BF2\u0C66-\u0C6F\u0C78-\u0C7E\u0CE6-\u0CEF\u0D66-\u0D75\u0E50-\u0E59\u0ED0-\u0ED9\u0F20-\u0F33\u1040-\u1049\u1090-\u1099\u1369-\u137C\u16EE-\u16F0\u17E0-\u17E9\u17F0-\u17F9\u1810-\u1819\u1946-\u194F\u19D0-\u19DA\u1A80-\u1A89\u1A90-\u1A99\u1B50-\u1B59\u1BB0-\u1BB9\u1C40-\u1C49\u1C50-\u1C59\u2070\u2074-\u2079\u2080-\u2089\u2150-\u2182\u2185-\u2189\u2460-\u249B\u24EA-\u24FF\u2776-\u2793\u2CFD\u3007\u3021-\u3029\u3038-\u303A\u3192-\u3195\u3220-\u3229\u3248-\u324F\u3251-\u325F\u3280-\u3289\u32B1-\u32BF\uA620-\uA629\uA6E6-\uA6EF\uA830-\uA835\uA8D0-\uA8D9\uA900-\uA909\uA9D0-\uA9D9\uAA50-\uAA59\uABF0-\uABF9\uFF10-\uFF19])/g},{}],13:[function(a,b,c){var d,e=Object.prototype.hasOwnProperty,f=Object.prototype.toString,g=function(a){"use strict";if(!a||"[object Object]"!==f.call(a)||a.nodeType||a.setInterval)return!1;var b=e.call(a,"constructor"),c=a.constructor&&a.constructor.prototype&&e.call(a.constructor.prototype,"isPrototypeOf");if(a.constructor&&!b&&!c)return!1;var g;for(g in a);return g===d||e.call(a,g)};b.exports=function h(){"use strict";var a,b,c,e,f,i,j=arguments[0],k=1,l=arguments.length,m=!1;for("boolean"==typeof j?(m=j,j=arguments[1]||{},k=2):("object"!=typeof j&&"function"!=typeof j||j==d)&&(j={});l>k;++k)if(null!=(a=arguments[k]))for(b in a)c=j[b],e=a[b],j!==e&&(m&&e&&(g(e)||(f=Array.isArray(e)))?(f?(f=!1,i=c&&Array.isArray(c)?c:[]):i=c&&g(c)?c:{},j[b]=h(m,i,e)):e!==d&&(j[b]=e));return j}},{}],14:[function(a,b,c){function d(a,b,c){var d=i(b);return d(a,j(function(b){function e(a){return a.forEach(function(a){n(a,i)}),c(null,i)}if(!m(b))return c(null,n(b));var g=f(b,a),i=o(b);return h(g,d,j(e,c))},c))}function e(a,b,c){return h(a,b,j(function(d){function e(a,b){return p.hasOwnProperty(a)?b(null,p[a]):t(a,b)}function l(a){return a.forEach(function(a){n(a,v)}),c(null,v)}var p={};d.forEach(function(b,c){var d,e=a[c];try{d=k(b)}catch(f){return}p[e]=d});var q=Object.keys(p),r=q[0];if(q.length>1&&(r=g(p),!r))throw new TypeError("Unable to determine entry file (Swagger resource listing)");var s=p[r];if(!m(s))return c(null,n(s));var t=i(b),u=f(s,r),v=o(s);return h(u,e,j(l,c))},c))}function f(a,b){return a.apis.map(function(a){return l(b,a.path)})}function g(a){var b=Object.keys(a).filter(function(b){return m(a[b])});if(b.length>1)throw new Error("Multiple resource listings found");return b[0]}function h(a,b,c){var d=0,e=a.length,f=[],g=!1;a.forEach(function(a,h){b(a,function(a,b){return g?void 0:a?(g=!0,c(a)):(d++,f[h]=b,d===e?c(null,f):void 0)})})}function i(a){return function(b,c){return a(b,function(a,b){if(a)return c(a);try{return c(null,k(b))}catch(d){return c(d)}})}}function j(a,b){return function(c,d){if(c)return b(c);try{return a(d)}catch(e){return b(e)}}}var k=a("./lib/parse"),l=a("./lib/utils/resolve"),m=a("./lib/utils/is-resource-listing"),n=a("./lib/api-declaration"),o=a("./lib/resource-listing");b.exports=d,b.exports.files=e},{"./lib/api-declaration":1,"./lib/parse":2,"./lib/resource-listing":3,"./lib/utils/is-resource-listing":4,"./lib/utils/resolve":5}]},{},[14])(14)}),window.CodeMirror=function(){"use strict";function a(c,d){if(!(this instanceof a))return new a(c,d);this.options=d=d||{};for(var e in ce)!d.hasOwnProperty(e)&&ce.hasOwnProperty(e)&&(d[e]=ce[e]);m(d);var f="string"==typeof d.value?0:d.value.first,g=this.display=b(c,f);g.wrapper.CodeMirror=this,j(this),d.autofocus&&!Kd&&na(this),this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:!1,focused:!1,suppressEdits:!1,pasteIncoming:!1,draggingText:!1,highlight:new Sc},h(this),d.lineWrapping&&(this.display.wrapper.className+=" CodeMirror-wrap");var i=d.value;"string"==typeof i&&(i=new qe(d.value,d.mode)),fa(this,jc)(this,i),xd&&setTimeout(_c(ma,this,!0),20),pa(this);var k;try{k=document.activeElement==g.input}catch(l){}k||d.autofocus&&!Kd?setTimeout(_c(Fa,this),20):Ga(this),fa(this,function(){for(var a in be)be.propertyIsEnumerable(a)&&be[a](this,d[a],de);for(var b=0;b<he.length;++b)he[b](this)})()}function b(a,b){var c={},d=c.input=cd("textarea",null,null,"position: absolute; padding: 0; width: 1px; height: 1em; outline: none; font-size: 4px;");return Ad?d.style.width="1000px":d.setAttribute("wrap","off"),Jd&&(d.style.border="1px solid black"),d.setAttribute("autocorrect","off"),d.setAttribute("autocapitalize","off"),d.setAttribute("spellcheck","false"),c.inputDiv=cd("div",[d],null,"overflow: hidden; position: relative; width: 3px; height: 0px;"),c.scrollbarH=cd("div",[cd("div",null,null,"height: 1px")],"CodeMirror-hscrollbar"),c.scrollbarV=cd("div",[cd("div",null,null,"width: 1px")],"CodeMirror-vscrollbar"),c.scrollbarFiller=cd("div",null,"CodeMirror-scrollbar-filler"),c.gutterFiller=cd("div",null,"CodeMirror-gutter-filler"),c.lineDiv=cd("div",null,"CodeMirror-code"),c.selectionDiv=cd("div",null,null,"position: relative; z-index: 1"),c.cursor=cd("div","","CodeMirror-cursor"),c.otherCursor=cd("div","","CodeMirror-cursor CodeMirror-secondarycursor"),c.measure=cd("div",null,"CodeMirror-measure"),c.lineSpace=cd("div",[c.measure,c.selectionDiv,c.lineDiv,c.cursor,c.otherCursor],null,"position: relative; outline: none"),c.mover=cd("div",[cd("div",[c.lineSpace],"CodeMirror-lines")],null,"position: relative"),c.sizer=cd("div",[c.mover],"CodeMirror-sizer"),c.heightForcer=cd("div",null,null,"position: absolute; height: "+ve+"px; width: 1px;"),c.gutters=cd("div",null,"CodeMirror-gutters"),c.lineGutter=null,c.scroller=cd("div",[c.sizer,c.heightForcer,c.gutters],"CodeMirror-scroll"),c.scroller.setAttribute("tabIndex","-1"),c.wrapper=cd("div",[c.inputDiv,c.scrollbarH,c.scrollbarV,c.scrollbarFiller,c.gutterFiller,c.scroller],"CodeMirror"),yd&&(c.gutters.style.zIndex=-1,c.scroller.style.paddingRight=0),a.appendChild?a.appendChild(c.wrapper):a(c.wrapper),Jd&&(d.style.width="0px"),Ad||(c.scroller.draggable=!0),Fd?(c.inputDiv.style.height="1px",c.inputDiv.style.position="absolute"):yd&&(c.scrollbarH.style.minWidth=c.scrollbarV.style.minWidth="18px"),c.viewOffset=c.lastSizeC=0,c.showingFrom=c.showingTo=b,c.lineNumWidth=c.lineNumInnerWidth=c.lineNumChars=null,c.prevInput="",c.alignWidgets=!1,c.pollingFast=!1,c.poll=new Sc,c.cachedCharWidth=c.cachedTextHeight=null,c.measureLineCache=[],c.measureLineCachePos=0,c.inaccurateSelection=!1,c.maxLine=null,c.maxLineLength=0,c.maxLineChanged=!1,c.wheelDX=c.wheelDY=c.wheelStartX=c.wheelStartY=null,c}function c(b){b.doc.mode=a.getMode(b.options,b.doc.modeOption),b.doc.iter(function(a){a.stateAfter&&(a.stateAfter=null),a.styles&&(a.styles=null)}),b.doc.frontier=b.doc.first,G(b,100),b.state.modeGen++,b.curOp&&ia(b)}function d(a){a.options.lineWrapping?(a.display.wrapper.className+=" CodeMirror-wrap",a.display.sizer.style.minWidth=""):(a.display.wrapper.className=a.display.wrapper.className.replace(" CodeMirror-wrap",""),l(a)),f(a),ia(a),T(a),setTimeout(function(){n(a)},100)}function e(a){var b=ba(a.display),c=a.options.lineWrapping,d=c&&Math.max(5,a.display.scroller.clientWidth/ca(a.display)-3);return function(e){return Nb(a.doc,e)?0:c?(Math.ceil(e.text.length/d)||1)*b:b}}function f(a){var b=a.doc,c=e(a);b.iter(function(a){var b=c(a);b!=a.height&&nc(a,b)})}function g(a){var b=ke[a.options.keyMap],c=b.style;a.display.wrapper.className=a.display.wrapper.className.replace(/\s*cm-keymap-\S+/g,"")+(c?" cm-keymap-"+c:""),a.state.disableInput=b.disableInput}function h(a){a.display.wrapper.className=a.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+a.options.theme.replace(/(^|\s)\s*/g," cm-s-"),T(a)}function i(a){j(a),ia(a),setTimeout(function(){p(a)},20)}function j(a){var b=a.display.gutters,c=a.options.gutters;dd(b);for(var d=0;d<c.length;++d){var e=c[d],f=b.appendChild(cd("div",null,"CodeMirror-gutter "+e));"CodeMirror-linenumbers"==e&&(a.display.lineGutter=f,f.style.width=(a.display.lineNumWidth||1)+"px")}b.style.display=d?"":"none"}function k(a,b){if(0==b.height)return 0;for(var c,d=b.text.length,e=b;c=Kb(e);){var f=c.find();e=kc(a,f.from.line),d+=f.from.ch-f.to.ch}for(e=b;c=Lb(e);){var f=c.find();d-=e.text.length-f.from.ch,e=kc(a,f.to.line),d+=e.text.length-f.to.ch}return d}function l(a){var b=a.display,c=a.doc;b.maxLine=kc(c,c.first),b.maxLineLength=k(c,b.maxLine),b.maxLineChanged=!0,c.iter(function(a){var d=k(c,a);d>b.maxLineLength&&(b.maxLineLength=d,b.maxLine=a)})}function m(a){for(var b=!1,c=0;c<a.gutters.length;++c)"CodeMirror-linenumbers"==a.gutters[c]&&(a.lineNumbers?b=!0:a.gutters.splice(c--,1));!b&&a.lineNumbers&&a.gutters.push("CodeMirror-linenumbers")}function n(a){var b=a.display,c=a.doc.height,d=c+L(b);b.sizer.style.minHeight=b.heightForcer.style.top=d+"px",b.gutters.style.height=Math.max(d,b.scroller.clientHeight-ve)+"px";var e=Math.max(d,b.scroller.scrollHeight),f=b.scroller.scrollWidth>b.scroller.clientWidth+1,g=e>b.scroller.clientHeight+1;g?(b.scrollbarV.style.display="block",b.scrollbarV.style.bottom=f?id(b.measure)+"px":"0",b.scrollbarV.firstChild.style.height=e-b.scroller.clientHeight+b.scrollbarV.clientHeight+"px"):b.scrollbarV.style.display="",f?(b.scrollbarH.style.display="block",b.scrollbarH.style.right=g?id(b.measure)+"px":"0",b.scrollbarH.firstChild.style.width=b.scroller.scrollWidth-b.scroller.clientWidth+b.scrollbarH.clientWidth+"px"):b.scrollbarH.style.display="",f&&g?(b.scrollbarFiller.style.display="block",b.scrollbarFiller.style.height=b.scrollbarFiller.style.width=id(b.measure)+"px"):b.scrollbarFiller.style.display="",f&&a.options.coverGutterNextToScrollbar&&a.options.fixedGutter?(b.gutterFiller.style.display="block",b.gutterFiller.style.height=id(b.measure)+"px",b.gutterFiller.style.width=b.gutters.offsetWidth+"px"):b.gutterFiller.style.display="",Gd&&0===id(b.measure)&&(b.scrollbarV.style.minWidth=b.scrollbarH.style.minHeight=Hd?"18px":"12px")}function o(a,b,c){var d=a.scroller.scrollTop,e=a.wrapper.clientHeight;"number"==typeof c?d=c:c&&(d=c.top,e=c.bottom-c.top),d=Math.floor(d-K(a));var f=Math.ceil(d+e);return{from:pc(b,d),to:pc(b,f)}}function p(a){var b=a.display;if(b.alignWidgets||b.gutters.firstChild&&a.options.fixedGutter){for(var c=s(b)-b.scroller.scrollLeft+a.doc.scrollLeft,d=b.gutters.offsetWidth,e=c+"px",f=b.lineDiv.firstChild;f;f=f.nextSibling)if(f.alignable)for(var g=0,h=f.alignable;g<h.length;++g)h[g].style.left=e;a.options.fixedGutter&&(b.gutters.style.left=c+d+"px")}}function q(a){if(!a.options.lineNumbers)return!1;var b=a.doc,c=r(a.options,b.first+b.size-1),d=a.display;if(c.length!=d.lineNumChars){var e=d.measure.appendChild(cd("div",[cd("div",c)],"CodeMirror-linenumber CodeMirror-gutter-elt")),f=e.firstChild.offsetWidth,g=e.offsetWidth-f;return d.lineGutter.style.width="",d.lineNumInnerWidth=Math.max(f,d.lineGutter.offsetWidth-g),d.lineNumWidth=d.lineNumInnerWidth+g,d.lineNumChars=d.lineNumInnerWidth?c.length:-1,d.lineGutter.style.width=d.lineNumWidth+"px",!0}return!1}function r(a,b){return String(a.lineNumberFormatter(b+a.firstLineNumber))}function s(a){return gd(a.scroller).left-gd(a.sizer).left}function t(a,b,c,d){for(var e,f=a.display.showingFrom,g=a.display.showingTo,h=o(a.display,a.doc,c);u(a,b,h,d)&&(d=!1,e=!0,C(a),n(a),c&&(c=Math.min(a.display.scroller.scrollHeight-a.display.scroller.clientHeight,"number"==typeof c?c:c.top)),h=o(a.display,a.doc,c),!(h.from>=a.display.showingFrom&&h.to<=a.display.showingTo));)b=[];return e&&(Nc(a,"update",a),(a.display.showingFrom!=f||a.display.showingTo!=g)&&Nc(a,"viewportChange",a,a.display.showingFrom,a.display.showingTo)),e}function u(a,b,c,d){var e=a.display,f=a.doc;if(!e.wrapper.clientWidth)return e.showingFrom=e.showingTo=f.first,void(e.viewOffset=0);if(!(!d&&0==b.length&&c.from>e.showingFrom&&c.to<e.showingTo)){q(a)&&(b=[{from:f.first,to:f.first+f.size}]);var g=e.sizer.style.marginLeft=e.gutters.offsetWidth+"px";e.scrollbarH.style.left=a.options.fixedGutter?g:"0";var h=1/0;if(a.options.lineNumbers)for(var i=0;i<b.length;++i)if(b[i].diff){h=b[i].from;break}var j=f.first+f.size,k=Math.max(c.from-a.options.viewportMargin,f.first),l=Math.min(j,c.to+a.options.viewportMargin);if(e.showingFrom<k&&k-e.showingFrom<20&&(k=Math.max(f.first,e.showingFrom)),e.showingTo>l&&e.showingTo-l<20&&(l=Math.min(j,e.showingTo)),Ud)for(k=oc(Mb(f,kc(f,k)));j>l&&Nb(f,kc(f,l));)++l;var m=[{from:Math.max(e.showingFrom,f.first),to:Math.min(e.showingTo,j)}];if(m=m[0].from>=m[0].to?[]:x(m,b),Ud)for(var i=0;i<m.length;++i)for(var n,o=m[i];n=Lb(kc(f,o.to-1));){var p=n.find().from.line;if(!(p>o.from)){m.splice(i--,1);break}o.to=p}for(var r=0,i=0;i<m.length;++i){var o=m[i];o.from<k&&(o.from=k),o.to>l&&(o.to=l),o.from>=o.to?m.splice(i--,1):r+=o.to-o.from}if(!d&&r==l-k&&k==e.showingFrom&&l==e.showingTo)return void w(a);m.sort(function(a,b){return a.from-b.from});try{var s=document.activeElement}catch(t){}.7*(l-k)>r&&(e.lineDiv.style.display="none"),z(a,k,l,m,h),e.lineDiv.style.display="",s&&document.activeElement!=s&&s.offsetHeight&&s.focus();var u=k!=e.showingFrom||l!=e.showingTo||e.lastSizeC!=e.wrapper.clientHeight;return u&&(e.lastSizeC=e.wrapper.clientHeight,G(a,400)),e.showingFrom=k,e.showingTo=l,v(a),w(a),!0}}function v(a){for(var b,c=a.display,d=c.lineDiv.offsetTop,e=c.lineDiv.firstChild;e;e=e.nextSibling)if(e.lineObj){if(yd){var f=e.offsetTop+e.offsetHeight;b=f-d,d=f}else{var g=gd(e);b=g.bottom-g.top}var h=e.lineObj.height-b;if(2>b&&(b=ba(c)),h>.001||-.001>h){nc(e.lineObj,b);var i=e.lineObj.widgets;if(i)for(var j=0;j<i.length;++j)i[j].height=i[j].node.offsetHeight}}}function w(a){var b=a.display.viewOffset=qc(a,kc(a.doc,a.display.showingFrom));a.display.mover.style.top=b+"px"}function x(a,b){for(var c=0,d=b.length||0;d>c;++c){for(var e=b[c],f=[],g=e.diff||0,h=0,i=a.length;i>h;++h){var j=a[h];e.to<=j.from&&e.diff?f.push({from:j.from+g,to:j.to+g}):e.to<=j.from||e.from>=j.to?f.push(j):(e.from>j.from&&f.push({from:j.from,to:e.from}),e.to<j.to&&f.push({from:e.to+g,to:j.to+g}))}a=f}return a}function y(a){for(var b=a.display,c={},d={},e=b.gutters.firstChild,f=0;e;e=e.nextSibling,++f)c[a.options.gutters[f]]=e.offsetLeft,d[a.options.gutters[f]]=e.offsetWidth;return{fixedPos:s(b),gutterTotalWidth:b.gutters.offsetWidth,gutterLeft:c,gutterWidth:d,wrapperWidth:b.wrapper.clientWidth}}function z(a,b,c,d,e){function f(b){var c=b.nextSibling;return Ad&&Ld&&a.display.currentWheelTarget==b?(b.style.display="none",b.lineObj=null):b.parentNode.removeChild(b),c}var g=y(a),h=a.display,i=a.options.lineNumbers;d.length||Ad&&a.display.currentWheelTarget||dd(h.lineDiv);var j=h.lineDiv,k=j.firstChild,l=d.shift(),m=b;for(a.doc.iter(b,c,function(b){if(l&&l.to==m&&(l=d.shift()),Nb(a.doc,b)){if(0!=b.height&&nc(b,0),b.widgets&&k.previousSibling)for(var c=0;c<b.widgets.length;++c){var h=b.widgets[c];if(h.showIfHidden){var n=k.previousSibling;if(/pre/i.test(n.nodeName)){var o=cd("div",null,null,"position: relative");n.parentNode.replaceChild(o,n),o.appendChild(n),n=o}var p=n.appendChild(cd("div",[h.node],"CodeMirror-linewidget"));h.handleMouseEvents||(p.ignoreEvents=!0),B(h,p,n,g)}}}else if(l&&l.from<=m&&l.to>m){for(;k.lineObj!=b;)k=f(k);i&&m>=e&&k.lineNumber&&fd(k.lineNumber,r(a.options,m)),k=k.nextSibling}else{if(b.widgets)for(var q,s=0,t=k;t&&20>s;++s,t=t.nextSibling)if(t.lineObj==b&&/div/i.test(t.nodeName)){q=t;break}var u=A(a,b,m,g,q);if(u!=q)j.insertBefore(u,k);else{for(;k!=q;)k=f(k);k=k.nextSibling}u.lineObj=b}++m});k;)k=f(k)}function A(a,b,c,d,e){var f,g=_b(a,b),h=b.gutterMarkers,i=a.display;if(!(a.options.lineNumbers||h||b.bgClass||b.wrapClass||b.widgets))return g;if(e){e.alignable=null;for(var j,k=!0,l=0,m=null,n=e.firstChild;n;n=j)if(j=n.nextSibling,/\bCodeMirror-linewidget\b/.test(n.className)){for(var o=0;o<b.widgets.length;++o){var p=b.widgets[o];if(p.node==n.firstChild){p.above||m||(m=n),B(p,n,e,d),++l;break}}if(o==b.widgets.length){k=!1;break}}else e.removeChild(n);e.insertBefore(g,m),k&&l==b.widgets.length&&(f=e,e.className=b.wrapClass||"")}if(f||(f=cd("div",null,b.wrapClass,"position: relative"),f.appendChild(g)),b.bgClass&&f.insertBefore(cd("div",null,b.bgClass+" CodeMirror-linebackground"),f.firstChild),a.options.lineNumbers||h){var q=f.insertBefore(cd("div",null,null,"position: absolute; left: "+(a.options.fixedGutter?d.fixedPos:-d.gutterTotalWidth)+"px"),f.firstChild);if(a.options.fixedGutter&&(f.alignable||(f.alignable=[])).push(q),!a.options.lineNumbers||h&&h["CodeMirror-linenumbers"]||(f.lineNumber=q.appendChild(cd("div",r(a.options,c),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+d.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+i.lineNumInnerWidth+"px"))),h)for(var s=0;s<a.options.gutters.length;++s){var t=a.options.gutters[s],u=h.hasOwnProperty(t)&&h[t];u&&q.appendChild(cd("div",[u],"CodeMirror-gutter-elt","left: "+d.gutterLeft[t]+"px; width: "+d.gutterWidth[t]+"px"))}}if(yd&&(f.style.zIndex=2),b.widgets&&f!=e)for(var o=0,v=b.widgets;o<v.length;++o){var p=v[o],w=cd("div",[p.node],"CodeMirror-linewidget");p.handleMouseEvents||(w.ignoreEvents=!0),B(p,w,f,d),p.above?f.insertBefore(w,a.options.lineNumbers&&0!=b.height?q:g):f.appendChild(w),Nc(p,"redraw")}return f}function B(a,b,c,d){if(a.noHScroll){(c.alignable||(c.alignable=[])).push(b);var e=d.wrapperWidth;b.style.left=d.fixedPos+"px",a.coverGutter||(e-=d.gutterTotalWidth,b.style.paddingLeft=d.gutterTotalWidth+"px"),b.style.width=e+"px"}a.coverGutter&&(b.style.zIndex=5,b.style.position="relative",a.noHScroll||(b.style.marginLeft=-d.gutterTotalWidth+"px"))}function C(a){var b=a.display,c=Ta(a.doc.sel.from,a.doc.sel.to);if(c||a.options.showCursorWhenSelecting?D(a):b.cursor.style.display=b.otherCursor.style.display="none",c?b.selectionDiv.style.display="none":E(a),a.options.moveInputWithCursor){var d=Z(a,a.doc.sel.head,"div"),e=gd(b.wrapper),f=gd(b.lineDiv);b.inputDiv.style.top=Math.max(0,Math.min(b.wrapper.clientHeight-10,d.top+f.top-e.top))+"px",b.inputDiv.style.left=Math.max(0,Math.min(b.wrapper.clientWidth-10,d.left+f.left-e.left))+"px"}}function D(a){var b=a.display,c=Z(a,a.doc.sel.head,"div");b.cursor.style.left=c.left+"px",b.cursor.style.top=c.top+"px",b.cursor.style.height=Math.max(0,c.bottom-c.top)*a.options.cursorHeight+"px",b.cursor.style.display="",c.other?(b.otherCursor.style.display="",b.otherCursor.style.left=c.other.left+"px",b.otherCursor.style.top=c.other.top+"px",b.otherCursor.style.height=.85*(c.other.bottom-c.other.top)+"px"):b.otherCursor.style.display="none"}function E(a){function b(a,b,c,d){0>b&&(b=0),g.appendChild(cd("div",null,"CodeMirror-selected","position: absolute; left: "+a+"px; top: "+b+"px; width: "+(null==c?h-a:c)+"px; height: "+(d-b)+"px"))}function c(c,d,f){function g(b,d){return Y(a,Sa(c,b),"div",l,d)}var j,k,l=kc(e,c),m=l.text.length;return kd(rc(l),d||0,null==f?m:f,function(a,c,e){var l,n,o,p=g(a,"left");if(a==c)l=p,n=o=p.left;else{if(l=g(c-1,"right"),"rtl"==e){var q=p;p=l,l=q}n=p.left,o=l.right}null==d&&0==a&&(n=i),l.top-p.top>3&&(b(n,p.top,null,p.bottom),n=i,p.bottom<l.top&&b(n,p.bottom,null,l.top)),null==f&&c==m&&(o=h),(!j||p.top<j.top||p.top==j.top&&p.left<j.left)&&(j=p),(!k||l.bottom>k.bottom||l.bottom==k.bottom&&l.right>k.right)&&(k=l),i+1>n&&(n=i),b(n,l.top,o-n,l.bottom)}),{start:j,end:k}}var d=a.display,e=a.doc,f=a.doc.sel,g=document.createDocumentFragment(),h=d.lineSpace.offsetWidth,i=M(a.display);if(f.from.line==f.to.line)c(f.from.line,f.from.ch,f.to.ch);else{var j=kc(e,f.from.line),k=kc(e,f.to.line),l=Mb(e,j)==Mb(e,k),m=c(f.from.line,f.from.ch,l?j.text.length:null).end,n=c(f.to.line,l?0:null,f.to.ch).start;l&&(m.top<n.top-2?(b(m.right,m.top,null,m.bottom),b(i,n.top,n.left,n.bottom)):b(m.right,m.top,n.left-m.right,m.bottom)),m.bottom<n.top&&b(i,m.bottom,null,n.top)}ed(d.selectionDiv,g),d.selectionDiv.style.display=""}function F(a){if(a.state.focused){var b=a.display;clearInterval(b.blinker);var c=!0;b.cursor.style.visibility=b.otherCursor.style.visibility="",b.blinker=setInterval(function(){b.cursor.style.visibility=b.otherCursor.style.visibility=(c=!c)?"":"hidden"},a.options.cursorBlinkRate)}}function G(a,b){a.doc.mode.startState&&a.doc.frontier<a.display.showingTo&&a.state.highlight.set(b,_c(H,a))}function H(a){var b=a.doc;if(b.frontier<b.first&&(b.frontier=b.first),!(b.frontier>=a.display.showingTo)){var c,d=+new Date+a.options.workTime,e=qb(b.mode,J(a,b.frontier)),f=[];b.iter(b.frontier,Math.min(b.first+b.size,a.display.showingTo+500),function(g){if(b.frontier>=a.display.showingFrom){var h=g.styles;g.styles=Xb(a,g,e);for(var i=!h||h.length!=g.styles.length,j=0;!i&&j<h.length;++j)i=h[j]!=g.styles[j];i&&(c&&c.end==b.frontier?c.end++:f.push(c={start:b.frontier,end:b.frontier+1})),g.stateAfter=qb(b.mode,e)}else Zb(a,g,e),g.stateAfter=b.frontier%5==0?qb(b.mode,e):null;return++b.frontier,+new Date>d?(G(a,a.options.workDelay),!0):void 0}),f.length&&fa(a,function(){for(var a=0;a<f.length;++a)ia(this,f[a].start,f[a].end)})()}}function I(a,b,c){for(var d,e,f=a.doc,g=b,h=b-100;g>h;--g){if(g<=f.first)return f.first;var i=kc(f,g-1);if(i.stateAfter&&(!c||g<=f.frontier))return g;var j=Tc(i.text,null,a.options.tabSize);(null==e||d>j)&&(e=g-1,d=j)}return e}function J(a,b,c){var d=a.doc,e=a.display;if(!d.mode.startState)return!0;var f=I(a,b,c),g=f>d.first&&kc(d,f-1).stateAfter;return g=g?qb(d.mode,g):rb(d.mode),d.iter(f,b,function(c){Zb(a,c,g);var h=f==b-1||f%5==0||f>=e.showingFrom&&f<e.showingTo;c.stateAfter=h?qb(d.mode,g):null,++f}),g}function K(a){return a.lineSpace.offsetTop}function L(a){return a.mover.offsetHeight-a.lineSpace.offsetHeight}function M(a){var b=ed(a.measure,cd("pre",null,null,"text-align: left")).appendChild(cd("span","x"));return b.offsetLeft}function N(a,b,c,d,e){var f=-1;d=d||Q(a,b);for(var g=c;;g+=f){var h=d[g];if(h)break;0>f&&0==g&&(f=1)}return e=g>c?"left":c>g?"right":e,"left"==e&&h.leftSide?h=h.leftSide:"right"==e&&h.rightSide&&(h=h.rightSide),{left:c>g?h.right:h.left,right:g>c?h.left:h.right,top:h.top,bottom:h.bottom}}function O(a,b){for(var c=a.display.measureLineCache,d=0;d<c.length;++d){var e=c[d];if(e.text==b.text&&e.markedSpans==b.markedSpans&&a.display.scroller.clientWidth==e.width&&e.classes==b.textClass+"|"+b.bgClass+"|"+b.wrapClass)return e}}function P(a,b){var c=O(a,b);c&&(c.text=c.measure=c.markedSpans=null)}function Q(a,b){var c=O(a,b);if(c)return c.measure;var d=R(a,b),e=a.display.measureLineCache,f={text:b.text,width:a.display.scroller.clientWidth,markedSpans:b.markedSpans,measure:d,classes:b.textClass+"|"+b.bgClass+"|"+b.wrapClass};return 16==e.length?e[++a.display.measureLineCachePos%16]=f:e.push(f),d}function R(a,b){function c(a){var b=a.top-o.top,c=a.bottom-o.top;c>r&&(c=r),0>b&&(b=0);for(var d=p.length-2;d>=0;d-=2){var e=p[d],f=p[d+1];if(!(e>c||b>f)&&(b>=e&&f>=c||e>=b&&c>=f||Math.min(c,f)-Math.max(b,e)>=c-b>>1)){p[d]=Math.min(b,e),p[d+1]=Math.max(c,f);break}}return 0>d&&(d=p.length,p.push(b,c)),{left:a.left-o.left,right:a.right-o.left,top:d,bottom:null}}function d(a){a.bottom=p[a.top+1],a.top=p[a.top]}var e=a.display,f=$c(b.text.length),g=_b(a,b,f,!0);if(xd&&!yd&&!a.options.lineWrapping&&g.childNodes.length>100){for(var h=document.createDocumentFragment(),i=10,j=g.childNodes.length,k=0,l=Math.ceil(j/i);l>k;++k){for(var m=cd("div",null,null,"display: inline-block"),n=0;i>n&&j;++n)m.appendChild(g.firstChild),--j;h.appendChild(m)}g.appendChild(h)}ed(e.measure,g);var o=gd(e.lineDiv),p=[],q=$c(b.text.length),r=g.offsetHeight;zd&&e.measure.first!=g&&ed(e.measure,g);for(var s,k=0;k<f.length;++k)if(s=f[k]){var t=s,u=null;if(/\bCodeMirror-widget\b/.test(s.className)&&s.getClientRects){1==s.firstChild.nodeType&&(t=s.firstChild);var v=t.getClientRects();v.length>1&&(u=q[k]=c(v[0]),u.rightSide=c(v[v.length-1]))}u||(u=q[k]=c(gd(t))),s.measureRight&&(u.right=gd(s.measureRight).left),s.leftSide&&(u.leftSide=c(gd(s.leftSide)))}for(var s,k=0;k<q.length;++k)(s=q[k])&&(d(s),s.leftSide&&d(s.leftSide),s.rightSide&&d(s.rightSide));return q}function S(a,b){var c=!1;if(b.markedSpans)for(var d=0;d<b.markedSpans;++d){var e=b.markedSpans[d];!e.collapsed||null!=e.to&&e.to!=b.text.length||(c=!0)}var f=!c&&O(a,b);if(f)return N(a,b,b.text.length,f.measure,"right").right;var g=_b(a,b,null,!0),h=g.appendChild(jd(a.display.measure));return ed(a.display.measure,g),gd(h).right-gd(a.display.lineDiv).left}function T(a){a.display.measureLineCache.length=a.display.measureLineCachePos=0,a.display.cachedCharWidth=a.display.cachedTextHeight=null,a.options.lineWrapping||(a.display.maxLineChanged=!0),a.display.lineNumChars=null}function U(){return window.pageXOffset||(document.documentElement||document.body).scrollLeft}function V(){return window.pageYOffset||(document.documentElement||document.body).scrollTop}function W(a,b,c,d){if(b.widgets)for(var e=0;e<b.widgets.length;++e)if(b.widgets[e].above){var f=Sb(b.widgets[e]);c.top+=f,c.bottom+=f}if("line"==d)return c;d||(d="local");var g=qc(a,b);if("local"==d?g+=K(a.display):g-=a.display.viewOffset,"page"==d||"window"==d){var h=gd(a.display.lineSpace);g+=h.top+("window"==d?0:V());var i=h.left+("window"==d?0:U());c.left+=i,c.right+=i}return c.top+=g,c.bottom+=g,c}function X(a,b,c){if("div"==c)return b;var d=b.left,e=b.top;if("page"==c)d-=U(),e-=V();else if("local"==c||!c){var f=gd(a.display.sizer);d+=f.left,e+=f.top}var g=gd(a.display.lineSpace);return{left:d-g.left,top:e-g.top}}function Y(a,b,c,d,e){return d||(d=kc(a.doc,b.line)),W(a,d,N(a,d,b.ch,null,e),c)}function Z(a,b,c,d,e){function f(b,f){var g=N(a,d,b,e,f?"right":"left");return f?g.left=g.right:g.right=g.left,W(a,d,g,c)}function g(a,b){var c=h[b],d=c.level%2;return a==ld(c)&&b&&c.level<h[b-1].level?(c=h[--b],a=md(c)-(c.level%2?0:1),d=!0):a==md(c)&&b<h.length-1&&c.level<h[b+1].level&&(c=h[++b],a=ld(c)-c.level%2,d=!1),d&&a==c.to&&a>c.from?f(a-1):f(a,d)}d=d||kc(a.doc,b.line),e||(e=Q(a,d));var h=rc(d),i=b.ch;if(!h)return f(i);var j=sd(h,i),k=g(i,j);return null!=He&&(k.other=g(i,He)),k}function $(a,b,c,d){var e=new Sa(a,b);return e.xRel=d,c&&(e.outside=!0),e}function _(a,b,c){var d=a.doc;if(c+=a.display.viewOffset,0>c)return $(d.first,0,!0,-1);var e=pc(d,c),f=d.first+d.size-1;if(e>f)return $(d.first+d.size-1,kc(d,f).text.length,!0,1);for(0>b&&(b=0);;){var g=kc(d,e),h=aa(a,g,e,b,c),i=Lb(g),j=i&&i.find();if(!i||!(h.ch>j.from.ch||h.ch==j.from.ch&&h.xRel>0))return h;e=j.to.line}}function aa(a,b,c,d,e){function f(d){var e=Z(a,Sa(c,d),"line",b,j);return h=!0,g>e.bottom?e.left-i:g<e.top?e.left+i:(h=!1,e.left)}var g=e-qc(a,b),h=!1,i=2*a.display.wrapper.clientWidth,j=Q(a,b),k=rc(b),l=b.text.length,m=nd(b),n=od(b),o=f(m),p=h,q=f(n),r=h;if(d>q)return $(c,n,r,1);for(;;){if(k?n==m||n==ud(b,m,1):1>=n-m){for(var s=o>d||q-d>=d-o?m:n,t=d-(s==m?o:q);ze.test(b.text.charAt(s));)++s;var u=$(c,s,s==m?p:r,0>t?-1:t?1:0);return u}var v=Math.ceil(l/2),w=m+v;if(k){w=m;for(var x=0;v>x;++x)w=ud(b,w,1)}var y=f(w);y>d?(n=w,q=y,(r=h)&&(q+=1e3),l=v):(m=w,o=y,p=h,l-=v)}}function ba(a){if(null!=a.cachedTextHeight)return a.cachedTextHeight;if(null==Od){Od=cd("pre");for(var b=0;49>b;++b)Od.appendChild(document.createTextNode("x")),Od.appendChild(cd("br"));Od.appendChild(document.createTextNode("x"))}ed(a.measure,Od);var c=Od.offsetHeight/50;return c>3&&(a.cachedTextHeight=c),dd(a.measure),c||1}function ca(a){if(null!=a.cachedCharWidth)return a.cachedCharWidth;var b=cd("span","x"),c=cd("pre",[b]);ed(a.measure,c);var d=b.offsetWidth;return d>2&&(a.cachedCharWidth=d),d||10}function da(a){a.curOp={changes:[],forceUpdate:!1,updateInput:null,userSelChange:null,textChanged:null,selectionChanged:!1,cursorActivity:!1,updateMaxLine:!1,updateScrollPos:!1,id:++Vd},ue++||(te=[])}function ea(a){var b=a.curOp,c=a.doc,d=a.display;if(a.curOp=null,b.updateMaxLine&&l(a),d.maxLineChanged&&!a.options.lineWrapping&&d.maxLine){var e=S(a,d.maxLine);d.sizer.style.minWidth=Math.max(0,e+3+ve)+"px",d.maxLineChanged=!1;var f=Math.max(0,d.sizer.offsetLeft+d.sizer.offsetWidth-d.scroller.clientWidth);f<c.scrollLeft&&!b.updateScrollPos&&xa(a,Math.min(d.scroller.scrollLeft,f),!0)}var g,h;if(b.updateScrollPos)g=b.updateScrollPos;else if(b.selectionChanged&&d.scroller.clientHeight){var i=Z(a,c.sel.head);g=gb(a,i.left,i.top,i.left,i.bottom)}(b.changes.length||b.forceUpdate||g&&null!=g.scrollTop)&&(h=t(a,b.changes,g&&g.scrollTop,b.forceUpdate),a.display.scroller.offsetHeight&&(a.doc.scrollTop=a.display.scroller.scrollTop)),!h&&b.selectionChanged&&C(a),b.updateScrollPos?(d.scroller.scrollTop=d.scrollbarV.scrollTop=c.scrollTop=g.scrollTop,d.scroller.scrollLeft=d.scrollbarH.scrollLeft=c.scrollLeft=g.scrollLeft,p(a),b.scrollToPos&&eb(a,Xa(a.doc,b.scrollToPos),b.scrollToPosMargin)):g&&db(a),b.selectionChanged&&F(a),a.state.focused&&b.updateInput&&ma(a,b.userSelChange);var j=b.maybeHiddenMarkers,k=b.maybeUnhiddenMarkers;if(j)for(var m=0;m<j.length;++m)j[m].lines.length||Mc(j[m],"hide");if(k)for(var m=0;m<k.length;++m)k[m].lines.length&&Mc(k[m],"unhide");var n;if(--ue||(n=te,te=null),b.textChanged&&Mc(a,"change",a,b.textChanged),b.cursorActivity&&Mc(a,"cursorActivity",a),n)for(var m=0;m<n.length;++m)n[m]()}function fa(a,b){return function(){var c=a||this,d=!c.curOp;d&&da(c);try{var e=b.apply(c,arguments)}finally{d&&ea(c)}return e}}function ga(a){return function(){var b,c=this.cm&&!this.cm.curOp;c&&da(this.cm);try{b=a.apply(this,arguments)}finally{c&&ea(this.cm)}return b}}function ha(a,b){var c,d=!a.curOp;d&&da(a);try{c=b()}finally{d&&ea(a)}return c}function ia(a,b,c,d){null==b&&(b=a.doc.first),null==c&&(c=a.doc.first+a.doc.size),a.curOp.changes.push({from:b,to:c,diff:d})}function ja(a){a.display.pollingFast||a.display.poll.set(a.options.pollInterval,function(){la(a),a.state.focused&&ja(a)})}function ka(a){function b(){var d=la(a);d||c?(a.display.pollingFast=!1,ja(a)):(c=!0,a.display.poll.set(60,b))}var c=!1;a.display.pollingFast=!0,a.display.poll.set(20,b)}function la(a){var b=a.display.input,c=a.display.prevInput,d=a.doc,e=d.sel;if(!a.state.focused||Ee(b)||oa(a)||a.state.disableInput)return!1;var f=b.value;if(f==c&&Ta(e.from,e.to))return!1;if(xd&&!zd&&a.display.inputHasSelection===f)return ma(a,!0),!1;var g=!a.curOp;g&&da(a),e.shift=!1;for(var h=0,i=Math.min(c.length,f.length);i>h&&c.charCodeAt(h)==f.charCodeAt(h);)++h;var j=e.from,k=e.to;h<c.length?j=Sa(j.line,j.ch-(c.length-h)):a.state.overwrite&&Ta(j,k)&&!a.state.pasteIncoming&&(k=Sa(k.line,Math.min(kc(d,k.line).text.length,k.ch+(f.length-h))));var l=a.curOp.updateInput,m={from:j,to:k,text:De(f.slice(h)),origin:a.state.pasteIncoming?"paste":"+input"};return La(a.doc,m,"end"),a.curOp.updateInput=l,Nc(a,"inputRead",a,m),f.length>1e3||f.indexOf("\n")>-1?b.value=a.display.prevInput="":a.display.prevInput=f,g&&ea(a),a.state.pasteIncoming=!1,!0}function ma(a,b){var c,d,e=a.doc;if(Ta(e.sel.from,e.sel.to))b&&(a.display.prevInput=a.display.input.value="",xd&&!zd&&(a.display.inputHasSelection=null));else{a.display.prevInput="",c=Fe&&(e.sel.to.line-e.sel.from.line>100||(d=a.getSelection()).length>1e3);var f=c?"-":d||a.getSelection();a.display.input.value=f,a.state.focused&&Wc(a.display.input),xd&&!zd&&(a.display.inputHasSelection=f)}a.display.inaccurateSelection=c}function na(a){"nocursor"==a.options.readOnly||Kd&&document.activeElement==a.display.input||a.display.input.focus()}function oa(a){return a.options.readOnly||a.doc.cantEdit}function pa(a){function b(){a.state.focused&&setTimeout(_c(na,a),0)}function c(){null==h&&(h=setTimeout(function(){h=null,g.cachedCharWidth=g.cachedTextHeight=Be=null,
T(a),ha(a,_c(ia,a))},100))}function d(){for(var a=g.wrapper.parentNode;a&&a!=document.body;a=a.parentNode);a?setTimeout(d,5e3):Lc(window,"resize",c)}function e(b){Oc(a,b)||a.options.onDragEvent&&a.options.onDragEvent(a,Dc(b))||Hc(b)}function f(){g.inaccurateSelection&&(g.prevInput="",g.inaccurateSelection=!1,g.input.value=a.getSelection(),Wc(g.input))}var g=a.display;Kc(g.scroller,"mousedown",fa(a,sa)),xd?Kc(g.scroller,"dblclick",fa(a,function(b){if(!Oc(a,b)){var c=ra(a,b);if(c&&!ta(a,b)&&!qa(a.display,b)){Ec(b);var d=nb(kc(a.doc,c.line).text,c);$a(a.doc,d.from,d.to)}}})):Kc(g.scroller,"dblclick",function(b){Oc(a,b)||Ec(b)}),Kc(g.lineSpace,"selectstart",function(a){qa(g,a)||Ec(a)}),Sd||Kc(g.scroller,"contextmenu",function(b){Ha(a,b)}),Kc(g.scroller,"scroll",function(){g.scroller.clientHeight&&(wa(a,g.scroller.scrollTop),xa(a,g.scroller.scrollLeft,!0),Mc(a,"scroll",a))}),Kc(g.scrollbarV,"scroll",function(){g.scroller.clientHeight&&wa(a,g.scrollbarV.scrollTop)}),Kc(g.scrollbarH,"scroll",function(){g.scroller.clientHeight&&xa(a,g.scrollbarH.scrollLeft)}),Kc(g.scroller,"mousewheel",function(b){ya(a,b)}),Kc(g.scroller,"DOMMouseScroll",function(b){ya(a,b)}),Kc(g.scrollbarH,"mousedown",b),Kc(g.scrollbarV,"mousedown",b),Kc(g.wrapper,"scroll",function(){g.wrapper.scrollTop=g.wrapper.scrollLeft=0});var h;Kc(window,"resize",c),setTimeout(d,5e3),Kc(g.input,"keyup",fa(a,function(b){Oc(a,b)||a.options.onKeyEvent&&a.options.onKeyEvent(a,Dc(b))||16==b.keyCode&&(a.doc.sel.shift=!1)})),Kc(g.input,"input",_c(ka,a)),Kc(g.input,"keydown",fa(a,Da)),Kc(g.input,"keypress",fa(a,Ea)),Kc(g.input,"focus",_c(Fa,a)),Kc(g.input,"blur",_c(Ga,a)),a.options.dragDrop&&(Kc(g.scroller,"dragstart",function(b){va(a,b)}),Kc(g.scroller,"dragenter",e),Kc(g.scroller,"dragover",e),Kc(g.scroller,"drop",fa(a,ua))),Kc(g.scroller,"paste",function(b){qa(g,b)||(na(a),ka(a))}),Kc(g.input,"paste",function(){a.state.pasteIncoming=!0,ka(a)}),Kc(g.input,"cut",f),Kc(g.input,"copy",f),Fd&&Kc(g.sizer,"mouseup",function(){document.activeElement==g.input&&g.input.blur(),na(a)})}function qa(a,b){for(var c=Ic(b);c!=a.wrapper;c=c.parentNode)if(!c||c.ignoreEvents||c.parentNode==a.sizer&&c!=a.mover)return!0}function ra(a,b,c){var d=a.display;if(!c){var e=Ic(b);if(e==d.scrollbarH||e==d.scrollbarH.firstChild||e==d.scrollbarV||e==d.scrollbarV.firstChild||e==d.scrollbarFiller||e==d.gutterFiller)return null}var f,g,h=gd(d.lineSpace);try{f=b.clientX,g=b.clientY}catch(b){return null}return _(a,f-h.left,g-h.top)}function sa(a){function b(a){if(!Ta(r,a)){if(r=a,"single"==k)return void $a(e.doc,Xa(g,i),a);if(p=Xa(g,p),q=Xa(g,q),"double"==k){var b=nb(kc(g,a.line).text,a);Ua(a,p)?$a(e.doc,b.from,q):$a(e.doc,p,b.to)}else"triple"==k&&(Ua(a,p)?$a(e.doc,q,Xa(g,Sa(a.line,0))):$a(e.doc,p,Xa(g,Sa(a.line+1,0))))}}function c(a){var d=++t,h=ra(e,a,!0);if(h)if(Ta(h,m)){var i=a.clientY<s.top?-20:a.clientY>s.bottom?20:0;i&&setTimeout(fa(e,function(){t==d&&(f.scroller.scrollTop+=i,c(a))}),50)}else{e.state.focused||Fa(e),m=h,b(h);var j=o(f,g);(h.line>=j.to||h.line<j.from)&&setTimeout(fa(e,function(){t==d&&c(a)}),150)}}function d(a){t=1/0,Ec(a),na(e),Lc(document,"mousemove",u),Lc(document,"mouseup",v)}if(!Oc(this,a)){var e=this,f=e.display,g=e.doc,h=g.sel;if(h.shift=a.shiftKey,qa(f,a))return void(Ad||(f.scroller.draggable=!1,setTimeout(function(){f.scroller.draggable=!0},100)));if(!ta(e,a)){var i=ra(e,a);switch(Jc(a)){case 3:return void(Sd&&Ha.call(e,e,a));case 2:return i&&$a(e.doc,i),setTimeout(_c(na,e),20),void Ec(a)}if(!i)return void(Ic(a)==f.scroller&&Ec(a));e.state.focused||Fa(e);var j=+new Date,k="single";if(Qd&&Qd.time>j-400&&Ta(Qd.pos,i))k="triple",Ec(a),setTimeout(_c(na,e),20),ob(e,i.line);else if(Pd&&Pd.time>j-400&&Ta(Pd.pos,i)){k="double",Qd={time:j,pos:i},Ec(a);var l=nb(kc(g,i.line).text,i);$a(e.doc,l.from,l.to)}else Pd={time:j,pos:i};var m=i;if(e.options.dragDrop&&Ae&&!oa(e)&&!Ta(h.from,h.to)&&!Ua(i,h.from)&&!Ua(h.to,i)&&"single"==k){var n=fa(e,function(b){Ad&&(f.scroller.draggable=!1),e.state.draggingText=!1,Lc(document,"mouseup",n),Lc(f.scroller,"drop",n),Math.abs(a.clientX-b.clientX)+Math.abs(a.clientY-b.clientY)<10&&(Ec(b),$a(e.doc,i),na(e))});return Ad&&(f.scroller.draggable=!0),e.state.draggingText=n,f.scroller.dragDrop&&f.scroller.dragDrop(),Kc(document,"mouseup",n),void Kc(f.scroller,"drop",n)}Ec(a),"single"==k&&$a(e.doc,Xa(g,i));var p=h.from,q=h.to,r=i,s=gd(f.wrapper),t=0,u=fa(e,function(a){xd||Jc(a)?c(a):d(a)}),v=fa(e,d);Kc(document,"mousemove",u),Kc(document,"mouseup",v)}}}function ta(a,b){var c=a.display;try{var d=b.clientX,e=b.clientY}catch(b){return!1}if(d>=Math.floor(gd(c.gutters).right))return!1;if(Ec(b),!Qc(a,"gutterClick"))return!0;var f=gd(c.lineDiv);if(e>f.bottom)return!0;e-=f.top-c.viewOffset;for(var g=0;g<a.options.gutters.length;++g){var h=c.gutters.childNodes[g];if(h&&gd(h).right>=d){var i=pc(a.doc,e),j=a.options.gutters[g];Nc(a,"gutterClick",a,i,j,b);break}}return!0}function ua(a){var b=this;if(!(Oc(b,a)||qa(b.display,a)||b.options.onDragEvent&&b.options.onDragEvent(b,Dc(a)))){Ec(a),xd&&(Wd=+new Date);var c=ra(b,a,!0),d=a.dataTransfer.files;if(c&&!oa(b))if(d&&d.length&&window.FileReader&&window.File)for(var e=d.length,f=Array(e),g=0,h=function(a,d){var h=new FileReader;h.onload=function(){f[d]=h.result,++g==e&&(c=Xa(b.doc,c),La(b.doc,{from:c,to:c,text:De(f.join("\n")),origin:"paste"},"around"))},h.readAsText(a)},i=0;e>i;++i)h(d[i],i);else{if(b.state.draggingText&&!Ua(c,b.doc.sel.from)&&!Ua(b.doc.sel.to,c))return b.state.draggingText(a),void setTimeout(_c(na,b),20);try{var f=a.dataTransfer.getData("Text");if(f){var j=b.doc.sel.from,k=b.doc.sel.to;ab(b.doc,c,c),b.state.draggingText&&Ra(b.doc,"",j,k,"paste"),b.replaceSelection(f,null,"paste"),na(b),Fa(b)}}catch(a){}}}}function va(a,b){if(xd&&(!a.state.draggingText||+new Date-Wd<100))return void Hc(b);if(!Oc(a,b)&&!qa(a.display,b)){var c=a.getSelection();if(b.dataTransfer.setData("Text",c),b.dataTransfer.setDragImage&&!Ed){var d=cd("img",null,null,"position: fixed; left: 0; top: 0;");Dd&&(d.width=d.height=1,a.display.wrapper.appendChild(d),d._top=d.offsetTop),b.dataTransfer.setDragImage(d,0,0),Dd&&d.parentNode.removeChild(d)}}}function wa(a,b){Math.abs(a.doc.scrollTop-b)<2||(a.doc.scrollTop=b,wd||t(a,[],b),a.display.scroller.scrollTop!=b&&(a.display.scroller.scrollTop=b),a.display.scrollbarV.scrollTop!=b&&(a.display.scrollbarV.scrollTop=b),wd&&t(a,[]),G(a,100))}function xa(a,b,c){(c?b==a.doc.scrollLeft:Math.abs(a.doc.scrollLeft-b)<2)||(b=Math.min(b,a.display.scroller.scrollWidth-a.display.scroller.clientWidth),a.doc.scrollLeft=b,p(a),a.display.scroller.scrollLeft!=b&&(a.display.scroller.scrollLeft=b),a.display.scrollbarH.scrollLeft!=b&&(a.display.scrollbarH.scrollLeft=b))}function ya(a,b){var c=b.wheelDeltaX,d=b.wheelDeltaY;null==c&&b.detail&&b.axis==b.HORIZONTAL_AXIS&&(c=b.detail),null==d&&b.detail&&b.axis==b.VERTICAL_AXIS?d=b.detail:null==d&&(d=b.wheelDelta);var e=a.display,f=e.scroller;if(c&&f.scrollWidth>f.clientWidth||d&&f.scrollHeight>f.clientHeight){if(d&&Ld&&Ad)for(var g=b.target;g!=f;g=g.parentNode)if(g.lineObj){a.display.currentWheelTarget=g;break}if(c&&!wd&&!Dd&&null!=Yd)return d&&wa(a,Math.max(0,Math.min(f.scrollTop+d*Yd,f.scrollHeight-f.clientHeight))),xa(a,Math.max(0,Math.min(f.scrollLeft+c*Yd,f.scrollWidth-f.clientWidth))),Ec(b),void(e.wheelStartX=null);if(d&&null!=Yd){var h=d*Yd,i=a.doc.scrollTop,j=i+e.wrapper.clientHeight;0>h?i=Math.max(0,i+h-50):j=Math.min(a.doc.height,j+h+50),t(a,[],{top:i,bottom:j})}20>Xd&&(null==e.wheelStartX?(e.wheelStartX=f.scrollLeft,e.wheelStartY=f.scrollTop,e.wheelDX=c,e.wheelDY=d,setTimeout(function(){if(null!=e.wheelStartX){var a=f.scrollLeft-e.wheelStartX,b=f.scrollTop-e.wheelStartY,c=b&&e.wheelDY&&b/e.wheelDY||a&&e.wheelDX&&a/e.wheelDX;e.wheelStartX=e.wheelStartY=null,c&&(Yd=(Yd*Xd+c)/(Xd+1),++Xd)}},200)):(e.wheelDX+=c,e.wheelDY+=d))}}function za(a,b,c){if("string"==typeof b&&(b=je[b],!b))return!1;a.display.pollingFast&&la(a)&&(a.display.pollingFast=!1);var d=a.doc,e=d.sel.shift,f=!1;try{oa(a)&&(a.state.suppressEdits=!0),c&&(d.sel.shift=!1),f=b(a)!=we}finally{d.sel.shift=e,a.state.suppressEdits=!1}return f}function Aa(a){var b=a.state.keyMaps.slice(0);return a.options.extraKeys&&b.push(a.options.extraKeys),b.push(a.options.keyMap),b}function Ba(a,b){var c=sb(a.options.keyMap),d=c.auto;clearTimeout(Zd),d&&!ub(b)&&(Zd=setTimeout(function(){sb(a.options.keyMap)==c&&(a.options.keyMap=d.call?d.call(null,a):d,g(a))},50));var e=vb(b,!0),f=!1;if(!e)return!1;var h=Aa(a);return f=b.shiftKey?tb("Shift-"+e,h,function(b){return za(a,b,!0)})||tb(e,h,function(b){return("string"==typeof b?/^go[A-Z]/.test(b):b.motion)?za(a,b):void 0}):tb(e,h,function(b){return za(a,b)}),f&&(Ec(b),F(a),zd&&(b.oldKeyCode=b.keyCode,b.keyCode=0),Nc(a,"keyHandled",a,e,b)),f}function Ca(a,b,c){var d=tb("'"+c+"'",Aa(a),function(b){return za(a,b,!0)});return d&&(Ec(b),F(a),Nc(a,"keyHandled",a,"'"+c+"'",b)),d}function Da(a){var b=this;if(b.state.focused||Fa(b),xd&&27==a.keyCode&&(a.returnValue=!1),!(Oc(b,a)||b.options.onKeyEvent&&b.options.onKeyEvent(b,Dc(a)))){var c=a.keyCode;b.doc.sel.shift=16==c||a.shiftKey;var d=Ba(b,a);Dd&&(_d=d?c:null,!d&&88==c&&!Fe&&(Ld?a.metaKey:a.ctrlKey)&&b.replaceSelection(""))}}function Ea(a){var b=this;if(!(Oc(b,a)||b.options.onKeyEvent&&b.options.onKeyEvent(b,Dc(a)))){var c=a.keyCode,d=a.charCode;if(Dd&&c==_d)return _d=null,void Ec(a);if(!(Dd&&(!a.which||a.which<10)||Fd)||!Ba(b,a)){var e=String.fromCharCode(null==d?c:d);this.options.electricChars&&this.doc.mode.electricChars&&this.options.smartIndent&&!oa(this)&&this.doc.mode.electricChars.indexOf(e)>-1&&setTimeout(fa(b,function(){jb(b,b.doc.sel.to.line,"smart")}),75),Ca(b,a,e)||(xd&&!zd&&(b.display.inputHasSelection=null),ka(b))}}}function Fa(a){"nocursor"!=a.options.readOnly&&(a.state.focused||(Mc(a,"focus",a),a.state.focused=!0,-1==a.display.wrapper.className.search(/\bCodeMirror-focused\b/)&&(a.display.wrapper.className+=" CodeMirror-focused"),ma(a,!0)),ja(a),F(a))}function Ga(a){a.state.focused&&(Mc(a,"blur",a),a.state.focused=!1,a.display.wrapper.className=a.display.wrapper.className.replace(" CodeMirror-focused","")),clearInterval(a.display.blinker),setTimeout(function(){a.state.focused||(a.doc.sel.shift=!1)},150)}function Ha(a,b){function c(){if(null!=e.input.selectionStart){var a=e.input.value=" "+(Ta(f.from,f.to)?"":e.input.value);e.prevInput=" ",e.input.selectionStart=1,e.input.selectionEnd=a.length}}function d(){if(e.inputDiv.style.position="relative",e.input.style.cssText=i,zd&&(e.scrollbarV.scrollTop=e.scroller.scrollTop=h),ja(a),null!=e.input.selectionStart){(!xd||zd)&&c(),clearTimeout($d);var b=0,d=function(){" "==e.prevInput&&0==e.input.selectionStart?fa(a,je.selectAll)(a):b++<10?$d=setTimeout(d,500):ma(a)};$d=setTimeout(d,200)}}if(!Oc(a,b,"contextmenu")){var e=a.display,f=a.doc.sel;if(!qa(e,b)){var g=ra(a,b),h=e.scroller.scrollTop;if(g&&!Dd){(Ta(f.from,f.to)||Ua(g,f.from)||!Ua(g,f.to))&&fa(a,ab)(a.doc,g,g);var i=e.input.style.cssText;if(e.inputDiv.style.position="absolute",e.input.style.cssText="position: fixed; width: 30px; height: 30px; top: "+(b.clientY-5)+"px; left: "+(b.clientX-5)+"px; z-index: 1000; background: white; outline: none;border-width: 0; outline: none; overflow: hidden; opacity: .05; -ms-opacity: .05; filter: alpha(opacity=5);",na(a),ma(a,!0),Ta(f.from,f.to)&&(e.input.value=e.prevInput=" "),xd&&!zd&&c(),Sd){Hc(b);var j=function(){Lc(window,"mouseup",j),setTimeout(d,20)};Kc(window,"mouseup",j)}else setTimeout(d,50)}}}}function Ia(a,b,c){if(!Ua(b.from,c))return Xa(a,c);var d=b.text.length-1-(b.to.line-b.from.line);if(c.line>b.to.line+d){var e=c.line-d,f=a.first+a.size-1;return e>f?Sa(f,kc(a,f).text.length):Ya(c,kc(a,e).text.length)}if(c.line==b.to.line+d)return Ya(c,Vc(b.text).length+(1==b.text.length?b.from.ch:0)+kc(a,b.to.line).text.length-b.to.ch);var g=c.line-b.from.line;return Ya(c,b.text[g].length+(g?0:b.from.ch))}function Ja(a,b,c){if(c&&"object"==typeof c)return{anchor:Ia(a,b,c.anchor),head:Ia(a,b,c.head)};if("start"==c)return{anchor:b.from,head:b.from};var d=ae(b);if("around"==c)return{anchor:b.from,head:d};if("end"==c)return{anchor:d,head:d};var e=function(a){if(Ua(a,b.from))return a;if(!Ua(b.to,a))return d;var c=a.line+b.text.length-(b.to.line-b.from.line)-1,e=a.ch;return a.line==b.to.line&&(e+=d.ch-b.to.ch),Sa(c,e)};return{anchor:e(a.sel.anchor),head:e(a.sel.head)}}function Ka(a,b,c){var d={canceled:!1,from:b.from,to:b.to,text:b.text,origin:b.origin,cancel:function(){this.canceled=!0}};return c&&(d.update=function(b,c,d,e){b&&(this.from=Xa(a,b)),c&&(this.to=Xa(a,c)),d&&(this.text=d),void 0!==e&&(this.origin=e)}),Mc(a,"beforeChange",a,d),a.cm&&Mc(a.cm,"beforeChange",a.cm,d),d.canceled?null:{from:d.from,to:d.to,text:d.text,origin:d.origin}}function La(a,b,c,d){if(a.cm){if(!a.cm.curOp)return fa(a.cm,La)(a,b,c,d);if(a.cm.state.suppressEdits)return}if(!(Qc(a,"beforeChange")||a.cm&&Qc(a.cm,"beforeChange"))||(b=Ka(a,b,!0))){var e=Td&&!d&&Ib(a,b.from,b.to);if(e){for(var f=e.length-1;f>=1;--f)Ma(a,{from:e[f].from,to:e[f].to,text:[""]});e.length&&Ma(a,{from:e[0].from,to:e[0].to,text:b.text},c)}else Ma(a,b,c)}}function Ma(a,b,c){var d=Ja(a,b,c);vc(a,b,d,a.cm?a.cm.curOp.id:NaN),Pa(a,b,d,Gb(a,b));var e=[];ic(a,function(a,c){c||-1!=Xc(e,a.history)||(Bc(a.history,b),e.push(a.history)),Pa(a,b,null,Gb(a,b))})}function Na(a,b){if(!a.cm||!a.cm.state.suppressEdits){var c=a.history,d=("undo"==b?c.done:c.undone).pop();if(d){var e={changes:[],anchorBefore:d.anchorAfter,headBefore:d.headAfter,anchorAfter:d.anchorBefore,headAfter:d.headBefore,generation:c.generation};("undo"==b?c.undone:c.done).push(e),c.generation=d.generation||++c.maxGeneration;for(var f=Qc(a,"beforeChange")||a.cm&&Qc(a.cm,"beforeChange"),g=d.changes.length-1;g>=0;--g){var h=d.changes[g];if(h.origin=b,f&&!Ka(a,h,!1))return void(("undo"==b?c.done:c.undone).length=0);e.changes.push(uc(a,h));var i=g?Ja(a,h,null):{anchor:d.anchorBefore,head:d.headBefore};Pa(a,h,i,Hb(a,h));var j=[];ic(a,function(a,b){b||-1!=Xc(j,a.history)||(Bc(a.history,h),j.push(a.history)),Pa(a,h,null,Hb(a,h))})}}}}function Oa(a,b){function c(a){return Sa(a.line+b,a.ch)}a.first+=b,a.cm&&ia(a.cm,a.first,a.first,b),a.sel.head=c(a.sel.head),a.sel.anchor=c(a.sel.anchor),a.sel.from=c(a.sel.from),a.sel.to=c(a.sel.to)}function Pa(a,b,c,d){if(a.cm&&!a.cm.curOp)return fa(a.cm,Pa)(a,b,c,d);if(b.to.line<a.first)return void Oa(a,b.text.length-1-(b.to.line-b.from.line));if(!(b.from.line>a.lastLine())){if(b.from.line<a.first){var e=b.text.length-1-(a.first-b.from.line);Oa(a,e),b={from:Sa(a.first,0),to:Sa(b.to.line+e,b.to.ch),text:[Vc(b.text)],origin:b.origin}}var f=a.lastLine();b.to.line>f&&(b={from:b.from,to:Sa(f,kc(a,f).text.length),text:[b.text[0]],origin:b.origin}),b.removed=lc(a,b.from,b.to),c||(c=Ja(a,b,null)),a.cm?Qa(a.cm,b,d,c):fc(a,b,d,c)}}function Qa(a,b,c,d){var f=a.doc,g=a.display,h=b.from,i=b.to,j=!1,l=h.line;a.options.lineWrapping||(l=oc(Mb(f,kc(f,h.line))),f.iter(l,i.line+1,function(a){return a==g.maxLine?(j=!0,!0):void 0})),Ua(f.sel.head,b.from)||Ua(b.to,f.sel.head)||(a.curOp.cursorActivity=!0),fc(f,b,c,d,e(a)),a.options.lineWrapping||(f.iter(l,h.line+b.text.length,function(a){var b=k(f,a);b>g.maxLineLength&&(g.maxLine=a,g.maxLineLength=b,g.maxLineChanged=!0,j=!1)}),j&&(a.curOp.updateMaxLine=!0)),f.frontier=Math.min(f.frontier,h.line),G(a,400);var m=b.text.length-(i.line-h.line)-1;if(ia(a,h.line,i.line+1,m),Qc(a,"change")){var n={from:h,to:i,text:b.text,removed:b.removed,origin:b.origin};if(a.curOp.textChanged){for(var o=a.curOp.textChanged;o.next;o=o.next);o.next=n}else a.curOp.textChanged=n}}function Ra(a,b,c,d,e){if(d||(d=c),Ua(d,c)){var f=d;d=c,c=f}"string"==typeof b&&(b=De(b)),La(a,{from:c,to:d,text:b,origin:e},null)}function Sa(a,b){return this instanceof Sa?(this.line=a,void(this.ch=b)):new Sa(a,b)}function Ta(a,b){return a.line==b.line&&a.ch==b.ch}function Ua(a,b){return a.line<b.line||a.line==b.line&&a.ch<b.ch}function Va(a){return Sa(a.line,a.ch)}function Wa(a,b){return Math.max(a.first,Math.min(b,a.first+a.size-1))}function Xa(a,b){if(b.line<a.first)return Sa(a.first,0);var c=a.first+a.size-1;return b.line>c?Sa(c,kc(a,c).text.length):Ya(b,kc(a,b.line).text.length)}function Ya(a,b){var c=a.ch;return null==c||c>b?Sa(a.line,b):0>c?Sa(a.line,0):a}function Za(a,b){return b>=a.first&&b<a.first+a.size}function $a(a,b,c,d){if(a.sel.shift||a.sel.extend){var e=a.sel.anchor;if(c){var f=Ua(b,e);f!=Ua(c,e)?(e=b,b=c):f!=Ua(b,c)&&(b=c)}ab(a,e,b,d)}else ab(a,b,c||b,d);a.cm&&(a.cm.curOp.userSelChange=!0)}function _a(a,b,c){var d={anchor:b,head:c};return Mc(a,"beforeSelectionChange",a,d),a.cm&&Mc(a.cm,"beforeSelectionChange",a.cm,d),d.anchor=Xa(a,d.anchor),d.head=Xa(a,d.head),d}function ab(a,b,c,d,e){if(!e&&Qc(a,"beforeSelectionChange")||a.cm&&Qc(a.cm,"beforeSelectionChange")){var f=_a(a,b,c);c=f.head,b=f.anchor}var g=a.sel;if(g.goalColumn=null,(e||!Ta(b,g.anchor))&&(b=cb(a,b,d,"push"!=e)),(e||!Ta(c,g.head))&&(c=cb(a,c,d,"push"!=e)),!Ta(g.anchor,b)||!Ta(g.head,c)){g.anchor=b,g.head=c;var h=Ua(c,b);g.from=h?c:b,g.to=h?b:c,a.cm&&(a.cm.curOp.updateInput=a.cm.curOp.selectionChanged=a.cm.curOp.cursorActivity=!0),Nc(a,"cursorActivity",a)}}function bb(a){ab(a.doc,a.doc.sel.from,a.doc.sel.to,null,"push")}function cb(a,b,c,d){var e=!1,f=b,g=c||1;a.cantEdit=!1;a:for(;;){var h=kc(a,f.line);if(h.markedSpans)for(var i=0;i<h.markedSpans.length;++i){var j=h.markedSpans[i],k=j.marker;if((null==j.from||(k.inclusiveLeft?j.from<=f.ch:j.from<f.ch))&&(null==j.to||(k.inclusiveRight?j.to>=f.ch:j.to>f.ch))){if(d&&(Mc(k,"beforeCursorEnter"),k.explicitlyCleared)){if(h.markedSpans){--i;continue}break}if(!k.atomic)continue;var l=k.find()[0>g?"from":"to"];if(Ta(l,f)&&(l.ch+=g,l.ch<0?l=l.line>a.first?Xa(a,Sa(l.line-1)):null:l.ch>h.text.length&&(l=l.line<a.first+a.size-1?Sa(l.line+1,0):null),!l)){if(e)return d?(a.cantEdit=!0,Sa(a.first,0)):cb(a,b,c,!0);e=!0,l=b,g=-g}f=l;continue a}}return f}}function db(a){var b=eb(a,a.doc.sel.head,a.options.cursorScrollMargin);if(a.state.focused){var c=a.display,d=gd(c.sizer),e=null;if(b.top+d.top<0?e=!0:b.bottom+d.top>(window.innerHeight||document.documentElement.clientHeight)&&(e=!1),null!=e&&!Id){var f="none"==c.cursor.style.display;f&&(c.cursor.style.display="",c.cursor.style.left=b.left+"px",c.cursor.style.top=b.top-c.viewOffset+"px"),c.cursor.scrollIntoView(e),f&&(c.cursor.style.display="none")}}}function eb(a,b,c){for(null==c&&(c=0);;){var d=!1,e=Z(a,b),f=gb(a,e.left,e.top-c,e.left,e.bottom+c),g=a.doc.scrollTop,h=a.doc.scrollLeft;if(null!=f.scrollTop&&(wa(a,f.scrollTop),Math.abs(a.doc.scrollTop-g)>1&&(d=!0)),null!=f.scrollLeft&&(xa(a,f.scrollLeft),Math.abs(a.doc.scrollLeft-h)>1&&(d=!0)),!d)return e}}function fb(a,b,c,d,e){var f=gb(a,b,c,d,e);null!=f.scrollTop&&wa(a,f.scrollTop),null!=f.scrollLeft&&xa(a,f.scrollLeft)}function gb(a,b,c,d,e){var f=a.display,g=ba(a.display);0>c&&(c=0);var h=f.scroller.clientHeight-ve,i=f.scroller.scrollTop,j={},k=a.doc.height+L(f),l=g>c,m=e>k-g;if(i>c)j.scrollTop=l?0:c;else if(e>i+h){var n=Math.min(c,(m?k:e)-h);n!=i&&(j.scrollTop=n)}var o=f.scroller.clientWidth-ve,p=f.scroller.scrollLeft;b+=f.gutters.offsetWidth,d+=f.gutters.offsetWidth;var q=f.gutters.offsetWidth,r=q+10>b;return p+q>b||r?(r&&(b=0),j.scrollLeft=Math.max(0,b-10-q)):d>o+p-3&&(j.scrollLeft=d+10-o),j}function hb(a,b,c){a.curOp.updateScrollPos={scrollLeft:null==b?a.doc.scrollLeft:b,scrollTop:null==c?a.doc.scrollTop:c}}function ib(a,b,c){var d=a.curOp.updateScrollPos||(a.curOp.updateScrollPos={scrollLeft:a.doc.scrollLeft,scrollTop:a.doc.scrollTop}),e=a.display.scroller;d.scrollTop=Math.max(0,Math.min(e.scrollHeight-e.clientHeight,d.scrollTop+c)),d.scrollLeft=Math.max(0,Math.min(e.scrollWidth-e.clientWidth,d.scrollLeft+b))}function jb(a,b,c,d){var e=a.doc;if(null==c&&(c="add"),"smart"==c)if(a.doc.mode.indent)var f=J(a,b);else c="prev";var g,h=a.options.tabSize,i=kc(e,b),j=Tc(i.text,null,h),k=i.text.match(/^\s*/)[0];if("smart"==c&&(g=a.doc.mode.indent(f,i.text.slice(k.length),i.text),g==we)){if(!d)return;c="prev"}"prev"==c?g=b>e.first?Tc(kc(e,b-1).text,null,h):0:"add"==c?g=j+a.options.indentUnit:"subtract"==c?g=j-a.options.indentUnit:"number"==typeof c&&(g=j+c),g=Math.max(0,g);var l="",m=0;if(a.options.indentWithTabs)for(var n=Math.floor(g/h);n;--n)m+=h,l+="	";g>m&&(l+=Uc(g-m)),l!=k&&Ra(a.doc,l,Sa(b,0),Sa(b,k.length),"+input"),i.stateAfter=null}function kb(a,b,c){var d=b,e=b,f=a.doc;return"number"==typeof b?e=kc(f,Wa(f,b)):d=oc(b),null==d?null:c(e,d)?(ia(a,d,d+1),e):null}function lb(a,b,c,d,e){function f(){var b=h+c;return b<a.first||b>=a.first+a.size?l=!1:(h=b,k=kc(a,b))}function g(a){var b=(e?ud:vd)(k,i,c,!0);if(null==b){if(a||!f())return l=!1;i=e?(0>c?od:nd)(k):0>c?k.text.length:0}else i=b;return!0}var h=b.line,i=b.ch,j=c,k=kc(a,h),l=!0;if("char"==d)g();else if("column"==d)g(!0);else if("word"==d||"group"==d)for(var m=null,n="group"==d,o=!0;!(0>c)||g(!o);o=!1){var p=k.text.charAt(i)||"\n",q=ad(p)?"w":n?/\s/.test(p)?null:"p":null;if(m&&m!=q){0>c&&(c=1,g());break}if(q&&(m=q),c>0&&!g(!o))break}var r=cb(a,Sa(h,i),j,!0);return l||(r.hitSide=!0),r}function mb(a,b,c,d){var e,f=a.doc,g=b.left;if("page"==d){var h=Math.min(a.display.wrapper.clientHeight,window.innerHeight||document.documentElement.clientHeight);e=b.top+c*(h-(0>c?1.5:.5)*ba(a.display))}else"line"==d&&(e=c>0?b.bottom+3:b.top-3);for(;;){var i=_(a,g,e);if(!i.outside)break;if(0>c?0>=e:e>=f.height){i.hitSide=!0;break}e+=5*c}return i}function nb(a,b){var c=b.ch,d=b.ch;if(a){(b.xRel<0||d==a.length)&&c?--c:++d;for(var e=a.charAt(c),f=ad(e)?ad:/\s/.test(e)?function(a){return/\s/.test(a)}:function(a){return!/\s/.test(a)&&!ad(a)};c>0&&f(a.charAt(c-1));)--c;for(;d<a.length&&f(a.charAt(d));)++d}return{from:Sa(b.line,c),to:Sa(b.line,d)}}function ob(a,b){$a(a.doc,Sa(b,0),Xa(a.doc,Sa(b+1,0)))}function pb(b,c,d,e){a.defaults[b]=c,d&&(be[b]=e?function(a,b,c){c!=de&&d(a,b,c)}:d)}function qb(a,b){if(b===!0)return b;if(a.copyState)return a.copyState(b);var c={};for(var d in b){var e=b[d];e instanceof Array&&(e=e.concat([])),c[d]=e}return c}function rb(a,b,c){return a.startState?a.startState(b,c):!0}function sb(a){return"string"==typeof a?ke[a]:a}function tb(a,b,c){function d(b){b=sb(b);var e=b[a];if(e===!1)return"stop";if(null!=e&&c(e))return!0;if(b.nofallthrough)return"stop";var f=b.fallthrough;if(null==f)return!1;if("[object Array]"!=Object.prototype.toString.call(f))return d(f);for(var g=0,h=f.length;h>g;++g){var i=d(f[g]);if(i)return i}return!1}for(var e=0;e<b.length;++e){var f=d(b[e]);if(f)return"stop"!=f}}function ub(a){var b=Ge[a.keyCode];return"Ctrl"==b||"Alt"==b||"Shift"==b||"Mod"==b}function vb(a,b){if(Dd&&34==a.keyCode&&a["char"])return!1;var c=Ge[a.keyCode];return null==c||a.altGraphKey?!1:(a.altKey&&(c="Alt-"+c),(Rd?a.metaKey:a.ctrlKey)&&(c="Ctrl-"+c),(Rd?a.ctrlKey:a.metaKey)&&(c="Cmd-"+c),!b&&a.shiftKey&&(c="Shift-"+c),c)}function wb(a,b){this.pos=this.start=0,this.string=a,this.tabSize=b||8,this.lastColumnPos=this.lastColumnValue=0}function xb(a,b){this.lines=[],this.type=b,this.doc=a}function yb(a,b,c,d,e){if(d&&d.shared)return Ab(a,b,c,d,e);if(a.cm&&!a.cm.curOp)return fa(a.cm,yb)(a,b,c,d,e);var f=new xb(a,e);if("range"==e&&!Ua(b,c))return f;d&&Zc(d,f),f.replacedWith&&(f.collapsed=!0,f.replacedWith=cd("span",[f.replacedWith],"CodeMirror-widget"),d.handleMouseEvents||(f.replacedWith.ignoreEvents=!0)),f.collapsed&&(Ud=!0),f.addToHistory&&vc(a,{from:b,to:c,origin:"markText"},{head:a.sel.head,anchor:a.sel.anchor},NaN);var g,h,i,j=b.line,k=0,l=a.cm;if(a.iter(j,c.line+1,function(d){l&&f.collapsed&&!l.options.lineWrapping&&Mb(a,d)==l.display.maxLine&&(i=!0);var e={from:null,to:null,marker:f};k+=d.text.length,j==b.line&&(e.from=b.ch,k-=b.ch),j==c.line&&(e.to=c.ch,k-=d.text.length-c.ch),f.collapsed&&(j==c.line&&(h=Jb(d,c.ch)),j==b.line?g=Jb(d,b.ch):nc(d,0)),Db(d,e),++j}),f.collapsed&&a.iter(b.line,c.line+1,function(b){Nb(a,b)&&nc(b,0)}),f.clearOnEnter&&Kc(f,"beforeCursorEnter",function(){f.clear()}),f.readOnly&&(Td=!0,(a.history.done.length||a.history.undone.length)&&a.clearHistory()),f.collapsed){if(g!=h)throw new Error("Inserting collapsed marker overlapping an existing one");f.size=k,f.atomic=!0}return l&&(i&&(l.curOp.updateMaxLine=!0),(f.className||f.title||f.startStyle||f.endStyle||f.collapsed)&&ia(l,b.line,c.line+1),f.atomic&&bb(l)),f}function zb(a,b){this.markers=a,this.primary=b;for(var c=0,d=this;c<a.length;++c)a[c].parent=this,Kc(a[c],"clear",function(){d.clear()})}function Ab(a,b,c,d,e){d=Zc(d),d.shared=!1;var f=[yb(a,b,c,d,e)],g=f[0],h=d.replacedWith;return ic(a,function(a){h&&(d.replacedWith=h.cloneNode(!0)),f.push(yb(a,Xa(a,b),Xa(a,c),d,e));for(var i=0;i<a.linked.length;++i)if(a.linked[i].isParent)return;g=Vc(f)}),new zb(f,g)}function Bb(a,b){if(a)for(var c=0;c<a.length;++c){var d=a[c];if(d.marker==b)return d}}function Cb(a,b){for(var c,d=0;d<a.length;++d)a[d]!=b&&(c||(c=[])).push(a[d]);return c}function Db(a,b){a.markedSpans=a.markedSpans?a.markedSpans.concat([b]):[b],b.marker.attachLine(a)}function Eb(a,b,c){if(a)for(var d,e=0;e<a.length;++e){var f=a[e],g=f.marker,h=null==f.from||(g.inclusiveLeft?f.from<=b:f.from<b);if(h||"bookmark"==g.type&&f.from==b&&(!c||!f.marker.insertLeft)){var i=null==f.to||(g.inclusiveRight?f.to>=b:f.to>b);(d||(d=[])).push({from:f.from,to:i?null:f.to,marker:g})}}return d}function Fb(a,b,c){if(a)for(var d,e=0;e<a.length;++e){var f=a[e],g=f.marker,h=null==f.to||(g.inclusiveRight?f.to>=b:f.to>b);if(h||"bookmark"==g.type&&f.from==b&&(!c||f.marker.insertLeft)){var i=null==f.from||(g.inclusiveLeft?f.from<=b:f.from<b);(d||(d=[])).push({from:i?null:f.from-b,to:null==f.to?null:f.to-b,marker:g})}}return d}function Gb(a,b){var c=Za(a,b.from.line)&&kc(a,b.from.line).markedSpans,d=Za(a,b.to.line)&&kc(a,b.to.line).markedSpans;if(!c&&!d)return null;var e=b.from.ch,f=b.to.ch,g=Ta(b.from,b.to),h=Eb(c,e,g),i=Fb(d,f,g),j=1==b.text.length,k=Vc(b.text).length+(j?e:0);if(h)for(var l=0;l<h.length;++l){var m=h[l];if(null==m.to){var n=Bb(i,m.marker);n?j&&(m.to=null==n.to?null:n.to+k):m.to=e}}if(i)for(var l=0;l<i.length;++l){var m=i[l];if(null!=m.to&&(m.to+=k),null==m.from){var n=Bb(h,m.marker);n||(m.from=k,j&&(h||(h=[])).push(m))}else m.from+=k,j&&(h||(h=[])).push(m)}if(j&&h){for(var l=0;l<h.length;++l)null!=h[l].from&&h[l].from==h[l].to&&"bookmark"!=h[l].marker.type&&h.splice(l--,1);h.length||(h=null)}var o=[h];if(!j){var p,q=b.text.length-2;if(q>0&&h)for(var l=0;l<h.length;++l)null==h[l].to&&(p||(p=[])).push({from:null,to:null,marker:h[l].marker});for(var l=0;q>l;++l)o.push(p);o.push(i)}return o}function Hb(a,b){var c=xc(a,b),d=Gb(a,b);if(!c)return d;if(!d)return c;for(var e=0;e<c.length;++e){var f=c[e],g=d[e];if(f&&g)a:for(var h=0;h<g.length;++h){for(var i=g[h],j=0;j<f.length;++j)if(f[j].marker==i.marker)continue a;f.push(i)}else g&&(c[e]=g)}return c}function Ib(a,b,c){var d=null;if(a.iter(b.line,c.line+1,function(a){if(a.markedSpans)for(var b=0;b<a.markedSpans.length;++b){var c=a.markedSpans[b].marker;!c.readOnly||d&&-1!=Xc(d,c)||(d||(d=[])).push(c)}}),!d)return null;for(var e=[{from:b,to:c}],f=0;f<d.length;++f)for(var g=d[f],h=g.find(),i=0;i<e.length;++i){var j=e[i];if(!Ua(j.to,h.from)&&!Ua(h.to,j.from)){var k=[i,1];(Ua(j.from,h.from)||!g.inclusiveLeft&&Ta(j.from,h.from))&&k.push({from:j.from,to:h.from}),(Ua(h.to,j.to)||!g.inclusiveRight&&Ta(j.to,h.to))&&k.push({from:h.to,to:j.to}),e.splice.apply(e,k),i+=k.length-1}}return e}function Jb(a,b){var c,d=Ud&&a.markedSpans;if(d)for(var e,f=0;f<d.length;++f)e=d[f],e.marker.collapsed&&(null==e.from||e.from<b)&&(null==e.to||e.to>b)&&(!c||c.width<e.marker.width)&&(c=e.marker);return c}function Kb(a){return Jb(a,-1)}function Lb(a){return Jb(a,a.text.length+1)}function Mb(a,b){for(var c;c=Kb(b);)b=kc(a,c.find().from.line);return b}function Nb(a,b){var c=Ud&&b.markedSpans;if(c)for(var d,e=0;e<c.length;++e)if(d=c[e],d.marker.collapsed){if(null==d.from)return!0;if(!d.marker.replacedWith&&0==d.from&&d.marker.inclusiveLeft&&Ob(a,b,d))return!0}}function Ob(a,b,c){if(null==c.to){var d=c.marker.find().to,e=kc(a,d.line);return Ob(a,e,Bb(e.markedSpans,c.marker))}if(c.marker.inclusiveRight&&c.to==b.text.length)return!0;for(var f,g=0;g<b.markedSpans.length;++g)if(f=b.markedSpans[g],f.marker.collapsed&&!f.marker.replacedWith&&f.from==c.to&&(f.marker.inclusiveLeft||c.marker.inclusiveRight)&&Ob(a,b,f))return!0}function Pb(a){var b=a.markedSpans;if(b){for(var c=0;c<b.length;++c)b[c].marker.detachLine(a);a.markedSpans=null}}function Qb(a,b){if(b){for(var c=0;c<b.length;++c)b[c].marker.attachLine(a);a.markedSpans=b}}function Rb(a){return function(){var b=!this.cm.curOp;b&&da(this.cm);try{var c=a.apply(this,arguments)}finally{b&&ea(this.cm)}return c}}function Sb(a){return null!=a.height?a.height:(a.node.parentNode&&1==a.node.parentNode.nodeType||ed(a.cm.display.measure,cd("div",[a.node],null,"position: relative")),a.height=a.node.offsetHeight)}function Tb(a,b,c,d){var e=new le(a,c,d);return e.noHScroll&&(a.display.alignWidgets=!0),kb(a,b,function(b){var c=b.widgets||(b.widgets=[]);if(null==e.insertAt?c.push(e):c.splice(Math.min(c.length-1,Math.max(0,e.insertAt)),0,e),e.line=b,!Nb(a.doc,b)||e.showIfHidden){var d=qc(a,b)<a.doc.scrollTop;nc(b,b.height+Sb(e)),d&&ib(a,0,e.height)}return!0}),e}function Ub(a,b,c,d){a.text=b,a.stateAfter&&(a.stateAfter=null),a.styles&&(a.styles=null),null!=a.order&&(a.order=null),Pb(a),Qb(a,c);var e=d?d(a):1;e!=a.height&&nc(a,e)}function Vb(a){a.parent=null,Pb(a)}function Wb(a,b,c,d,e){var f=c.flattenSpans;null==f&&(f=a.options.flattenSpans);var g,h=0,i=null,j=new wb(b,a.options.tabSize);for(""==b&&c.blankLine&&c.blankLine(d);!j.eol();)j.pos>a.options.maxHighlightLength?(f=!1,j.pos=Math.min(b.length,j.start+5e4),g=null):g=c.token(j,d),f&&i==g||(h<j.start&&e(j.start,i),h=j.start,i=g),j.start=j.pos;h<j.pos&&e(j.pos,i)}function Xb(a,b,c){var d=[a.state.modeGen];Wb(a,b.text,a.doc.mode,c,function(a,b){d.push(a,b)});for(var e=0;e<a.state.overlays.length;++e){var f=a.state.overlays[e],g=1,h=0;Wb(a,b.text,f.mode,!0,function(a,b){for(var c=g;a>h;){var e=d[g];e>a&&d.splice(g,1,a,d[g+1],e),g+=2,h=Math.min(a,e)}if(b)if(f.opaque)d.splice(c,g-c,a,b),g=c+2;else for(;g>c;c+=2){var i=d[c+1];d[c+1]=i?i+" "+b:b}})}return d}function Yb(a,b){return b.styles&&b.styles[0]==a.state.modeGen||(b.styles=Xb(a,b,b.stateAfter=J(a,oc(b)))),b.styles}function Zb(a,b,c){var d=a.doc.mode,e=new wb(b.text,a.options.tabSize);for(""==b.text&&d.blankLine&&d.blankLine(c);!e.eol()&&e.pos<=a.options.maxHighlightLength;)d.token(e,c),e.start=e.pos}function $b(a){return a?ne[a]||(ne[a]="cm-"+a.replace(/ +/g," cm-")):null}function _b(a,b,c,d){for(var e,f=b,g=!0;e=Kb(f);)f=kc(a.doc,e.find().from.line);var h={pre:cd("pre"),col:0,pos:0,measure:null,measuredSomething:!1,cm:a,copyWidgets:d};f.textClass&&(h.pre.className=f.textClass);do{f.text&&(g=!1),h.measure=f==b&&c,h.pos=0,h.addToken=h.measure?bc:ac,(xd||Ad)&&a.getOption("lineWrapping")&&(h.addToken=cc(h.addToken));var i=ec(f,h,Yb(a,f));c&&f==b&&!h.measuredSomething&&(c[0]=h.pre.appendChild(jd(a.display.measure)),h.measuredSomething=!0),i&&(f=kc(a.doc,i.to.line))}while(i);!c||h.measuredSomething||c[0]||(c[0]=h.pre.appendChild(g?cd("span",""):jd(a.display.measure))),h.pre.firstChild||Nb(a.doc,b)||h.pre.appendChild(document.createTextNode(""));var j;if(c&&xd&&(j=rc(f))){var k=j.length-1;j[k].from==j[k].to&&--k;var l=j[k],m=j[k-1];if(l.from+1==l.to&&m&&l.level<m.level){var n=c[h.pos-1];n&&n.parentNode.insertBefore(n.measureRight=jd(a.display.measure),n.nextSibling)}}return Mc(a,"renderLine",a,b,h.pre),h.pre}function ac(a,b,c,d,e,f){if(b){if(oe.test(b))for(var g=document.createDocumentFragment(),h=0;;){oe.lastIndex=h;var i=oe.exec(b),j=i?i.index-h:b.length-h;if(j&&(g.appendChild(document.createTextNode(b.slice(h,h+j))),a.col+=j),!i)break;if(h+=j+1,"	"==i[0]){var k=a.cm.options.tabSize,l=k-a.col%k;g.appendChild(cd("span",Uc(l),"cm-tab")),a.col+=l}else{var m=cd("span","","cm-invalidchar");m.title="\\u"+i[0].charCodeAt(0).toString(16),g.appendChild(m),a.col+=1}}else{a.col+=b.length;var g=document.createTextNode(b)}if(c||d||e||a.measure){var n=c||"";d&&(n+=d),e&&(n+=e);var m=cd("span",[g],n);return f&&(m.title=f),a.pre.appendChild(m)}a.pre.appendChild(g);
}}function bc(a,b,c,d,e){for(var f=a.cm.options.lineWrapping,g=0;g<b.length;++g){var h=b.charAt(g),i=0==g;h>=""&&"">h&&g<b.length-1?(h=b.slice(g,g+2),++g):g&&f&&hd(b,g)&&a.pre.appendChild(cd("wbr"));var j=a.measure[a.pos],k=a.measure[a.pos]=ac(a,h,c,i&&d,g==b.length-1&&e);j&&(k.leftSide=j.leftSide||j),xd&&f&&" "==h&&g&&!/\s/.test(b.charAt(g-1))&&g<b.length-1&&!/\s/.test(b.charAt(g+1))&&(k.style.whiteSpace="normal"),a.pos+=h.length}b.length&&(a.measuredSomething=!0)}function cc(a){function b(a){for(var b=" ",c=0;c<a.length-2;++c)b+=c%2?" ":"";return b+=" "}return function(c,d,e,f,g,h){return a(c,d.replace(/ {3,}/,b),e,f,g,h)}}function dc(a,b,c,d){var e=!d&&c.replacedWith;if(e&&(a.copyWidgets&&(e=e.cloneNode(!0)),a.pre.appendChild(e),a.measure)){if(b)a.measure[a.pos]=e;else{var f=a.measure[a.pos]=jd(a.cm.display.measure);"bookmark"!=c.type||c.insertLeft?a.pre.insertBefore(f,e):a.pre.appendChild(f)}a.measuredSomething=!0}a.pos+=b}function ec(a,b,c){var d=a.markedSpans,e=a.text,f=0;if(d)for(var g,h,i,j,k,l,m=e.length,n=0,o=1,p="",q=0;;){if(q==n){h=i=j=k="",l=null,q=1/0;for(var r=null,s=0;s<d.length;++s){var t=d[s],u=t.marker;t.from<=n&&(null==t.to||t.to>n)?(null!=t.to&&q>t.to&&(q=t.to,i=""),u.className&&(h+=" "+u.className),u.startStyle&&t.from==n&&(j+=" "+u.startStyle),u.endStyle&&t.to==q&&(i+=" "+u.endStyle),u.title&&!k&&(k=u.title),u.collapsed&&(!l||l.marker.size<u.size)&&(l=t)):t.from>n&&q>t.from&&(q=t.from),"bookmark"==u.type&&t.from==n&&u.replacedWith&&(r=u)}if(l&&(l.from||0)==n&&(dc(b,(null==l.to?m:l.to)-n,l.marker,null==l.from),null==l.to))return l.marker.find();r&&!l&&dc(b,0,r)}if(n>=m)break;for(var v=Math.min(m,q);;){if(p){var w=n+p.length;if(!l){var x=w>v?p.slice(0,v-n):p;b.addToken(b,x,g?g+h:h,j,n+x.length==q?i:"",k)}if(w>=v){p=p.slice(v-n),n=v;break}n=w,j=""}p=e.slice(f,f=c[o++]),g=$b(c[o++])}}else for(var o=1;o<c.length;o+=2)b.addToken(b,e.slice(f,f=c[o]),$b(c[o+1]))}function fc(a,b,c,d,e){function f(a){return c?c[a]:null}function g(a,c,d){Ub(a,c,d,e),Nc(a,"change",a,b)}var h=b.from,i=b.to,j=b.text,k=kc(a,h.line),l=kc(a,i.line),m=Vc(j),n=f(j.length-1),o=i.line-h.line;if(0==h.ch&&0==i.ch&&""==m){for(var p=0,q=j.length-1,r=[];q>p;++p)r.push(new me(j[p],f(p),e));g(l,l.text,n),o&&a.remove(h.line,o),r.length&&a.insert(h.line,r)}else if(k==l)if(1==j.length)g(k,k.text.slice(0,h.ch)+m+k.text.slice(i.ch),n);else{for(var r=[],p=1,q=j.length-1;q>p;++p)r.push(new me(j[p],f(p),e));r.push(new me(m+k.text.slice(i.ch),n,e)),g(k,k.text.slice(0,h.ch)+j[0],f(0)),a.insert(h.line+1,r)}else if(1==j.length)g(k,k.text.slice(0,h.ch)+j[0]+l.text.slice(i.ch),f(0)),a.remove(h.line+1,o);else{g(k,k.text.slice(0,h.ch)+j[0],f(0)),g(l,m+l.text.slice(i.ch),n);for(var p=1,q=j.length-1,r=[];q>p;++p)r.push(new me(j[p],f(p),e));o>1&&a.remove(h.line+1,o-1),a.insert(h.line+1,r)}Nc(a,"change",a,b),ab(a,d.anchor,d.head,null,!0)}function gc(a){this.lines=a,this.parent=null;for(var b=0,c=a.length,d=0;c>b;++b)a[b].parent=this,d+=a[b].height;this.height=d}function hc(a){this.children=a;for(var b=0,c=0,d=0,e=a.length;e>d;++d){var f=a[d];b+=f.chunkSize(),c+=f.height,f.parent=this}this.size=b,this.height=c,this.parent=null}function ic(a,b,c){function d(a,e,f){if(a.linked)for(var g=0;g<a.linked.length;++g){var h=a.linked[g];if(h.doc!=e){var i=f&&h.sharedHist;(!c||i)&&(b(h.doc,i),d(h.doc,a,i))}}}d(a,null,!0)}function jc(a,b){if(b.cm)throw new Error("This document is already in use.");a.doc=b,b.cm=a,f(a),c(a),a.options.lineWrapping||l(a),a.options.mode=b.modeOption,ia(a)}function kc(a,b){for(b-=a.first;!a.lines;)for(var c=0;;++c){var d=a.children[c],e=d.chunkSize();if(e>b){a=d;break}b-=e}return a.lines[b]}function lc(a,b,c){var d=[],e=b.line;return a.iter(b.line,c.line+1,function(a){var f=a.text;e==c.line&&(f=f.slice(0,c.ch)),e==b.line&&(f=f.slice(b.ch)),d.push(f),++e}),d}function mc(a,b,c){var d=[];return a.iter(b,c,function(a){d.push(a.text)}),d}function nc(a,b){for(var c=b-a.height,d=a;d;d=d.parent)d.height+=c}function oc(a){if(null==a.parent)return null;for(var b=a.parent,c=Xc(b.lines,a),d=b.parent;d;b=d,d=d.parent)for(var e=0;d.children[e]!=b;++e)c+=d.children[e].chunkSize();return c+b.first}function pc(a,b){var c=a.first;a:do{for(var d=0,e=a.children.length;e>d;++d){var f=a.children[d],g=f.height;if(g>b){a=f;continue a}b-=g,c+=f.chunkSize()}return c}while(!a.lines);for(var d=0,e=a.lines.length;e>d;++d){var h=a.lines[d],i=h.height;if(i>b)break;b-=i}return c+d}function qc(a,b){b=Mb(a.doc,b);for(var c=0,d=b.parent,e=0;e<d.lines.length;++e){var f=d.lines[e];if(f==b)break;c+=f.height}for(var g=d.parent;g;d=g,g=d.parent)for(var e=0;e<g.children.length;++e){var h=g.children[e];if(h==d)break;c+=h.height}return c}function rc(a){var b=a.order;return null==b&&(b=a.order=Ie(a.text)),b}function sc(a){return{done:[],undone:[],undoDepth:1/0,lastTime:0,lastOp:null,lastOrigin:null,generation:a||1,maxGeneration:a||1}}function tc(a,b,c,d){var e=b["spans_"+a.id],f=0;a.iter(Math.max(a.first,c),Math.min(a.first+a.size,d),function(c){c.markedSpans&&((e||(e=b["spans_"+a.id]={}))[f]=c.markedSpans),++f})}function uc(a,b){var c={line:b.from.line,ch:b.from.ch},d={from:c,to:ae(b),text:lc(a,b.from,b.to)};return tc(a,d,b.from.line,b.to.line+1),ic(a,function(a){tc(a,d,b.from.line,b.to.line+1)},!0),d}function vc(a,b,c,d){var e=a.history;e.undone.length=0;var f=+new Date,g=Vc(e.done);if(g&&(e.lastOp==d||e.lastOrigin==b.origin&&b.origin&&("+"==b.origin.charAt(0)&&a.cm&&e.lastTime>f-a.cm.options.historyEventDelay||"*"==b.origin.charAt(0)))){var h=Vc(g.changes);Ta(b.from,b.to)&&Ta(b.from,h.to)?h.to=ae(b):g.changes.push(uc(a,b)),g.anchorAfter=c.anchor,g.headAfter=c.head}else for(g={changes:[uc(a,b)],generation:e.generation,anchorBefore:a.sel.anchor,headBefore:a.sel.head,anchorAfter:c.anchor,headAfter:c.head},e.done.push(g),e.generation=++e.maxGeneration;e.done.length>e.undoDepth;)e.done.shift();e.lastTime=f,e.lastOp=d,e.lastOrigin=b.origin}function wc(a){if(!a)return null;for(var b,c=0;c<a.length;++c)a[c].marker.explicitlyCleared?b||(b=a.slice(0,c)):b&&b.push(a[c]);return b?b.length?b:null:a}function xc(a,b){var c=b["spans_"+a.id];if(!c)return null;for(var d=0,e=[];d<b.text.length;++d)e.push(wc(c[d]));return e}function yc(a,b){for(var c=0,d=[];c<a.length;++c){var e=a[c],f=e.changes,g=[];d.push({changes:g,anchorBefore:e.anchorBefore,headBefore:e.headBefore,anchorAfter:e.anchorAfter,headAfter:e.headAfter});for(var h=0;h<f.length;++h){var i,j=f[h];if(g.push({from:j.from,to:j.to,text:j.text}),b)for(var k in j)(i=k.match(/^spans_(\d+)$/))&&Xc(b,Number(i[1]))>-1&&(Vc(g)[k]=j[k],delete j[k])}}return d}function zc(a,b,c,d){c<a.line?a.line+=d:b<a.line&&(a.line=b,a.ch=0)}function Ac(a,b,c,d){for(var e=0;e<a.length;++e){for(var f=a[e],g=!0,h=0;h<f.changes.length;++h){var i=f.changes[h];if(f.copied||(i.from=Va(i.from),i.to=Va(i.to)),c<i.from.line)i.from.line+=d,i.to.line+=d;else if(b<=i.to.line){g=!1;break}}f.copied||(f.anchorBefore=Va(f.anchorBefore),f.headBefore=Va(f.headBefore),f.anchorAfter=Va(f.anchorAfter),f.readAfter=Va(f.headAfter),f.copied=!0),g?(zc(f.anchorBefore),zc(f.headBefore),zc(f.anchorAfter),zc(f.headAfter)):(a.splice(0,e+1),e=0)}}function Bc(a,b){var c=b.from.line,d=b.to.line,e=b.text.length-(d-c)-1;Ac(a.done,c,d,e),Ac(a.undone,c,d,e)}function Cc(){Hc(this)}function Dc(a){return a.stop||(a.stop=Cc),a}function Ec(a){a.preventDefault?a.preventDefault():a.returnValue=!1}function Fc(a){a.stopPropagation?a.stopPropagation():a.cancelBubble=!0}function Gc(a){return null!=a.defaultPrevented?a.defaultPrevented:0==a.returnValue}function Hc(a){Ec(a),Fc(a)}function Ic(a){return a.target||a.srcElement}function Jc(a){var b=a.which;return null==b&&(1&a.button?b=1:2&a.button?b=3:4&a.button&&(b=2)),Ld&&a.ctrlKey&&1==b&&(b=3),b}function Kc(a,b,c){if(a.addEventListener)a.addEventListener(b,c,!1);else if(a.attachEvent)a.attachEvent("on"+b,c);else{var d=a._handlers||(a._handlers={}),e=d[b]||(d[b]=[]);e.push(c)}}function Lc(a,b,c){if(a.removeEventListener)a.removeEventListener(b,c,!1);else if(a.detachEvent)a.detachEvent("on"+b,c);else{var d=a._handlers&&a._handlers[b];if(!d)return;for(var e=0;e<d.length;++e)if(d[e]==c){d.splice(e,1);break}}}function Mc(a,b){var c=a._handlers&&a._handlers[b];if(c)for(var d=Array.prototype.slice.call(arguments,2),e=0;e<c.length;++e)c[e].apply(null,d)}function Nc(a,b){function c(a){return function(){a.apply(null,e)}}var d=a._handlers&&a._handlers[b];if(d){var e=Array.prototype.slice.call(arguments,2);te||(++ue,te=[],setTimeout(Pc,0));for(var f=0;f<d.length;++f)te.push(c(d[f]))}}function Oc(a,b,c){return Mc(a,c||b.type,a,b),Gc(b)||b.codemirrorIgnore}function Pc(){--ue;var a=te;te=null;for(var b=0;b<a.length;++b)a[b]()}function Qc(a,b){var c=a._handlers&&a._handlers[b];return c&&c.length>0}function Rc(a){a.prototype.on=function(a,b){Kc(this,a,b)},a.prototype.off=function(a,b){Lc(this,a,b)}}function Sc(){this.id=null}function Tc(a,b,c,d,e){null==b&&(b=a.search(/[^\s\u00a0]/),-1==b&&(b=a.length));for(var f=d||0,g=e||0;b>f;++f)"	"==a.charAt(f)?g+=c-g%c:++g;return g}function Uc(a){for(;xe.length<=a;)xe.push(Vc(xe)+" ");return xe[a]}function Vc(a){return a[a.length-1]}function Wc(a){if(Jd)a.selectionStart=0,a.selectionEnd=a.value.length;else try{a.select()}catch(b){}}function Xc(a,b){if(a.indexOf)return a.indexOf(b);for(var c=0,d=a.length;d>c;++c)if(a[c]==b)return c;return-1}function Yc(a,b){function c(){}c.prototype=a;var d=new c;return b&&Zc(b,d),d}function Zc(a,b){b||(b={});for(var c in a)a.hasOwnProperty(c)&&(b[c]=a[c]);return b}function $c(a){for(var b=[],c=0;a>c;++c)b.push(void 0);return b}function _c(a){var b=Array.prototype.slice.call(arguments,1);return function(){return a.apply(null,b)}}function ad(a){return/\w/.test(a)||a>""&&(a.toUpperCase()!=a.toLowerCase()||ye.test(a))}function bd(a){for(var b in a)if(a.hasOwnProperty(b)&&a[b])return!1;return!0}function cd(a,b,c,d){var e=document.createElement(a);if(c&&(e.className=c),d&&(e.style.cssText=d),"string"==typeof b)fd(e,b);else if(b)for(var f=0;f<b.length;++f)e.appendChild(b[f]);return e}function dd(a){for(var b=a.childNodes.length;b>0;--b)a.removeChild(a.firstChild);return a}function ed(a,b){return dd(a).appendChild(b)}function fd(a,b){zd?(a.innerHTML="",a.appendChild(document.createTextNode(b))):a.textContent=b}function gd(a){return a.getBoundingClientRect()}function hd(){return!1}function id(a){if(null!=Be)return Be;var b=cd("div",null,null,"width: 50px; height: 50px; overflow-x: scroll");return ed(a,b),b.offsetWidth&&(Be=b.offsetHeight-b.clientHeight),Be||0}function jd(a){if(null==Ce){var b=cd("span","");ed(a,cd("span",[b,document.createTextNode("x")])),0!=a.firstChild.offsetHeight&&(Ce=b.offsetWidth<=1&&b.offsetHeight>2&&!yd)}return Ce?cd("span",""):cd("span","",null,"display: inline-block; width: 1px; margin-right: -1px")}function kd(a,b,c,d){if(!a)return d(b,c,"ltr");for(var e=!1,f=0;f<a.length;++f){var g=a[f];(g.from<c&&g.to>b||b==c&&g.to==b)&&(d(Math.max(g.from,b),Math.min(g.to,c),1==g.level?"rtl":"ltr"),e=!0)}e||d(b,c,"ltr")}function ld(a){return a.level%2?a.to:a.from}function md(a){return a.level%2?a.from:a.to}function nd(a){var b=rc(a);return b?ld(b[0]):0}function od(a){var b=rc(a);return b?md(Vc(b)):a.text.length}function pd(a,b){var c=kc(a.doc,b),d=Mb(a.doc,c);d!=c&&(b=oc(d));var e=rc(d),f=e?e[0].level%2?od(d):nd(d):0;return Sa(b,f)}function qd(a,b){for(var c,d;c=Lb(d=kc(a.doc,b));)b=c.find().to.line;var e=rc(d),f=e?e[0].level%2?nd(d):od(d):d.text.length;return Sa(b,f)}function rd(a,b,c){var d=a[0].level;return b==d?!0:c==d?!1:c>b}function sd(a,b){for(var c,d=0;d<a.length;++d){var e=a[d];if(e.from<b&&e.to>b)return He=null,d;if(e.from==b||e.to==b){if(null!=c)return rd(a,e.level,a[c].level)?(He=c,d):(He=d,c);c=d}}return He=null,c}function td(a,b,c,d){if(!d)return b+c;do b+=c;while(b>0&&ze.test(a.text.charAt(b)));return b}function ud(a,b,c,d){var e=rc(a);if(!e)return vd(a,b,c,d);for(var f=sd(e,b),g=e[f],h=td(a,b,g.level%2?-c:c,d);;){if(h>g.from&&h<g.to)return h;if(h==g.from||h==g.to)return sd(e,h)==f?h:(g=e[f+=c],c>0==g.level%2?g.to:g.from);if(g=e[f+=c],!g)return null;h=c>0==g.level%2?td(a,g.to,-1,d):td(a,g.from,1,d)}}function vd(a,b,c,d){var e=b+c;if(d)for(;e>0&&ze.test(a.text.charAt(e));)e+=c;return 0>e||e>a.text.length?null:e}var wd=/gecko\/\d/i.test(navigator.userAgent),xd=/MSIE \d/.test(navigator.userAgent),yd=xd&&(null==document.documentMode||document.documentMode<8),zd=xd&&(null==document.documentMode||document.documentMode<9),Ad=/WebKit\//.test(navigator.userAgent),Bd=Ad&&/Qt\/\d+\.\d+/.test(navigator.userAgent),Cd=/Chrome\//.test(navigator.userAgent),Dd=/Opera\//.test(navigator.userAgent),Ed=/Apple Computer/.test(navigator.vendor),Fd=/KHTML\//.test(navigator.userAgent),Gd=/Mac OS X 1\d\D([7-9]|\d\d)\D/.test(navigator.userAgent),Hd=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(navigator.userAgent),Id=/PhantomJS/.test(navigator.userAgent),Jd=/AppleWebKit/.test(navigator.userAgent)&&/Mobile\/\w+/.test(navigator.userAgent),Kd=Jd||/Android|webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(navigator.userAgent),Ld=Jd||/Mac/.test(navigator.platform),Md=/windows/i.test(navigator.platform),Nd=Dd&&navigator.userAgent.match(/Version\/(\d*\.\d*)/);Nd&&(Nd=Number(Nd[1])),Nd&&Nd>=15&&(Dd=!1,Ad=!0);var Od,Pd,Qd,Rd=Ld&&(Bd||Dd&&(null==Nd||12.11>Nd)),Sd=wd||xd&&!zd,Td=!1,Ud=!1,Vd=0,Wd=0,Xd=0,Yd=null;xd?Yd=-.53:wd?Yd=15:Cd?Yd=-.7:Ed&&(Yd=-1/3);var Zd,$d,_d=null,ae=a.changeEnd=function(a){return a.text?Sa(a.from.line+a.text.length-1,Vc(a.text).length+(1==a.text.length?a.from.ch:0)):a.to};a.Pos=Sa,a.prototype={constructor:a,focus:function(){window.focus(),na(this),Fa(this),ka(this)},setOption:function(a,b){var c=this.options,d=c[a];(c[a]!=b||"mode"==a)&&(c[a]=b,be.hasOwnProperty(a)&&fa(this,be[a])(this,b,d))},getOption:function(a){return this.options[a]},getDoc:function(){return this.doc},addKeyMap:function(a,b){this.state.keyMaps[b?"push":"unshift"](a)},removeKeyMap:function(a){for(var b=this.state.keyMaps,c=0;c<b.length;++c)if(b[c]==a||"string"!=typeof b[c]&&b[c].name==a)return b.splice(c,1),!0},addOverlay:fa(null,function(b,c){var d=b.token?b:a.getMode(this.options,b);if(d.startState)throw new Error("Overlays may not be stateful.");this.state.overlays.push({mode:d,modeSpec:b,opaque:c&&c.opaque}),this.state.modeGen++,ia(this)}),removeOverlay:fa(null,function(a){for(var b=this.state.overlays,c=0;c<b.length;++c){var d=b[c].modeSpec;if(d==a||"string"==typeof a&&d.name==a)return b.splice(c,1),this.state.modeGen++,void ia(this)}}),indentLine:fa(null,function(a,b,c){"string"!=typeof b&&"number"!=typeof b&&(b=null==b?this.options.smartIndent?"smart":"prev":b?"add":"subtract"),Za(this.doc,a)&&jb(this,a,b,c)}),indentSelection:fa(null,function(a){var b=this.doc.sel;if(Ta(b.from,b.to))return jb(this,b.from.line,a);for(var c=b.to.line-(b.to.ch?0:1),d=b.from.line;c>=d;++d)jb(this,d,a)}),getTokenAt:function(a,b){var c=this.doc;a=Xa(c,a);for(var d=J(this,a.line,b),e=this.doc.mode,f=kc(c,a.line),g=new wb(f.text,this.options.tabSize);g.pos<a.ch&&!g.eol();){g.start=g.pos;var h=e.token(g,d)}return{start:g.start,end:g.pos,string:g.current(),className:h||null,type:h||null,state:d}},getTokenTypeAt:function(a){a=Xa(this.doc,a);var b=Yb(this,kc(this.doc,a.line)),c=0,d=(b.length-1)/2,e=a.ch;if(0==e)return b[2];for(;;){var f=c+d>>1;if((f?b[2*f-1]:0)>=e)d=f;else{if(!(b[2*f+1]<e))return b[2*f+2];c=f+1}}},getModeAt:function(b){var c=this.doc.mode;return c.innerMode?a.innerMode(c,this.getTokenAt(b).state).mode:c},getHelper:function(a,b){if(ie.hasOwnProperty(b)){var c=ie[b],d=this.getModeAt(a);return d[b]&&c[d[b]]||d.helperType&&c[d.helperType]||c[d.name]}},getStateAfter:function(a,b){var c=this.doc;return a=Wa(c,null==a?c.first+c.size-1:a),J(this,a+1,b)},cursorCoords:function(a,b){var c,d=this.doc.sel;return c=null==a?d.head:"object"==typeof a?Xa(this.doc,a):a?d.from:d.to,Z(this,c,b||"page")},charCoords:function(a,b){return Y(this,Xa(this.doc,a),b||"page")},coordsChar:function(a,b){return a=X(this,a,b||"page"),_(this,a.left,a.top)},lineAtHeight:function(a,b){return a=X(this,{top:a,left:0},b||"page").top,pc(this.doc,a+this.display.viewOffset)},heightAtLine:function(a,b){var c=!1,d=this.doc.first+this.doc.size-1;a<this.doc.first?a=this.doc.first:a>d&&(a=d,c=!0);var e=kc(this.doc,a);return W(this,kc(this.doc,a),{top:0,left:0},b||"page").top+(c?e.height:0)},defaultTextHeight:function(){return ba(this.display)},defaultCharWidth:function(){return ca(this.display)},setGutterMarker:fa(null,function(a,b,c){return kb(this,a,function(a){var d=a.gutterMarkers||(a.gutterMarkers={});return d[b]=c,!c&&bd(d)&&(a.gutterMarkers=null),!0})}),clearGutter:fa(null,function(a){var b=this,c=b.doc,d=c.first;c.iter(function(c){c.gutterMarkers&&c.gutterMarkers[a]&&(c.gutterMarkers[a]=null,ia(b,d,d+1),bd(c.gutterMarkers)&&(c.gutterMarkers=null)),++d})}),addLineClass:fa(null,function(a,b,c){return kb(this,a,function(a){var d="text"==b?"textClass":"background"==b?"bgClass":"wrapClass";if(a[d]){if(new RegExp("(?:^|\\s)"+c+"(?:$|\\s)").test(a[d]))return!1;a[d]+=" "+c}else a[d]=c;return!0})}),removeLineClass:fa(null,function(a,b,c){return kb(this,a,function(a){var d="text"==b?"textClass":"background"==b?"bgClass":"wrapClass",e=a[d];if(!e)return!1;if(null==c)a[d]=null;else{var f=e.match(new RegExp("(?:^|\\s+)"+c+"(?:$|\\s+)"));if(!f)return!1;var g=f.index+f[0].length;a[d]=e.slice(0,f.index)+(f.index&&g!=e.length?" ":"")+e.slice(g)||null}return!0})}),addLineWidget:fa(null,function(a,b,c){return Tb(this,a,b,c)}),removeLineWidget:function(a){a.clear()},lineInfo:function(a){if("number"==typeof a){if(!Za(this.doc,a))return null;var b=a;if(a=kc(this.doc,a),!a)return null}else{var b=oc(a);if(null==b)return null}return{line:b,handle:a,text:a.text,gutterMarkers:a.gutterMarkers,textClass:a.textClass,bgClass:a.bgClass,wrapClass:a.wrapClass,widgets:a.widgets}},getViewport:function(){return{from:this.display.showingFrom,to:this.display.showingTo}},addWidget:function(a,b,c,d,e){var f=this.display;a=Z(this,Xa(this.doc,a));var g=a.bottom,h=a.left;if(b.style.position="absolute",f.sizer.appendChild(b),"over"==d)g=a.top;else if("above"==d||"near"==d){var i=Math.max(f.wrapper.clientHeight,this.doc.height),j=Math.max(f.sizer.clientWidth,f.lineSpace.clientWidth);("above"==d||a.bottom+b.offsetHeight>i)&&a.top>b.offsetHeight?g=a.top-b.offsetHeight:a.bottom+b.offsetHeight<=i&&(g=a.bottom),h+b.offsetWidth>j&&(h=j-b.offsetWidth)}b.style.top=g+"px",b.style.left=b.style.right="","right"==e?(h=f.sizer.clientWidth-b.offsetWidth,b.style.right="0px"):("left"==e?h=0:"middle"==e&&(h=(f.sizer.clientWidth-b.offsetWidth)/2),b.style.left=h+"px"),c&&fb(this,h,g,h+b.offsetWidth,g+b.offsetHeight)},triggerOnKeyDown:fa(null,Da),execCommand:function(a){return je[a](this)},findPosH:function(a,b,c,d){var e=1;0>b&&(e=-1,b=-b);for(var f=0,g=Xa(this.doc,a);b>f&&(g=lb(this.doc,g,e,c,d),!g.hitSide);++f);return g},moveH:fa(null,function(a,b){var c,d=this.doc.sel;c=d.shift||d.extend||Ta(d.from,d.to)?lb(this.doc,d.head,a,b,this.options.rtlMoveVisually):0>a?d.from:d.to,$a(this.doc,c,c,a)}),deleteH:fa(null,function(a,b){var c=this.doc.sel;Ta(c.from,c.to)?Ra(this.doc,"",c.from,lb(this.doc,c.head,a,b,!1),"+delete"):Ra(this.doc,"",c.from,c.to,"+delete"),this.curOp.userSelChange=!0}),findPosV:function(a,b,c,d){var e=1,f=d;0>b&&(e=-1,b=-b);for(var g=0,h=Xa(this.doc,a);b>g;++g){var i=Z(this,h,"div");if(null==f?f=i.left:i.left=f,h=mb(this,i,e,c),h.hitSide)break}return h},moveV:fa(null,function(a,b){var c=this.doc.sel,d=Z(this,c.head,"div");null!=c.goalColumn&&(d.left=c.goalColumn);var e=mb(this,d,a,b);"page"==b&&ib(this,0,Y(this,e,"div").top-d.top),$a(this.doc,e,e,a),c.goalColumn=d.left}),toggleOverwrite:function(a){(null==a||a!=this.state.overwrite)&&((this.state.overwrite=!this.state.overwrite)?this.display.cursor.className+=" CodeMirror-overwrite":this.display.cursor.className=this.display.cursor.className.replace(" CodeMirror-overwrite",""))},hasFocus:function(){return this.state.focused},scrollTo:fa(null,function(a,b){hb(this,a,b)}),getScrollInfo:function(){var a=this.display.scroller,b=ve;return{left:a.scrollLeft,top:a.scrollTop,height:a.scrollHeight-b,width:a.scrollWidth-b,clientHeight:a.clientHeight-b,clientWidth:a.clientWidth-b}},scrollIntoView:fa(null,function(a,b){"number"==typeof a&&(a=Sa(a,0)),b||(b=0);var c=a;a&&null==a.line||(this.curOp.scrollToPos=a?Xa(this.doc,a):this.doc.sel.head,this.curOp.scrollToPosMargin=b,c=Z(this,this.curOp.scrollToPos));var d=gb(this,c.left,c.top-b,c.right,c.bottom+b);hb(this,d.scrollLeft,d.scrollTop)}),setSize:fa(null,function(a,b){function c(a){return"number"==typeof a||/^\d+$/.test(String(a))?a+"px":a}null!=a&&(this.display.wrapper.style.width=c(a)),null!=b&&(this.display.wrapper.style.height=c(b)),this.options.lineWrapping&&(this.display.measureLineCache.length=this.display.measureLineCachePos=0),this.curOp.forceUpdate=!0}),operation:function(a){return ha(this,a)},refresh:fa(null,function(){T(this),hb(this,this.doc.scrollLeft,this.doc.scrollTop),ia(this)}),swapDoc:fa(null,function(a){var b=this.doc;return b.cm=null,jc(this,a),T(this),ma(this,!0),hb(this,a.scrollLeft,a.scrollTop),b}),getInputField:function(){return this.display.input},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}},Rc(a);var be=a.optionHandlers={},ce=a.defaults={},de=a.Init={toString:function(){return"CodeMirror.Init"}};pb("value","",function(a,b){a.setValue(b)},!0),pb("mode",null,function(a,b){a.doc.modeOption=b,c(a)},!0),pb("indentUnit",2,c,!0),pb("indentWithTabs",!1),pb("smartIndent",!0),pb("tabSize",4,function(a){c(a),T(a),ia(a)},!0),pb("electricChars",!0),pb("rtlMoveVisually",!Md),pb("theme","default",function(a){h(a),i(a)},!0),pb("keyMap","default",g),pb("extraKeys",null),pb("onKeyEvent",null),pb("onDragEvent",null),pb("lineWrapping",!1,d,!0),pb("gutters",[],function(a){m(a.options),i(a)},!0),pb("fixedGutter",!0,function(a,b){a.display.gutters.style.left=b?s(a.display)+"px":"0",a.refresh()},!0),pb("coverGutterNextToScrollbar",!1,n,!0),pb("lineNumbers",!1,function(a){m(a.options),i(a)},!0),pb("firstLineNumber",1,i,!0),pb("lineNumberFormatter",function(a){return a},i,!0),pb("showCursorWhenSelecting",!1,C,!0),pb("readOnly",!1,function(a,b){"nocursor"==b?(Ga(a),a.display.input.blur()):b||ma(a,!0)}),pb("dragDrop",!0),pb("cursorBlinkRate",530),pb("cursorScrollMargin",0),pb("cursorHeight",1),pb("workTime",100),pb("workDelay",100),pb("flattenSpans",!0),pb("pollInterval",100),pb("undoDepth",40,function(a,b){a.doc.history.undoDepth=b}),pb("historyEventDelay",500),pb("viewportMargin",10,function(a){a.refresh()},!0),pb("maxHighlightLength",1e4,function(a){c(a),a.refresh()},!0),pb("moveInputWithCursor",!0,function(a,b){b||(a.display.inputDiv.style.top=a.display.inputDiv.style.left=0)}),pb("tabindex",null,function(a,b){a.display.input.tabIndex=b||""}),pb("autofocus",null);var ee=a.modes={},fe=a.mimeModes={};a.defineMode=function(b,c){if(a.defaults.mode||"null"==b||(a.defaults.mode=b),arguments.length>2){c.dependencies=[];for(var d=2;d<arguments.length;++d)c.dependencies.push(arguments[d])}ee[b]=c},a.defineMIME=function(a,b){fe[a]=b},a.resolveMode=function(b){if("string"==typeof b&&fe.hasOwnProperty(b))b=fe[b];else if(b&&"string"==typeof b.name&&fe.hasOwnProperty(b.name)){var c=fe[b.name];b=Yc(c,b),b.name=c.name}else if("string"==typeof b&&/^[\w\-]+\/[\w\-]+\+xml$/.test(b))return a.resolveMode("application/xml");return"string"==typeof b?{name:b}:b||{name:"null"}},a.getMode=function(b,c){var c=a.resolveMode(c),d=ee[c.name];if(!d)return a.getMode(b,"text/plain");var e=d(b,c);if(ge.hasOwnProperty(c.name)){var f=ge[c.name];for(var g in f)f.hasOwnProperty(g)&&(e.hasOwnProperty(g)&&(e["_"+g]=e[g]),e[g]=f[g])}return e.name=c.name,e},a.defineMode("null",function(){return{token:function(a){a.skipToEnd()}}}),a.defineMIME("text/plain","null");var ge=a.modeExtensions={};a.extendMode=function(a,b){var c=ge.hasOwnProperty(a)?ge[a]:ge[a]={};Zc(b,c)},a.defineExtension=function(b,c){a.prototype[b]=c},a.defineDocExtension=function(a,b){qe.prototype[a]=b},a.defineOption=pb;var he=[];a.defineInitHook=function(a){he.push(a)};var ie=a.helpers={};a.registerHelper=function(b,c,d){ie.hasOwnProperty(b)||(ie[b]=a[b]={}),ie[b][c]=d},a.isWordChar=ad,a.copyState=qb,a.startState=rb,a.innerMode=function(a,b){for(;a.innerMode;){var c=a.innerMode(b);if(!c||c.mode==a)break;b=c.state,a=c.mode}return c||{mode:a,state:b}};var je=a.commands={selectAll:function(a){a.setSelection(Sa(a.firstLine(),0),Sa(a.lastLine()))},killLine:function(a){var b=a.getCursor(!0),c=a.getCursor(!1),d=!Ta(b,c);d||a.getLine(b.line).length!=b.ch?a.replaceRange("",b,d?c:Sa(b.line),"+delete"):a.replaceRange("",b,Sa(b.line+1,0),"+delete")},deleteLine:function(a){var b=a.getCursor().line;a.replaceRange("",Sa(b,0),Sa(b),"+delete")},delLineLeft:function(a){var b=a.getCursor();a.replaceRange("",Sa(b.line,0),b,"+delete")},undo:function(a){a.undo()},redo:function(a){a.redo()},goDocStart:function(a){a.extendSelection(Sa(a.firstLine(),0))},goDocEnd:function(a){a.extendSelection(Sa(a.lastLine()))},goLineStart:function(a){a.extendSelection(pd(a,a.getCursor().line))},goLineStartSmart:function(a){var b=a.getCursor(),c=pd(a,b.line),d=a.getLineHandle(c.line),e=rc(d);if(e&&0!=e[0].level)a.extendSelection(c);else{var f=Math.max(0,d.text.search(/\S/)),g=b.line==c.line&&b.ch<=f&&b.ch;a.extendSelection(Sa(c.line,g?0:f))}},goLineEnd:function(a){a.extendSelection(qd(a,a.getCursor().line))},goLineRight:function(a){var b=a.charCoords(a.getCursor(),"div").top+5;a.extendSelection(a.coordsChar({left:a.display.lineDiv.offsetWidth+100,top:b},"div"))},goLineLeft:function(a){var b=a.charCoords(a.getCursor(),"div").top+5;a.extendSelection(a.coordsChar({left:0,top:b},"div"))},goLineUp:function(a){a.moveV(-1,"line")},goLineDown:function(a){a.moveV(1,"line")},goPageUp:function(a){a.moveV(-1,"page")},goPageDown:function(a){a.moveV(1,"page")},goCharLeft:function(a){a.moveH(-1,"char")},goCharRight:function(a){a.moveH(1,"char")},goColumnLeft:function(a){a.moveH(-1,"column")},goColumnRight:function(a){a.moveH(1,"column")},goWordLeft:function(a){a.moveH(-1,"word")},goGroupRight:function(a){a.moveH(1,"group")},goGroupLeft:function(a){a.moveH(-1,"group")},goWordRight:function(a){a.moveH(1,"word")},delCharBefore:function(a){a.deleteH(-1,"char")},delCharAfter:function(a){a.deleteH(1,"char")},delWordBefore:function(a){a.deleteH(-1,"word")},delWordAfter:function(a){a.deleteH(1,"word")},delGroupBefore:function(a){a.deleteH(-1,"group")},delGroupAfter:function(a){a.deleteH(1,"group")},indentAuto:function(a){a.indentSelection("smart")},indentMore:function(a){a.indentSelection("add")},indentLess:function(a){a.indentSelection("subtract")},insertTab:function(a){a.replaceSelection("	","end","+input")},defaultTab:function(a){a.somethingSelected()?a.indentSelection("add"):a.replaceSelection("	","end","+input")},transposeChars:function(a){var b=a.getCursor(),c=a.getLine(b.line);b.ch>0&&b.ch<c.length-1&&a.replaceRange(c.charAt(b.ch)+c.charAt(b.ch-1),Sa(b.line,b.ch-1),Sa(b.line,b.ch+1))},newlineAndIndent:function(a){fa(a,function(){a.replaceSelection("\n","end","+input"),a.indentLine(a.getCursor().line,null,!0)})()},toggleOverwrite:function(a){a.toggleOverwrite()}},ke=a.keyMap={};ke.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite"},ke.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Alt-Up":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Down":"goDocEnd","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore",fallthrough:"basic"},ke.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineStart","Cmd-Right":"goLineEnd","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delLineLeft",fallthrough:["basic","emacsy"]},ke["default"]=Ld?ke.macDefault:ke.pcDefault,ke.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Alt-F":"goWordRight","Alt-B":"goWordLeft","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-D":"delWordAfter","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars"},a.lookupKey=tb,a.isModifierKey=ub,a.keyName=vb,a.fromTextArea=function(b,c){function d(){b.value=j.getValue()}if(c||(c={}),c.value=b.value,!c.tabindex&&b.tabindex&&(c.tabindex=b.tabindex),!c.placeholder&&b.placeholder&&(c.placeholder=b.placeholder),null==c.autofocus){var e=document.body;try{e=document.activeElement}catch(f){}c.autofocus=e==b||null!=b.getAttribute("autofocus")&&e==document.body}if(b.form&&(Kc(b.form,"submit",d),!c.leaveSubmitMethodAlone)){var g=b.form,h=g.submit;try{var i=g.submit=function(){d(),g.submit=h,g.submit(),g.submit=i}}catch(f){}}b.style.display="none";var j=a(function(a){b.parentNode.insertBefore(a,b.nextSibling)},c);return j.save=d,j.getTextArea=function(){return b},j.toTextArea=function(){d(),b.parentNode.removeChild(j.getWrapperElement()),b.style.display="",b.form&&(Lc(b.form,"submit",d),"function"==typeof b.form.submit&&(b.form.submit=h))},j},wb.prototype={eol:function(){return this.pos>=this.string.length},sol:function(){return 0==this.pos},peek:function(){return this.string.charAt(this.pos)||void 0},next:function(){return this.pos<this.string.length?this.string.charAt(this.pos++):void 0},eat:function(a){var b=this.string.charAt(this.pos);if("string"==typeof a)var c=b==a;else var c=b&&(a.test?a.test(b):a(b));return c?(++this.pos,b):void 0},eatWhile:function(a){for(var b=this.pos;this.eat(a););return this.pos>b},eatSpace:function(){for(var a=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>a},skipToEnd:function(){this.pos=this.string.length},skipTo:function(a){var b=this.string.indexOf(a,this.pos);return b>-1?(this.pos=b,!0):void 0},backUp:function(a){this.pos-=a},column:function(){return this.lastColumnPos<this.start&&(this.lastColumnValue=Tc(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue},indentation:function(){return Tc(this.string,null,this.tabSize)},match:function(a,b,c){if("string"!=typeof a){var d=this.string.slice(this.pos).match(a);return d&&d.index>0?null:(d&&b!==!1&&(this.pos+=d[0].length),d)}var e=function(a){return c?a.toLowerCase():a},f=this.string.substr(this.pos,a.length);return e(f)==e(a)?(b!==!1&&(this.pos+=a.length),!0):void 0},current:function(){return this.string.slice(this.start,this.pos)}},a.StringStream=wb,a.TextMarker=xb,Rc(xb),xb.prototype.clear=function(){if(!this.explicitlyCleared){var a=this.doc.cm,b=a&&!a.curOp;if(b&&da(a),Qc(this,"clear")){var c=this.find();c&&Nc(this,"clear",c.from,c.to)}for(var d=null,e=null,f=0;f<this.lines.length;++f){var g=this.lines[f],h=Bb(g.markedSpans,this);null!=h.to&&(e=oc(g)),g.markedSpans=Cb(g.markedSpans,h),null!=h.from?d=oc(g):this.collapsed&&!Nb(this.doc,g)&&a&&nc(g,ba(a.display))}if(a&&this.collapsed&&!a.options.lineWrapping)for(var f=0;f<this.lines.length;++f){var i=Mb(a.doc,this.lines[f]),j=k(a.doc,i);j>a.display.maxLineLength&&(a.display.maxLine=i,a.display.maxLineLength=j,
a.display.maxLineChanged=!0)}null!=d&&a&&ia(a,d,e+1),this.lines.length=0,this.explicitlyCleared=!0,this.atomic&&this.doc.cantEdit&&(this.doc.cantEdit=!1,a&&bb(a)),b&&ea(a)}},xb.prototype.find=function(){for(var a,b,c=0;c<this.lines.length;++c){var d=this.lines[c],e=Bb(d.markedSpans,this);if(null!=e.from||null!=e.to){var f=oc(d);null!=e.from&&(a=Sa(f,e.from)),null!=e.to&&(b=Sa(f,e.to))}}return"bookmark"==this.type?a:a&&{from:a,to:b}},xb.prototype.changed=function(){var a=this.find(),b=this.doc.cm;if(a&&b){var c=kc(this.doc,a.from.line);if(P(b,c),a.from.line>=b.display.showingFrom&&a.from.line<b.display.showingTo){for(var d=b.display.lineDiv.firstChild;d;d=d.nextSibling)if(d.lineObj==c){d.offsetHeight!=c.height&&nc(c,d.offsetHeight);break}ha(b,function(){b.curOp.selectionChanged=b.curOp.forceUpdate=b.curOp.updateMaxLine=!0})}}},xb.prototype.attachLine=function(a){if(!this.lines.length&&this.doc.cm){var b=this.doc.cm.curOp;b.maybeHiddenMarkers&&-1!=Xc(b.maybeHiddenMarkers,this)||(b.maybeUnhiddenMarkers||(b.maybeUnhiddenMarkers=[])).push(this)}this.lines.push(a)},xb.prototype.detachLine=function(a){if(this.lines.splice(Xc(this.lines,a),1),!this.lines.length&&this.doc.cm){var b=this.doc.cm.curOp;(b.maybeHiddenMarkers||(b.maybeHiddenMarkers=[])).push(this)}},a.SharedTextMarker=zb,Rc(zb),zb.prototype.clear=function(){if(!this.explicitlyCleared){this.explicitlyCleared=!0;for(var a=0;a<this.markers.length;++a)this.markers[a].clear();Nc(this,"clear")}},zb.prototype.find=function(){return this.primary.find()};var le=a.LineWidget=function(a,b,c){if(c)for(var d in c)c.hasOwnProperty(d)&&(this[d]=c[d]);this.cm=a,this.node=b};Rc(le),le.prototype.clear=Rb(function(){var a=this.line.widgets,b=oc(this.line);if(null!=b&&a){for(var c=0;c<a.length;++c)a[c]==this&&a.splice(c--,1);a.length||(this.line.widgets=null);var d=qc(this.cm,this.line)<this.cm.doc.scrollTop;nc(this.line,Math.max(0,this.line.height-Sb(this))),d&&ib(this.cm,0,-this.height),ia(this.cm,b,b+1)}}),le.prototype.changed=Rb(function(){var a=this.height;this.height=null;var b=Sb(this)-a;if(b){nc(this.line,this.line.height+b);var c=oc(this.line);ia(this.cm,c,c+1)}});var me=a.Line=function(a,b,c){this.text=a,Qb(this,b),this.height=c?c(this):1};Rc(me);var ne={},oe=/[\t\u0000-\u0019\u00ad\u200b\u2028\u2029\uFEFF]/g;gc.prototype={chunkSize:function(){return this.lines.length},removeInner:function(a,b){for(var c=a,d=a+b;d>c;++c){var e=this.lines[c];this.height-=e.height,Vb(e),Nc(e,"delete")}this.lines.splice(a,b)},collapse:function(a){a.splice.apply(a,[a.length,0].concat(this.lines))},insertInner:function(a,b,c){this.height+=c,this.lines=this.lines.slice(0,a).concat(b).concat(this.lines.slice(a));for(var d=0,e=b.length;e>d;++d)b[d].parent=this},iterN:function(a,b,c){for(var d=a+b;d>a;++a)if(c(this.lines[a]))return!0}},hc.prototype={chunkSize:function(){return this.size},removeInner:function(a,b){this.size-=b;for(var c=0;c<this.children.length;++c){var d=this.children[c],e=d.chunkSize();if(e>a){var f=Math.min(b,e-a),g=d.height;if(d.removeInner(a,f),this.height-=g-d.height,e==f&&(this.children.splice(c--,1),d.parent=null),0==(b-=f))break;a=0}else a-=e}if(this.size-b<25){var h=[];this.collapse(h),this.children=[new gc(h)],this.children[0].parent=this}},collapse:function(a){for(var b=0,c=this.children.length;c>b;++b)this.children[b].collapse(a)},insertInner:function(a,b,c){this.size+=b.length,this.height+=c;for(var d=0,e=this.children.length;e>d;++d){var f=this.children[d],g=f.chunkSize();if(g>=a){if(f.insertInner(a,b,c),f.lines&&f.lines.length>50){for(;f.lines.length>50;){var h=f.lines.splice(f.lines.length-25,25),i=new gc(h);f.height-=i.height,this.children.splice(d+1,0,i),i.parent=this}this.maybeSpill()}break}a-=g}},maybeSpill:function(){if(!(this.children.length<=10)){var a=this;do{var b=a.children.splice(a.children.length-5,5),c=new hc(b);if(a.parent){a.size-=c.size,a.height-=c.height;var d=Xc(a.parent.children,a);a.parent.children.splice(d+1,0,c)}else{var e=new hc(a.children);e.parent=a,a.children=[e,c],a=e}c.parent=a.parent}while(a.children.length>10);a.parent.maybeSpill()}},iterN:function(a,b,c){for(var d=0,e=this.children.length;e>d;++d){var f=this.children[d],g=f.chunkSize();if(g>a){var h=Math.min(b,g-a);if(f.iterN(a,h,c))return!0;if(0==(b-=h))break;a=0}else a-=g}}};var pe=0,qe=a.Doc=function(a,b,c){if(!(this instanceof qe))return new qe(a,b,c);null==c&&(c=0),hc.call(this,[new gc([new me("",null)])]),this.first=c,this.scrollTop=this.scrollLeft=0,this.cantEdit=!1,this.history=sc(),this.cleanGeneration=1,this.frontier=c;var d=Sa(c,0);this.sel={from:d,to:d,head:d,anchor:d,shift:!1,extend:!1,goalColumn:null},this.id=++pe,this.modeOption=b,"string"==typeof a&&(a=De(a)),fc(this,{from:d,to:d,text:a},null,{head:d,anchor:d})};qe.prototype=Yc(hc.prototype,{constructor:qe,iter:function(a,b,c){c?this.iterN(a-this.first,b-a,c):this.iterN(this.first,this.first+this.size,a)},insert:function(a,b){for(var c=0,d=0,e=b.length;e>d;++d)c+=b[d].height;this.insertInner(a-this.first,b,c)},remove:function(a,b){this.removeInner(a-this.first,b)},getValue:function(a){var b=mc(this,this.first,this.first+this.size);return a===!1?b:b.join(a||"\n")},setValue:function(a){var b=Sa(this.first,0),c=this.first+this.size-1;La(this,{from:b,to:Sa(c,kc(this,c).text.length),text:De(a),origin:"setValue"},{head:b,anchor:b},!0)},replaceRange:function(a,b,c,d){b=Xa(this,b),c=c?Xa(this,c):b,Ra(this,a,b,c,d)},getRange:function(a,b,c){var d=lc(this,Xa(this,a),Xa(this,b));return c===!1?d:d.join(c||"\n")},getLine:function(a){var b=this.getLineHandle(a);return b&&b.text},setLine:function(a,b){Za(this,a)&&Ra(this,b,Sa(a,0),Xa(this,Sa(a)))},removeLine:function(a){a?Ra(this,"",Xa(this,Sa(a-1)),Xa(this,Sa(a))):Ra(this,"",Sa(0,0),Xa(this,Sa(1,0)))},getLineHandle:function(a){return Za(this,a)?kc(this,a):void 0},getLineNumber:function(a){return oc(a)},getLineHandleVisualStart:function(a){return"number"==typeof a&&(a=kc(this,a)),Mb(this,a)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(a){return Xa(this,a)},getCursor:function(a){var b,c=this.sel;return b=null==a||"head"==a?c.head:"anchor"==a?c.anchor:"end"==a||a===!1?c.to:c.from,Va(b)},somethingSelected:function(){return!Ta(this.sel.head,this.sel.anchor)},setCursor:ga(function(a,b,c){var d=Xa(this,"number"==typeof a?Sa(a,b||0):a);c?$a(this,d):ab(this,d,d)}),setSelection:ga(function(a,b){ab(this,Xa(this,a),Xa(this,b||a))}),extendSelection:ga(function(a,b){$a(this,Xa(this,a),b&&Xa(this,b))}),getSelection:function(a){return this.getRange(this.sel.from,this.sel.to,a)},replaceSelection:function(a,b,c){La(this,{from:this.sel.from,to:this.sel.to,text:De(a),origin:c},b||"around")},undo:ga(function(){Na(this,"undo")}),redo:ga(function(){Na(this,"redo")}),setExtending:function(a){this.sel.extend=a},historySize:function(){var a=this.history;return{undo:a.done.length,redo:a.undone.length}},clearHistory:function(){this.history=sc(this.history.maxGeneration)},markClean:function(){this.cleanGeneration=this.changeGeneration()},changeGeneration:function(){return this.history.lastOp=this.history.lastOrigin=null,this.history.generation},isClean:function(a){return this.history.generation==(a||this.cleanGeneration)},getHistory:function(){return{done:yc(this.history.done),undone:yc(this.history.undone)}},setHistory:function(a){var b=this.history=sc(this.history.maxGeneration);b.done=a.done.slice(0),b.undone=a.undone.slice(0)},markText:function(a,b,c){return yb(this,Xa(this,a),Xa(this,b),c,"range")},setBookmark:function(a,b){var c={replacedWith:b&&(null==b.nodeType?b.widget:b),insertLeft:b&&b.insertLeft};return a=Xa(this,a),yb(this,a,a,c,"bookmark")},findMarksAt:function(a){a=Xa(this,a);var b=[],c=kc(this,a.line).markedSpans;if(c)for(var d=0;d<c.length;++d){var e=c[d];(null==e.from||e.from<=a.ch)&&(null==e.to||e.to>=a.ch)&&b.push(e.marker.parent||e.marker)}return b},getAllMarks:function(){var a=[];return this.iter(function(b){var c=b.markedSpans;if(c)for(var d=0;d<c.length;++d)null!=c[d].from&&a.push(c[d].marker)}),a},posFromIndex:function(a){var b,c=this.first;return this.iter(function(d){var e=d.text.length+1;return e>a?(b=a,!0):(a-=e,void++c)}),Xa(this,Sa(c,b))},indexFromPos:function(a){a=Xa(this,a);var b=a.ch;return a.line<this.first||a.ch<0?0:(this.iter(this.first,a.line,function(a){b+=a.text.length+1}),b)},copy:function(a){var b=new qe(mc(this,this.first,this.first+this.size),this.modeOption,this.first);return b.scrollTop=this.scrollTop,b.scrollLeft=this.scrollLeft,b.sel={from:this.sel.from,to:this.sel.to,head:this.sel.head,anchor:this.sel.anchor,shift:this.sel.shift,extend:!1,goalColumn:this.sel.goalColumn},a&&(b.history.undoDepth=this.history.undoDepth,b.setHistory(this.getHistory())),b},linkedDoc:function(a){a||(a={});var b=this.first,c=this.first+this.size;null!=a.from&&a.from>b&&(b=a.from),null!=a.to&&a.to<c&&(c=a.to);var d=new qe(mc(this,b,c),a.mode||this.modeOption,b);return a.sharedHist&&(d.history=this.history),(this.linked||(this.linked=[])).push({doc:d,sharedHist:a.sharedHist}),d.linked=[{doc:this,isParent:!0,sharedHist:a.sharedHist}],d},unlinkDoc:function(b){if(b instanceof a&&(b=b.doc),this.linked)for(var c=0;c<this.linked.length;++c){var d=this.linked[c];if(d.doc==b){this.linked.splice(c,1),b.unlinkDoc(this);break}}if(b.history==this.history){var e=[b.id];ic(b,function(a){e.push(a.id)},!0),b.history=sc(),b.history.done=yc(this.history.done,e),b.history.undone=yc(this.history.undone,e)}},iterLinkedDocs:function(a){ic(this,a)},getMode:function(){return this.mode},getEditor:function(){return this.cm}}),qe.prototype.eachLine=qe.prototype.iter;var re="iter insert remove copy getEditor".split(" ");for(var se in qe.prototype)qe.prototype.hasOwnProperty(se)&&Xc(re,se)<0&&(a.prototype[se]=function(a){return function(){return a.apply(this.doc,arguments)}}(qe.prototype[se]));Rc(qe),a.e_stop=Hc,a.e_preventDefault=Ec,a.e_stopPropagation=Fc;var te,ue=0;a.on=Kc,a.off=Lc,a.signal=Mc;var ve=30,we=a.Pass={toString:function(){return"CodeMirror.Pass"}};Sc.prototype={set:function(a,b){clearTimeout(this.id),this.id=setTimeout(b,a)}},a.countColumn=Tc;var xe=[""],ye=/[\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/,ze=/[\u0300-\u036F\u0483-\u0487\u0488-\u0489\u0591-\u05BD\u05BF\u05C1-\u05C2\u05C4-\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7-\u06E8\u06EA-\u06ED\uA66F\uA670-\uA672\uA674-\uA67D\uA69F\udc00-\udfff]/;a.replaceGetRect=function(a){gd=a};var Ae=function(){if(zd)return!1;var a=cd("div");return"draggable"in a||"dragDrop"in a}();wd?hd=function(a,b){return 36==a.charCodeAt(b-1)&&39==a.charCodeAt(b)}:Ed&&!/Version\/([6-9]|\d\d)\b/.test(navigator.userAgent)?hd=function(a,b){return/\-[^ \-?]|\?[^ !\'\"\),.\-\/:;\?\]\}]/.test(a.slice(b-1,b+1))}:Ad&&!/Chrome\/(?:29|[3-9]\d|\d\d\d)\./.test(navigator.userAgent)&&(hd=function(a,b){if(b>1&&45==a.charCodeAt(b-1)){if(/\w/.test(a.charAt(b-2))&&/[^\-?\.]/.test(a.charAt(b)))return!0;if(b>2&&/[\d\.,]/.test(a.charAt(b-2))&&/[\d\.,]/.test(a.charAt(b)))return!1}return/[~!#%&*)=+}\]|\"\.>,:;][({[<]|-[^\-?\.\u2010-\u201f\u2026]|\?[\w~`@#$%\^&*(_=+{[|><]|[\w~`@#$%\^&*(_=+{[><]/.test(a.slice(b-1,b+1))});var Be,Ce,De=3!="\n\nb".split(/\n/).length?function(a){for(var b=0,c=[],d=a.length;d>=b;){var e=a.indexOf("\n",b);-1==e&&(e=a.length);var f=a.slice(b,"\r"==a.charAt(e-1)?e-1:e),g=f.indexOf("\r");-1!=g?(c.push(f.slice(0,g)),b+=g+1):(c.push(f),b=e+1)}return c}:function(a){return a.split(/\r\n?|\n/)};a.splitLines=De;var Ee=window.getSelection?function(a){try{return a.selectionStart!=a.selectionEnd}catch(b){return!1}}:function(a){try{var b=a.ownerDocument.selection.createRange()}catch(c){}return b&&b.parentElement()==a?0!=b.compareEndPoints("StartToEnd",b):!1},Fe=function(){var a=cd("div");return"oncopy"in a?!0:(a.setAttribute("oncopy","return;"),"function"==typeof a.oncopy)}(),Ge={3:"Enter",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",91:"Mod",92:"Mod",93:"Mod",109:"-",107:"=",127:"Delete",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",63276:"PageUp",63277:"PageDown",63275:"End",63273:"Home",63234:"Left",63232:"Up",63235:"Right",63233:"Down",63302:"Insert",63272:"Delete"};a.keyNames=Ge,function(){for(var a=0;10>a;a++)Ge[a+48]=String(a);for(var a=65;90>=a;a++)Ge[a]=String.fromCharCode(a);for(var a=1;12>=a;a++)Ge[a+111]=Ge[a+63235]="F"+a}();var He,Ie=function(){function a(a){return 255>=a?b.charAt(a):a>=1424&&1524>=a?"R":a>=1536&&1791>=a?c.charAt(a-1536):a>=1792&&2220>=a?"r":"L"}var b="bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLL",c="rrrrrrrrrrrr,rNNmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmrrrrrrrnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmNmmmmrrrrrrrrrrrrrrrrrr",d=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,e=/[stwN]/,f=/[LRr]/,g=/[Lb1n]/,h=/[1n]/,i="L";return function(b){if(!d.test(b))return!1;for(var c,j=b.length,k=[],l=0;j>l;++l)k.push(c=a(b.charCodeAt(l)));for(var l=0,m=i;j>l;++l){var c=k[l];"m"==c?k[l]=m:m=c}for(var l=0,n=i;j>l;++l){var c=k[l];"1"==c&&"r"==n?k[l]="n":f.test(c)&&(n=c,"r"==c&&(k[l]="R"))}for(var l=1,m=k[0];j-1>l;++l){var c=k[l];"+"==c&&"1"==m&&"1"==k[l+1]?k[l]="1":","!=c||m!=k[l+1]||"1"!=m&&"n"!=m||(k[l]=m),m=c}for(var l=0;j>l;++l){var c=k[l];if(","==c)k[l]="N";else if("%"==c){for(var o=l+1;j>o&&"%"==k[o];++o);for(var p=l&&"!"==k[l-1]||j-1>o&&"1"==k[o]?"1":"N",q=l;o>q;++q)k[q]=p;l=o-1}}for(var l=0,n=i;j>l;++l){var c=k[l];"L"==n&&"1"==c?k[l]="L":f.test(c)&&(n=c)}for(var l=0;j>l;++l)if(e.test(k[l])){for(var o=l+1;j>o&&e.test(k[o]);++o);for(var r="L"==(l?k[l-1]:i),s="L"==(j-1>o?k[o]:i),p=r||s?"L":"R",q=l;o>q;++q)k[q]=p;l=o-1}for(var t,u=[],l=0;j>l;)if(g.test(k[l])){var v=l;for(++l;j>l&&g.test(k[l]);++l);u.push({from:v,to:l,level:0})}else{var w=l,x=u.length;for(++l;j>l&&"L"!=k[l];++l);for(var q=w;l>q;)if(h.test(k[q])){q>w&&u.splice(x,0,{from:w,to:q,level:1});var y=q;for(++q;l>q&&h.test(k[q]);++q);u.splice(x,0,{from:y,to:q,level:2}),w=q}else++q;l>w&&u.splice(x,0,{from:w,to:l,level:1})}return 1==u[0].level&&(t=b.match(/^\s+/))&&(u[0].from=t[0].length,u.unshift({from:0,to:t[0].length,level:0})),1==Vc(u).level&&(t=b.match(/\s+$/))&&(Vc(u).to-=t[0].length,u.push({from:j-t[0].length,to:j,level:0})),u[0].level!=Vc(u).level&&u.push({from:j,to:j,level:u[0].level}),u}}();return a.version="3.15.0",a}(),function(){"use strict";function a(a,c,d){function e(b){var d=f(a,c);if(!d||d.to.line-d.from.line<g)return null;for(var e=a.findMarksAt(d.from),h=0;h<e.length;++h)if(e[h].__isFold){if(!b)return null;d.cleared=!0,e[h].clear()}return d}var f=d&&(d.call?d:d.rangeFinder);if(f||(f=a.getHelper(c,"fold")),f){"number"==typeof c&&(c=CodeMirror.Pos(c,0));var g=d&&d.minFoldSize||0,h=e(!0);if(d&&d.scanUp)for(;!h&&c.line>a.firstLine();)c=CodeMirror.Pos(c.line-1,0),h=e(!1);if(h&&!h.cleared){var i=b(d);CodeMirror.on(i,"mousedown",function(){j.clear()});var j=a.markText(h.from,h.to,{replacedWith:i,clearOnEnter:!0,__isFold:!0});j.on("clear",function(b,c){CodeMirror.signal(a,"unfold",a,b,c)}),CodeMirror.signal(a,"fold",a,h.from,h.to)}}}function b(a){var b=a&&a.widget||"";if("string"==typeof b){var c=document.createTextNode(b);b=document.createElement("span"),b.appendChild(c),b.className="CodeMirror-foldmarker"}return b}CodeMirror.newFoldFunction=function(b,c){return function(d,e){a(d,e,{rangeFinder:b,widget:c})}},CodeMirror.defineExtension("foldCode",function(b,c){a(this,b,c)}),CodeMirror.registerHelper("fold","combine",function(){var a=Array.prototype.slice.call(arguments,0);return function(b,c){for(var d=0;d<a.length;++d){var e=a[d](b,c);if(e)return e}}})}(),function(){"use strict";function a(a){this.options=a,this.from=this.to=0}function b(a){return a===!0&&(a={}),null==a.gutter&&(a.gutter="CodeMirror-foldgutter"),null==a.indicatorOpen&&(a.indicatorOpen="CodeMirror-foldgutter-open"),null==a.indicatorFolded&&(a.indicatorFolded="CodeMirror-foldgutter-folded"),a}function c(a,b){for(var c=a.findMarksAt(k(b)),d=0;d<c.length;++d)if(c[d].__isFold&&c[d].find().from.line==b)return!0}function d(a){if("string"==typeof a){var b=document.createElement("div");return b.className=a,b}return a.cloneNode(!0)}function e(a,b,e){var f=a.state.foldGutter.options,g=b;a.eachLine(b,e,function(b){var e=null;if(c(a,g))e=d(f.indicatorFolded);else{var h=k(g,0),i=f.rangeFinder||a.getHelper(h,"fold"),j=i&&i(a,h);j&&j.from.line+1<j.to.line&&(e=d(f.indicatorOpen))}a.setGutterMarker(b,f.gutter,e),++g})}function f(a){var b=a.getViewport(),c=a.state.foldGutter;c&&(a.operation(function(){e(a,b.from,b.to)}),c.from=b.from,c.to=b.to)}function g(a,b,c){var d=a.state.foldGutter.options;c==d.gutter&&a.foldCode(k(b,0),d.rangeFinder)}function h(a){var b=a.state.foldGutter,c=a.state.foldGutter.options;b.from=b.to=0,clearTimeout(b.changeUpdate),b.changeUpdate=setTimeout(function(){f(a)},c.foldOnChangeTimeSpan||600)}function i(a){var b=a.state.foldGutter,c=a.state.foldGutter.options;clearTimeout(b.changeUpdate),b.changeUpdate=setTimeout(function(){var c=a.getViewport();b.from==b.to||c.from-b.to>20||b.from-c.to>20?f(a):a.operation(function(){c.from<b.from&&(e(a,c.from,b.from),b.from=c.from),c.to>b.to&&(e(a,b.to,c.to),b.to=c.to)})},c.updateViewportTimeSpan)}function j(a,b){var c=a.state.foldGutter,d=b.line;d>=c.from&&d<c.to&&e(a,d,d+1)}CodeMirror.defineOption("foldGutter",!1,function(c,d,e){e&&e!=CodeMirror.Init&&(c.clearGutter(c.state.foldGutter.options.gutter),c.state.foldGutter=null,c.off("gutterClick",g),c.off("change",h),c.off("viewportChange",i),c.off("fold",j),c.off("unfold",j),c.off("swapDoc",f)),d&&(c.state.foldGutter=new a(b(d)),f(c),c.on("gutterClick",g),c.on("change",h),c.on("viewportChange",i),c.on("fold",j),c.on("unfold",j),c.on("swapDoc",f))});var k=CodeMirror.Pos}(),CodeMirror.defineMode("gfm",function(a){function b(a){return a.code=!1,null}var c=0,d={startState:function(){return{code:!1,codeBlock:!1,ateSpace:!1}},copyState:function(a){return{code:a.code,codeBlock:a.codeBlock,ateSpace:a.ateSpace}},token:function(a,b){if(b.codeBlock)return a.match(/^```/)?(b.codeBlock=!1,null):(a.skipToEnd(),null);if(a.sol()&&(b.code=!1),a.sol()&&a.match(/^```/))return a.skipToEnd(),b.codeBlock=!0,null;if("`"===a.peek()){a.next();var d=a.pos;a.eatWhile("`");var e=1+a.pos-d;return b.code?e===c&&(b.code=!1):(c=e,b.code=!0),null}if(b.code)return a.next(),null;if(a.eatSpace())return b.ateSpace=!0,null;if(a.sol()||b.ateSpace){if(b.ateSpace=!1,a.match(/^(?:[a-zA-Z0-9\-_]+\/)?(?:[a-zA-Z0-9\-_]+@)?(?:[a-f0-9]{7,40}\b)/))return"link";if(a.match(/^(?:[a-zA-Z0-9\-_]+\/)?(?:[a-zA-Z0-9\-_]+)?#[0-9]+\b/))return"link"}return a.match(/^((?:[a-z][\w-]+:(?:\/{1,3}|[a-z0-9%])|www\d{0,3}[.]|[a-z0-9.\-]+[.][a-z]{2,4}\/)(?:[^\s()<>]+|\([^\s()<>]*\))+(?:\([^\s()<>]*\)|[^\s`!()\[\]{};:'".,<>?]))/i)?"link":(a.next(),null)},blankLine:b};return CodeMirror.defineMIME("gfmBase",{name:"markdown",underscoresBreakWords:!1,taskLists:!0,fencedCodeBlocks:!0}),CodeMirror.overlayMode(CodeMirror.getMode(a,"gfmBase"),d)},"markdown"),CodeMirror.defineMode("javascript",function(a,b){function c(a,b,c){return b.tokenize=c,c(a,b)}function d(a,b){for(var c,d=!1;null!=(c=a.next());){if(c==b&&!d)return!1;d=!d&&"\\"==c}return d}function e(a,b,c){return S=a,T=c,b}function f(a,b){var f=a.next();if('"'==f||"'"==f)return c(a,b,g(f));if("."==f&&a.match(/^\d+(?:[eE][+\-]?\d+)?/))return e("number","number");if(/[\[\]{}\(\),;\:\.]/.test(f))return e(f);if("0"==f&&a.eat(/x/i))return a.eatWhile(/[\da-f]/i),e("number","number");if(/\d/.test(f))return a.match(/^\d*(?:\.\d*)?(?:[eE][+\-]?\d+)?/),e("number","number");if("/"==f)return a.eat("*")?c(a,b,h):a.eat("/")?(a.skipToEnd(),e("comment","comment")):"operator"==b.lastType||"keyword c"==b.lastType||/^[\[{}\(,;:]$/.test(b.lastType)?(d(a,"/"),a.eatWhile(/[gimy]/),e("regexp","string-2")):(a.eatWhile(Z),e("operator",null,a.current()));if("#"==f)return a.skipToEnd(),e("error","error");if(Z.test(f))return a.eatWhile(Z),e("operator",null,a.current());a.eatWhile(/[\w\$_]/);var i=a.current(),j=Y.propertyIsEnumerable(i)&&Y[i];return j&&"."!=b.lastType?e(j.type,j.style,i):e("variable","variable",i)}function g(a){return function(b,c){return d(b,a)||(c.tokenize=f),e("string","string")}}function h(a,b){for(var c,d=!1;c=a.next();){if("/"==c&&d){b.tokenize=f;break}d="*"==c}return e("comment","comment")}function i(a,b,c,d,e,f){this.indented=a,this.column=b,this.type=c,this.prev=e,this.info=f,null!=d&&(this.align=d)}function j(a,b){for(var c=a.localVars;c;c=c.next)if(c.name==b)return!0}function k(a,b,c,d,e){var f=a.cc;for(_.state=a,_.stream=e,_.marked=null,_.cc=f,a.lexical.hasOwnProperty("align")||(a.lexical.align=!0);;){var g=f.length?f.pop():W?u:t;if(g(c,d)){for(;f.length&&f[f.length-1].lex;)f.pop()();return _.marked?_.marked:"variable"==c&&j(a,d)?"variable-2":b}}}function l(){for(var a=arguments.length-1;a>=0;a--)_.cc.push(arguments[a])}function m(){return l.apply(null,arguments),!0}function n(a){function b(b){for(var c=b;c;c=c.next)if(c.name==a)return!0;return!1}var c=_.state;if(c.context){if(_.marked="def",b(c.localVars))return;c.localVars={name:a,next:c.localVars}}else{if(b(c.globalVars))return;c.globalVars={name:a,next:c.globalVars}}}function o(){_.state.context={prev:_.state.context,vars:_.state.localVars},_.state.localVars=aa}function p(){_.state.localVars=_.state.context.vars,_.state.context=_.state.context.prev}function q(a,b){var c=function(){var c=_.state,d=c.indented;"stat"==c.lexical.type&&(d=c.lexical.indented),c.lexical=new i(d,_.stream.column(),a,null,c.lexical,b)};return c.lex=!0,c}function r(){var a=_.state;a.lexical.prev&&(")"==a.lexical.type&&(a.indented=a.lexical.indented),a.lexical=a.lexical.prev)}function s(a){return function(b){return b==a?m():";"==a?l():m(arguments.callee)}}function t(a){return"var"==a?m(q("vardef"),J,s(";"),r):"keyword a"==a?m(q("form"),u,t,r):"keyword b"==a?m(q("form"),t,r):"{"==a?m(q("}"),G,r):";"==a?m():"if"==a?m(q("form"),u,t,r,L):"function"==a?m(Q):"for"==a?m(q("form"),s("("),q(")"),M,s(")"),r,t,r):"variable"==a?m(q("stat"),B):"switch"==a?m(q("form"),u,q("}","switch"),s("{"),G,r,r):"case"==a?m(u,s(":")):"default"==a?m(s(":")):"catch"==a?m(q("form"),o,s("("),R,s(")"),t,r,p):l(q("stat"),u,s(";"),r)}function u(a){return w(a,!1)}function v(a){return w(a,!0)}function w(a,b){var c=b?A:z;return $.hasOwnProperty(a)?m(c):"function"==a?m(Q):"keyword c"==a?m(b?y:x):"("==a?m(q(")"),x,s(")"),r,c):"operator"==a?m(b?v:u):"["==a?m(q("]"),F(v,"]"),r,c):"{"==a?m(q("}"),F(D,"}"),r,c):m()}function x(a){return a.match(/[;\}\)\],]/)?l():l(u)}function y(a){return a.match(/[;\}\)\],]/)?l():l(v)}function z(a,b){return","==a?m(u):A(a,b,!1)}function A(a,b,c){var d=0==c?z:A,e=0==c?u:v;return"operator"==a?/\+\+|--/.test(b)?m(d):"?"==b?m(u,s(":"),e):m(e):";"!=a?"("==a?m(q(")","call"),F(v,")"),r,d):"."==a?m(C,d):"["==a?m(q("]"),x,s("]"),r,d):void 0:void 0}function B(a){return":"==a?m(r,t):l(z,s(";"),r)}function C(a){return"variable"==a?(_.marked="property",m()):void 0}function D(a,b){if("variable"==a){if(_.marked="property","get"==b||"set"==b)return m(E)}else("number"==a||"string"==a)&&(_.marked=a+" property");return $.hasOwnProperty(a)?m(s(":"),v):void 0}function E(a){return":"==a?m(u):"variable"!=a?m(s(":"),u):(_.marked="property",m(Q))}function F(a,b){function c(d){if(","==d){var e=_.state.lexical;return"call"==e.info&&(e.pos=(e.pos||0)+1),m(a,c)}return d==b?m():m(s(b))}return function(d){return d==b?m():l(a,c)}}function G(a){return"}"==a?m():l(t,G)}function H(a){return":"==a?m(I):l()}function I(a){return"variable"==a?(_.marked="variable-3",m()):l()}function J(a,b){return"variable"==a?(n(b),X?m(H,K):m(K)):l()}function K(a,b){return"="==b?m(v,K):","==a?m(J):void 0}function L(a,b){return"keyword b"==a&&"else"==b?m(q("form"),t,r):void 0}function M(a){return"var"==a?m(J,s(";"),O):";"==a?m(O):"variable"==a?m(N):l(u,s(";"),O)}function N(a,b){return"in"==b?m(u):m(z,O)}function O(a,b){return";"==a?m(P):"in"==b?m(u):l(u,s(";"),P)}function P(a){")"!=a&&m(u)}function Q(a,b){return"variable"==a?(n(b),m(Q)):"("==a?m(q(")"),o,F(R,")"),r,t,p):void 0}function R(a,b){return"variable"==a?(n(b),X?m(H):m()):void 0}var S,T,U=a.indentUnit,V=b.statementIndent,W=b.json,X=b.typescript,Y=function(){function a(a){return{type:a,style:"keyword"}}var b=a("keyword a"),c=a("keyword b"),d=a("keyword c"),e=a("operator"),f={type:"atom",style:"atom"},g={"if":a("if"),"while":b,"with":b,"else":c,"do":c,"try":c,"finally":c,"return":d,"break":d,"continue":d,"new":d,"delete":d,"throw":d,"var":a("var"),"const":a("var"),let:a("var"),"function":a("function"),"catch":a("catch"),"for":a("for"),"switch":a("switch"),"case":a("case"),"default":a("default"),"in":e,"typeof":e,"instanceof":e,"true":f,"false":f,"null":f,undefined:f,NaN:f,Infinity:f,"this":a("this")};if(X){var h={type:"variable",style:"variable-3"},i={"interface":a("interface"),"class":a("class"),"extends":a("extends"),constructor:a("constructor"),"public":a("public"),"private":a("private"),"protected":a("protected"),"static":a("static"),"super":a("super"),string:h,number:h,bool:h,any:h};for(var j in i)g[j]=i[j]}return g}(),Z=/[+\-*&%=<>!?|~^]/,$={atom:!0,number:!0,variable:!0,string:!0,regexp:!0,"this":!0},_={state:null,column:null,marked:null,cc:null},aa={name:"this",next:{name:"arguments"}};return r.lex=!0,{startState:function(a){return{tokenize:f,lastType:null,cc:[],lexical:new i((a||0)-U,0,"block",!1),localVars:b.localVars,globalVars:b.globalVars,context:b.localVars&&{vars:b.localVars},indented:0}},token:function(a,b){if(a.sol()&&(b.lexical.hasOwnProperty("align")||(b.lexical.align=!1),b.indented=a.indentation()),b.tokenize!=h&&a.eatSpace())return null;var c=b.tokenize(a,b);return"comment"==S?c:(b.lastType="operator"!=S||"++"!=T&&"--"!=T?S:"incdec",k(b,c,S,T,a))},indent:function(a,c){if(a.tokenize==h)return CodeMirror.Pass;if(a.tokenize!=f)return 0;for(var d=c&&c.charAt(0),e=a.lexical,g=a.cc.length-1;g>=0;--g){var i=a.cc[g];if(i==r)e=e.prev;else if(i!=L||/^else\b/.test(c))break}"stat"==e.type&&"}"==d&&(e=e.prev),V&&")"==e.type&&"stat"==e.prev.type&&(e=e.prev);var j=e.type,k=d==j;return"vardef"==j?e.indented+("operator"==a.lastType||","==a.lastType?4:0):"form"==j&&"{"==d?e.indented:"form"==j?e.indented+U:"stat"==j?e.indented+("operator"==a.lastType||","==a.lastType?V||U:0):"switch"!=e.info||k||0==b.doubleIndentSwitch?e.align?e.column+(k?0:1):e.indented+(k?0:U):e.indented+(/^(?:case|default)\b/.test(c)?U:2*U)},electricChars:":{}",blockCommentStart:W?null:"/*",blockCommentEnd:W?null:"*/",lineComment:W?null:"//",fold:"brace",helperType:W?"json":"javascript",jsonMode:W}}),CodeMirror.defineMIME("text/javascript","javascript"),CodeMirror.defineMIME("text/ecmascript","javascript"),CodeMirror.defineMIME("application/javascript","javascript"),CodeMirror.defineMIME("application/ecmascript","javascript"),CodeMirror.defineMIME("application/json",{name:"javascript",json:!0}),CodeMirror.defineMIME("application/x-json",{name:"javascript",json:!0}),CodeMirror.defineMIME("text/typescript",{name:"javascript",typescript:!0}),CodeMirror.defineMIME("application/typescript",{name:"javascript",typescript:!0}),CodeMirror.defineMode("markdown",function(a,b){function c(a,b,c){return b.f=b.inline=c,c(a,b)}function d(a,b,c){return b.f=b.block=c,c(a,b)}function e(a){return a.linkTitle=!1,a.em=!1,a.strong=!1,a.quote=0,q||a.f!=g||(a.f=k,a.block=f),a.trailingSpace=0,a.trailingSpaceNewLine=!1,a.thisLineHasContent=!1,null}function f(a,e){var f=e.list!==!1;if(e.list!==!1&&e.indentationDiff>=0?(e.indentationDiff<4&&(e.indentation-=e.indentationDiff),e.list=null):e.list!==!1&&e.indentation>0?(e.list=null,e.listDepth=Math.floor(e.indentation/4)):e.list!==!1&&(e.list=!1,e.listDepth=0),e.indentationDiff>=4)return e.indentation-=4,a.skipToEnd(),w;if(a.eatSpace())return null;if("#"===a.peek()||e.prevLineHasContent&&a.match(O))e.header=!0;else if(a.eat(">"))for(e.indentation++,e.quote=1,a.eatSpace();a.eat(">");)a.eatSpace(),e.quote++;else{if("["===a.peek())return c(a,e,m);if(a.match(K,!0))return C;if(e.prevLineHasContent&&!f||!a.match(L,!0)&&!a.match(M,!0)){if(b.fencedCodeBlocks&&a.match(/^```([\w+#]*)/,!0))return e.localMode=t(RegExp.$1),e.localMode&&(e.localState=e.localMode.startState()),d(a,e,h),w}else e.indentation+=4,e.list=!0,e.listDepth++,b.taskLists&&a.match(N,!1)&&(e.taskList=!0)}return c(a,e,e.inline)}function g(a,b){var c=r.token(a,b.htmlState);return q&&"tag"===c&&"openTag"!==b.htmlState.type&&!b.htmlState.context&&(b.f=k,b.block=f),b.md_inside&&-1!=a.current().indexOf(">")&&(b.f=k,b.block=f,b.htmlState.context=void 0),c}function h(a,b){return a.sol()&&a.match(/^```/,!0)?(b.localMode=b.localState=null,b.f=k,b.block=f,w):b.localMode?b.localMode.token(a,b.localState):(a.skipToEnd(),w)}function i(a){var b=[];if(a.taskOpen)return"meta";if(a.taskClosed)return"property";if(a.strong&&b.push(J),a.em&&b.push(I),a.linkText&&b.push(G),a.code&&b.push(w),a.header&&b.push(v),a.quote&&b.push(a.quote%2?x:y),a.list!==!1){var c=(a.listDepth-1)%3;c?1===c?b.push(A):b.push(B):b.push(z)}return a.trailingSpaceNewLine?b.push("trailing-space-new-line"):a.trailingSpace&&b.push("trailing-space-"+(a.trailingSpace%2?"a":"b")),b.length?b.join(" "):null}function j(a,b){return a.match(P,!0)?i(b):void 0}function k(a,e){var f=e.text(a,e);if("undefined"!=typeof f)return f;if(e.list)return e.list=null,i(e);if(e.taskList){var h="x"!==a.match(N,!0)[1];return h?e.taskOpen=!0:e.taskClosed=!0,e.taskList=!1,i(e)}e.taskOpen=!1,e.taskClosed=!1;var j=a.next();if("\\"===j)return a.next(),i(e);if(e.linkTitle){e.linkTitle=!1;var k=j;"("===j&&(k=")"),k=(k+"").replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1");var m="^\\s*(?:[^"+k+"\\\\]+|\\\\\\\\|\\\\.)"+k;if(a.match(new RegExp(m),!0))return H}if("`"===j){var n=i(e),o=a.pos;a.eatWhile("`");var q=1+a.pos-o;return e.code?q===u?(e.code=!1,n):i(e):(u=q,e.code=!0,i(e))}if(e.code)return i(e);if("!"===j&&a.match(/\[[^\]]*\] ?(?:\(|\[)/,!1))return a.match(/\[[^\]]*\]/),e.inline=e.f=l,D;if("["===j&&a.match(/.*\](\(| ?\[)/,!1))return e.linkText=!0,i(e);if("]"===j&&e.linkText){var r=i(e);return e.linkText=!1,e.inline=e.f=l,r}if("<"===j&&a.match(/^(https?|ftps?):\/\/(?:[^\\>]|\\.)+>/,!1))return c(a,e,p(E,">"));if("<"===j&&a.match(/^[^> \\]+@(?:[^\\>]|\\.)+>/,!1))return c(a,e,p(F,">"));if("<"===j&&a.match(/^\w/,!1)){if(-1!=a.string.indexOf(">")){var s=a.string.substring(1,a.string.indexOf(">"));/markdown\s*=\s*('|"){0,1}1('|"){0,1}/.test(s)&&(e.md_inside=!0)}return a.backUp(1),d(a,e,g)}if("<"===j&&a.match(/^\/\w*?>/))return e.md_inside=!1,"tag";var t=!1;if(!b.underscoresBreakWords&&"_"===j&&"_"!==a.peek()&&a.match(/(\w)/,!1)){var v=a.pos-2;if(v>=0){var w=a.string.charAt(v);"_"!==w&&w.match(/(\w)/,!1)&&(t=!0)}}var n=i(e);if("*"===j||"_"===j&&!t){if(e.strong===j&&a.eat(j))return e.strong=!1,n;if(!e.strong&&a.eat(j))return e.strong=j,i(e);if(e.em===j)return e.em=!1,n;if(!e.em)return e.em=j,i(e)}else if(" "===j&&(a.eat("*")||a.eat("_"))){if(" "===a.peek())return i(e);a.backUp(1)}return" "===j&&(a.match(/ +$/,!1)?e.trailingSpace++:e.trailingSpace&&(e.trailingSpaceNewLine=!0)),i(e)}function l(a,b){if(a.eatSpace())return null;var d=a.next();return"("===d||"["===d?c(a,b,p(H,"("===d?")":"]")):"error"}function m(a,b){return a.match(/^[^\]]*\]:/,!0)?(b.f=n,G):c(a,b,k)}function n(a,b){return a.eatSpace()?null:(a.match(/^[^\s]+/,!0),void 0===a.peek()?b.linkTitle=!0:a.match(/^(?:\s+(?:"(?:[^"\\]|\\\\|\\.)+"|'(?:[^'\\]|\\\\|\\.)+'|\((?:[^)\\]|\\\\|\\.)+\)))?/,!0),b.f=b.inline=k,H)}function o(a){return Q[a]||(a=(a+"").replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1"),Q[a]=new RegExp("^(?:[^\\\\]|\\\\.)*?("+a+")")),Q[a]}function p(a,b,c){return c=c||k,
function(d,e){return d.match(o(b)),e.inline=e.f=c,a}}var q=CodeMirror.modes.hasOwnProperty("xml"),r=CodeMirror.getMode(a,q?{name:"xml",htmlMode:!0}:"text/plain"),s={html:"htmlmixed",js:"javascript",json:"application/json",c:"text/x-csrc","c++":"text/x-c++src",java:"text/x-java",csharp:"text/x-csharp","c#":"text/x-csharp",scala:"text/x-scala"},t=function(){var b,c,d={},e={},f=[];for(var g in CodeMirror.modes)CodeMirror.modes.propertyIsEnumerable(g)&&f.push(g);for(b=0;b<f.length;b++)d[f[b]]=f[b];var h=[];for(var g in CodeMirror.mimeModes)CodeMirror.mimeModes.propertyIsEnumerable(g)&&h.push({mime:g,mode:CodeMirror.mimeModes[g]});for(b=0;b<h.length;b++)c=h[b].mime,e[c]=h[b].mime;for(var i in s)(s[i]in d||s[i]in e)&&(d[i]=s[i]);return function(b){return d[b]?CodeMirror.getMode(a,d[b]):null}}();void 0===b.underscoresBreakWords&&(b.underscoresBreakWords=!0),void 0===b.fencedCodeBlocks&&(b.fencedCodeBlocks=!1),void 0===b.taskLists&&(b.taskLists=!1);var u=0,v="header",w="comment",x="atom",y="number",z="variable-2",A="variable-3",B="keyword",C="hr",D="tag",E="link",F="link",G="link",H="string",I="em",J="strong",K=/^([*\-=_])(?:\s*\1){2,}\s*$/,L=/^[*\-+]\s+/,M=/^[0-9]+\.\s+/,N=/^\[(x| )\](?=\s)/,O=/^(?:\={1,}|-{1,})$/,P=/^[^!\[\]*_\\<>` "'(]+/,Q=[];return{startState:function(){return{f:f,prevLineHasContent:!1,thisLineHasContent:!1,block:f,htmlState:CodeMirror.startState(r),indentation:0,inline:k,text:j,linkText:!1,linkTitle:!1,em:!1,strong:!1,header:!1,taskList:!1,list:!1,listDepth:0,quote:0,trailingSpace:0,trailingSpaceNewLine:!1,parentIndentation:0}},copyState:function(a){return{f:a.f,prevLineHasContent:a.prevLineHasContent,thisLineHasContent:a.thisLineHasContent,block:a.block,htmlState:CodeMirror.copyState(r,a.htmlState),indentation:a.indentation,localMode:a.localMode,localState:a.localMode?CodeMirror.copyState(a.localMode,a.localState):null,inline:a.inline,text:a.text,linkTitle:a.linkTitle,em:a.em,strong:a.strong,header:a.header,taskList:a.taskList,list:a.list,listDepth:a.listDepth,quote:a.quote,trailingSpace:a.trailingSpace,trailingSpaceNewLine:a.trailingSpaceNewLine,parentIndentation:a.parentIndentation,md_inside:a.md_inside}},token:function(a,b){if(a.sol()){if(a.match(/^\s*$/,!0))return b.prevLineHasContent=!1,e(b);b.prevLineHasContent=b.thisLineHasContent,b.thisLineHasContent=!0,b.header=!1,b.taskList=!1,b.code=!1,b.trailingSpace=0,b.trailingSpaceNewLine=!1,b.f=b.block;var c=a.match(/^\s*/,!0)[0].replace(/\t/g,"    ").length-b.parentIndentation,d=4*Math.floor((c-b.indentation-b.parentIndentation)/4);d>4&&(d=4);var f=b.indentation+d-b.parentIndentation;if(b.indentationDiff=f-b.indentation-b.parentIndentation,b.indentation=f,c>0)return null}return b.f(a,b)},blankLine:e,getType:i}},"xml"),CodeMirror.defineMIME("text/x-markdown","markdown"),CodeMirror.overlayMode=CodeMirror.overlayParser=function(a,b,c){return{startState:function(){return{base:CodeMirror.startState(a),overlay:CodeMirror.startState(b),basePos:0,baseCur:null,overlayPos:0,overlayCur:null}},copyState:function(c){return{base:CodeMirror.copyState(a,c.base),overlay:CodeMirror.copyState(b,c.overlay),basePos:c.basePos,baseCur:null,overlayPos:c.overlayPos,overlayCur:null}},token:function(d,e){return d.start==e.basePos&&(e.baseCur=a.token(d,e.base),e.basePos=d.pos),d.start==e.overlayPos&&(d.pos=d.start,e.overlayCur=b.token(d,e.overlay),e.overlayPos=d.pos),d.pos=Math.min(e.basePos,e.overlayPos),d.eol()&&(e.basePos=e.overlayPos=0),null==e.overlayCur?e.baseCur:null!=e.baseCur&&c?e.baseCur+" "+e.overlayCur:e.overlayCur},indent:a.indent&&function(b,c){return a.indent(b.base,c)},electricChars:a.electricChars,innerMode:function(b){return{state:b.base,mode:a}},blankLine:function(c){a.blankLine&&a.blankLine(c.base),b.blankLine&&b.blankLine(c.overlay)}}},function(){"use strict";function a(a,b,c){this.cm=a,this.getHints=b,this.options=c,this.widget=this.onClose=null}function b(a){return"string"==typeof a?a:a.text}function c(a,b){function c(a,c){var f;f="string"!=typeof c?function(a){return c(a,b)}:d.hasOwnProperty(c)?d[c]:c,e[a]=f}var d={Up:function(){b.moveFocus(-1)},Down:function(){b.moveFocus(1)},PageUp:function(){b.moveFocus(-b.menuSize())},PageDown:function(){b.moveFocus(b.menuSize())},Home:function(){b.setFocus(0)},End:function(){b.setFocus(b.length)},Enter:b.pick,Esc:b.close},e=a.customKeys?{}:d;if(a.customKeys)for(var f in a.customKeys)a.customKeys.hasOwnProperty(f)&&c(f,a.customKeys[f]);if(a.extraKeys)for(var f in a.extraKeys)a.extraKeys.hasOwnProperty(f)&&c(f,a.extraKeys[f]);return e}function d(a,d){this.completion=a,this.data=d,this.options=a.options||{};var f=this,g=a.cm,h=a.options,i=this.hints=document.createElement("ul");i.className="CodeMirror-hints",this.selectedHint=0;for(var j=d.list,k=0;k<j.length;++k){var l=i.appendChild(document.createElement("li")),m=j[k],n="CodeMirror-hint"+(k?"":" CodeMirror-hint-active");null!=m.className&&(n=m.className+" "+n),l.className=n,m.render?m.render(l,d,m):l.appendChild(document.createTextNode(m.displayText||b(m))),l.hintId=k}var o=g.cursorCoords(h.alignWithWord!==!1?d.from:null),p=o.left,q=o.bottom,r=!0;i.style.left=p+"px",i.style.top=q+"px",this.options.ghosting&&(i.style.display=j.length>1?"block":"none");var s=window.innerWidth||Math.max(document.body.offsetWidth,document.documentElement.offsetWidth),t=window.innerHeight||Math.max(document.body.offsetHeight,document.documentElement.offsetHeight),u=i.getBoundingClientRect(),v=u.right-s,w=u.bottom-t;if(v>0&&(u.right-u.left>s&&(i.style.width=s-5+"px",v-=u.right-u.left-s),i.style.left=(p=o.left-v)+"px"),w>0){var x=u.bottom-u.top;u.top-(o.bottom-o.top)-x>0?(w=x+(o.bottom-o.top),r=!1):x>t&&(i.style.height=t-5+"px",w-=x-t),i.style.top=(q=o.bottom-w)+"px"}if((h.container||document.body).appendChild(i),g.addKeyMap(this.keyMap=c(h,{moveFocus:function(a){f.changeActive(f.selectedHint+a)},setFocus:function(a){f.changeActive(a)},menuSize:function(){return f.screenAmount()},length:j.length,close:function(){a.close()},pick:function(){f.pick()}})),h.closeOnUnfocus!==!1){var y;g.on("blur",this.onBlur=function(){y=setTimeout(function(){a.close()},100)}),g.on("focus",this.onFocus=function(){clearTimeout(y)})}var z=g.getScrollInfo();return g.on("scroll",this.onScroll=function(){var b=g.getScrollInfo(),c=g.getWrapperElement().getBoundingClientRect(),d=q+z.top-b.top,e=d-(window.pageYOffset||(document.documentElement||document.body).scrollTop);return r||(e+=i.offsetHeight),e<=c.top||e>=c.bottom?a.close():(i.style.top=d+"px",void(i.style.left=p+z.left-b.left+"px"))}),CodeMirror.on(i,"dblclick",function(a){var b=f.getHintElement(i,a.target||a.srcElement);b&&null!=b.hintId&&(f.changeActive(b.hintId),f.pick())}),CodeMirror.on(i,"click",function(a){var b=f.getHintElement(i,a.target||a.srcElement);b&&null!=b.hintId&&f.changeActive(b.hintId)}),CodeMirror.on(i,"mousedown",function(){setTimeout(function(){g.focus()},20)}),CodeMirror.signal(d,"select",j[0],i.firstChild),this.options.ghosting&&this.data.list[0]&&(this.removeGhost(),this.ghost=new e(this,this.data,this.data.list[0].displayText,this.pick.bind(this))),!0}function e(a,b,c,d){var e=this;if(this.cm=a.completion.cm,this.data=b,this.widget=a,this.completion=a.completion,this.cm.addKeyMap(this.keyMap={Tab:d||function(){e.accept()},Right:d||function(){e.accept()}}),!c)return this.remove();var f=this.suffix=c.substr(b.word.length);if(!f.length)return this.remove();var g=document.createElement("span");g.className="CodeMirror-hint-ghost",g.appendChild(document.createTextNode(f)),this._ghost=this.cm.setBookmark(this.data.to,{widget:g,insertLeft:!0})}CodeMirror.showHint=function(b,c,d){if(!b.somethingSelected()&&(null==c&&(c=b.getHelper(b.getCursor(),"hint")),null!=c)){b.state.completionActive&&b.state.completionActive.close();var e=b.state.completionActive=new a(b,c,d||{});return CodeMirror.signal(b,"startCompletion",b),e.options.async?void c(b,function(a){e.showHints(a)},e.options):e.showHints(c(b,e.options))}},a.prototype={close:function(){this.active()&&(this.widget&&this.widget.close(),this.onClose&&this.onClose(),this.cm.state.completionActive=null,CodeMirror.signal(this.cm,"endCompletion",this.cm))},active:function(){return this.cm.state.completionActive==this},pick:function(a,c){var d=a.list[c];d.hint?d.hint(this.cm,a,d):this.cm.replaceRange(b(d),a.from,a.to),this.close()},showHints:function(a){return a&&a.list.length&&this.active()?void(this.options.ghosting||0==this.options.completeSingle||1!=a.list.length?this.showWidget(a):this.pick(a,0)):this.close()},showWidget:function(a){function b(){h||(h=!0,j.close(),j.cm.off("cursorActivity",g),CodeMirror.signal(a,"close"))}function c(){return h?!0:j.widget?void 0:(b(),!0)}function e(){c()||(j.options.async?j.getHints(j.cm,f,j.options):f(j.getHints(j.cm,j.options)))}function f(a){if(!c()){if(!a||!a.list.length)return b();j.widget.close(),j.widget=new d(j,a)}}function g(){clearTimeout(i);var a=j.cm.getCursor(),b=j.cm.getLine(a.line);a.line!=l.line||b.length-a.ch!=m-l.ch||a.ch<l.ch||j.cm.somethingSelected()||a.ch&&k.test(b.charAt(a.ch-1))?j.close():i=setTimeout(e,170)}this.widget=new d(this,a),CodeMirror.signal(a,"shown");var h,i=null,j=this,k=this.options.closeCharacters||/[\s()\[\]{};:>,]/,l=this.cm.getCursor(),m=this.cm.getLine(l.line).length;this.cm.on("cursorActivity",g),this.onClose=b}},d.prototype={close:function(){if(this.completion.widget==this){this.completion.widget=null,this.hints.parentNode.removeChild(this.hints),this.completion.cm.removeKeyMap(this.keyMap),this.removeGhost();var a=this.completion.cm;this.options.closeOnUnfocus!==!1&&(a.off("blur",this.onBlur),a.off("focus",this.onFocus)),a.off("scroll",this.onScroll)}},pick:function(){this.completion.pick(this.data,this.selectedHint)},changeActive:function(a){if(a=Math.max(0,Math.min(a,this.data.list.length-1)),this.selectedHint!=a){var b=this.hints.childNodes[this.selectedHint];b.className=b.className.replace(" CodeMirror-hint-active",""),b=this.hints.childNodes[this.selectedHint=a],b.className+=" CodeMirror-hint-active",this.options.ghosting&&(this.removeGhost(),this.ghost=new e(this,this.data,this.data.list[a].displayText,this.pick.bind(this))),b.offsetTop<this.hints.scrollTop?this.hints.scrollTop=b.offsetTop-3:b.offsetTop+b.offsetHeight>this.hints.scrollTop+this.hints.clientHeight&&(this.hints.scrollTop=b.offsetTop+b.offsetHeight-this.hints.clientHeight+3),CodeMirror.signal(this.data,"select",this.data.list[this.selectedHint],b)}},screenAmount:function(){return Math.floor(this.hints.clientHeight/this.hints.firstChild.offsetHeight)||1},removeGhost:function(){return this.ghost?(this.ghost.remove(),this):void 0},getHintElement:function(a,b){for(;b&&b!==a&&!this.isHintElement(b);)b=b.parentNode;return b===a?void 0:b},isHintElement:function(a){return a.nodeName&&"LI"===a.nodeName.toUpperCase()&&-1!==a.className.split(/\s/).indexOf("CodeMirror-hint")}},e.prototype={accept:function(){return this.suffix&&this.data&&this.cm.replaceRange(this.suffix,this.data.to,this.data.to),this.remove()},remove:function(){return this._ghost&&this._ghost.clear(),this.cm.removeKeyMap(this.keyMap),delete this.ghost,delete this.suffix,delete this.widget.ghost,this}}}(),CodeMirror.defineMode("xml",function(a,b){function c(a,b){function c(c){return b.tokenize=c,c(a,b)}var e=a.next();if("<"==e){if(a.eat("!"))return a.eat("[")?a.match("CDATA[")?c(f("atom","]]>")):null:a.match("--")?c(f("comment","-->")):a.match("DOCTYPE",!0,!0)?(a.eatWhile(/[\w\._\-]/),c(g(1))):null;if(a.eat("?"))return a.eatWhile(/[\w\._\-]/),b.tokenize=f("meta","?>"),"meta";var h=a.eat("/");t="";for(var i;i=a.eat(/[^\s\u00a0=<>\"\'\/?]/);)t+=i;return t?(u=h?"closeTag":"openTag",b.tokenize=d,"tag"):"error"}if("&"==e){var j;return j=a.eat("#")?a.eat("x")?a.eatWhile(/[a-fA-F\d]/)&&a.eat(";"):a.eatWhile(/[\d]/)&&a.eat(";"):a.eatWhile(/[\w\.\-:]/)&&a.eat(";"),j?"atom":"error"}return a.eatWhile(/[^&<]/),null}function d(a,b){var d=a.next();return">"==d||"/"==d&&a.eat(">")?(b.tokenize=c,u=">"==d?"endTag":"selfcloseTag","tag"):"="==d?(u="equals",null):"<"==d?"error":/[\'\"]/.test(d)?(b.tokenize=e(d),b.stringStartCol=a.column(),b.tokenize(a,b)):(a.eatWhile(/[^\s\u00a0=<>\"\']/),"word")}function e(a){var b=function(b,c){for(;!b.eol();)if(b.next()==a){c.tokenize=d;break}return"string"};return b.isInAttribute=!0,b}function f(a,b){return function(d,e){for(;!d.eol();){if(d.match(b)){e.tokenize=c;break}d.next()}return a}}function g(a){return function(b,d){for(var e;null!=(e=b.next());){if("<"==e)return d.tokenize=g(a+1),d.tokenize(b,d);if(">"==e){if(1==a){d.tokenize=c;break}return d.tokenize=g(a-1),d.tokenize(b,d)}}return"meta"}}function h(){for(var a=arguments.length-1;a>=0;a--)v.cc.push(arguments[a])}function i(){return h.apply(null,arguments),!0}function j(a,b){var c=B.doNotIndent.hasOwnProperty(a)||v.context&&v.context.noIndent;v.context={prev:v.context,tagName:a,indent:v.indented,startOfLine:b,noIndent:c}}function k(){v.context&&(v.context=v.context.prev)}function l(a){if("openTag"==a)return v.tagName=t,v.tagStart=w.column(),i(p,m(v.startOfLine));if("closeTag"==a){var b=!1;return v.context?v.context.tagName!=t&&(B.implicitlyClosed.hasOwnProperty(v.context.tagName.toLowerCase())&&k(),b=!v.context||v.context.tagName!=t):b=!0,b&&(x="error"),i(n(b))}return i()}function m(a){return function(b){var c=v.tagName;return v.tagName=v.tagStart=null,"selfcloseTag"==b||"endTag"==b&&B.autoSelfClosers.hasOwnProperty(c.toLowerCase())?(o(c.toLowerCase()),i()):"endTag"==b?(o(c.toLowerCase()),j(c,a),i()):i()}}function n(a){return function(b){return a&&(x="error"),"endTag"==b?(k(),i()):(x="error",i(arguments.callee))}}function o(a){for(var b;;){if(!v.context)return;if(b=v.context.tagName.toLowerCase(),!B.contextGrabbers.hasOwnProperty(b)||!B.contextGrabbers[b].hasOwnProperty(a))return;k()}}function p(a){return"word"==a?(x="attribute",i(q,p)):"endTag"==a||"selfcloseTag"==a?h():(x="error",i(p))}function q(a){if("equals"==a)return i(r,p);if(B.allowMissing){if("word"==a)return x="attribute",i(q,p)}else x="error";return"endTag"==a||"selfcloseTag"==a?h():i()}function r(a){return"string"==a?i(s):"word"==a&&B.allowUnquoted?(x="string",i()):(x="error","endTag"==a||"selfCloseTag"==a?h():i())}function s(a){return"string"==a?i(s):h()}var t,u,v,w,x,y=a.indentUnit,z=b.multilineTagIndentFactor||1,A=b.multilineTagIndentPastTag||!0,B=b.htmlMode?{autoSelfClosers:{area:!0,base:!0,br:!0,col:!0,command:!0,embed:!0,frame:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0},implicitlyClosed:{dd:!0,li:!0,optgroup:!0,option:!0,p:!0,rp:!0,rt:!0,tbody:!0,td:!0,tfoot:!0,th:!0,tr:!0},contextGrabbers:{dd:{dd:!0,dt:!0},dt:{dd:!0,dt:!0},li:{li:!0},option:{option:!0,optgroup:!0},optgroup:{optgroup:!0},p:{address:!0,article:!0,aside:!0,blockquote:!0,dir:!0,div:!0,dl:!0,fieldset:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,menu:!0,nav:!0,ol:!0,p:!0,pre:!0,section:!0,table:!0,ul:!0},rp:{rp:!0,rt:!0},rt:{rp:!0,rt:!0},tbody:{tbody:!0,tfoot:!0},td:{td:!0,th:!0},tfoot:{tbody:!0},th:{td:!0,th:!0},thead:{tbody:!0,tfoot:!0},tr:{tr:!0}},doNotIndent:{pre:!0},allowUnquoted:!0,allowMissing:!0}:{autoSelfClosers:{},implicitlyClosed:{},contextGrabbers:{},doNotIndent:{},allowUnquoted:!1,allowMissing:!1},C=b.alignCDATA;return{startState:function(){return{tokenize:c,cc:[],indented:0,startOfLine:!0,tagName:null,tagStart:null,context:null}},token:function(a,b){if(!b.tagName&&a.sol()&&(b.startOfLine=!0,b.indented=a.indentation()),a.eatSpace())return null;x=u=t=null;var c=b.tokenize(a,b);if(b.type=u,(c||u)&&"comment"!=c)for(v=b,w=a;;){var d=b.cc.pop()||l;if(d(u||c))break}return b.startOfLine=!1,x||c},indent:function(a,b,e){var f=a.context;if(a.tokenize.isInAttribute)return a.stringStartCol+1;if(a.tokenize!=d&&a.tokenize!=c||f&&f.noIndent)return e?e.match(/^(\s*)/)[0].length:0;if(a.tagName)return A?a.tagStart+a.tagName.length+2:a.tagStart+y*z;if(C&&/<!\[CDATA\[/.test(b))return 0;for(f&&/^<\//.test(b)&&(f=f.prev);f&&!f.startOfLine;)f=f.prev;return f?f.indent+y:0},electricChars:"/",blockCommentStart:"<!--",blockCommentEnd:"-->",configuration:b.htmlMode?"html":"xml",helperType:b.htmlMode?"html":"xml"}}),CodeMirror.defineMIME("text/xml","xml"),CodeMirror.defineMIME("application/xml","xml"),CodeMirror.mimeModes.hasOwnProperty("text/html")||CodeMirror.defineMIME("text/html",{name:"xml",htmlMode:!0}),function(){"use strict";angular.module("ramlEditorApp",["ui.bootstrap.modal","ui.bootstrap.tpls","ui.tree","ramlConsoleApp","codeMirror","fs","raml","stringFilters","utils","lightweightDOM","splitter","validate","autoFocus","rightClick","dragAndDrop"]).run(["$window",function(a){a.RAML.Settings.proxy="/proxy/"}])}(),Array.prototype.find||(Array.prototype.find=function(a){for(var b=0,c=this.length;c>b;b++){var d=this[b];if(a(d))return d}return void 0}),Array.prototype.includes||(Array.prototype.includes=function(a){for(var b=0,c=this.length;c>b;b++){var d=this[b];if(d===a)return!0}return!1}),String.prototype.startsWith||(String.prototype.startsWith=function(a){return 0===this.indexOf(a)}),String.prototype.endsWith||(String.prototype.endsWith=function(a){return this.lastIndexOf(a)===this.length-a.length}),function(){"use strict";angular.module("utils",[]).value("indentUnit",2).factory("safeApply",["$rootScope","$exceptionHandler",function(a,b){return function(c,d){if(c=c||a,-1===["$apply","$digest"].indexOf(c.$root&&c.$root.$$phase||c.$$phase))return c.$apply(d);try{return c.$eval(d)}catch(e){b(e)}}}]).factory("safeApplyWrapper",["safeApply",function(a){return function(b,c){return function(){var d=Array.prototype.slice.call(arguments,0);return a(b,function(){return c.apply(this,d)})}}}]).factory("getTime",function(){return Date.now||function(){return(new Date).getTime()}}).factory("debounce",["$timeout","$q",function(a,b){return function(c,d){var e=null,f=b.defer();return function(){var g=this,h=arguments,i=function(){e=null,f.resolve(c.apply(g,h)),f=b.defer()};return e&&a.cancel(e),e=a(i,d),f.promise}}}]).value("generateSpaces",function(a){return a=a||0,new Array(a+1).join(" ")}).factory("generateTabs",["generateSpaces","indentUnit",function(a,b){return function(c,d){return d=d||b,c=c||0,new Array(c+1).join(a(b))}}]).value("$prompt",function(a,b){return window.prompt(a,b)}).value("$confirm",function(a){return window.confirm(a)}).factory("generateName",function(){return function(a,b,c){c=c?"."+c:"";var d=Math.max.apply(void 0,a.map(function(a){var c=new RegExp(b+"(\\d+)"),d=a.match(c);return d?d[1]:0}).concat(0));return b+(d+1)+c}}).factory("scroll",function(){function a(a){a=a||window.event,a.preventDefault?a.preventDefault():a.returnValue=!1}function b(b){d[b.keyCode]&&a(b)}function c(b){a(b)}var d={37:!0,38:!0,39:!0,40:!0};return{enable:function(){window.removeEventListener&&window.removeEventListener("DOMMouseScroll",c,!1),window.onmousewheel=document.onmousewheel=document.onkeydown=null},disable:function(){window.addEventListener&&window.addEventListener("DOMMouseScroll",c,!1),window.onmousewheel=document.onmousewheel=c,document.onkeydown=b}}}).factory("resolveUri",["$window",function(a){return function(b){return/^\w+:\/\//.test(b)?b:"/"===b[0]?a.location.origin+b:a.location.origin+a.location.pathname.split("/").slice(0,-1).concat(b).join("/")}}])}(),function(){"use strict";angular.module("raml").value("config",{set:function(a,b){localStorage["config."+a]=b},get:function(a,b){return a="config."+a,a in localStorage?localStorage[a]:b},remove:function(a){delete localStorage["config."+a]},clear:function(){localStorage.clear()}})}(),function(){"use strict";angular.module("lightweightDOM",["lightweightParse"]).factory("getNode",["getSpaceCount","getTabCount","getLineIndent","isArrayStarter","isCommentStarter","extractKeyValue",function(a,b,c,d,e,f){function g(a,b,f){this.editor=a,this.lineNumber=b,this.line=f,this.lineIndent=c(this.line,a.getOption("indentUnit")),this.isEmpty=this.lineIndent.spaceCount===this.line.length,this.isComment=!this.isEmpty&&e(this.line),this.isArrayStarter=!this.isComment&&d(this.line),this.isStructural=!this.isEmpty&&!this.isComment}function h(b,c){var d=b.getCursor(),e=arguments.length>1?c:d.line,f=b.getLine(e),h=i[e];if(void 0===f)return null;if(d.line===e){var j=a(f);(j===f.length||"#"===f[j])&&(f=f.slice(0,d.ch))}return h&&h.line===f||(h=i[e]=new g(b,e,f)),h}var i={};return g.prototype.getKeyValue=function(){return this.keyValue||(this.keyValue=f(this.line)),this.keyValue},g.prototype.getKey=function(){return this.getKeyValue().key},g.prototype.getValue=function(){return this.getKeyValue().value},g.prototype.getNextSibling=function(){for(var a=this.lineNumber;;){var b=h(this.editor,++a);if(null===b)return null;if(b.isStructural){if(b.lineIndent.tabCount===this.lineIndent.tabCount)return b;if(this.isArrayStarter&&!b.isArrayStarter&&b.lineIndent.tabCount===this.lineIndent.tabCount+1)return b;if(!this.isArrayStarter&&b.isArrayStarter&&b.lineIndent.tabCount===this.lineIndent.tabCount-1)return b;if(b.lineIndent.tabCount<this.lineIndent.tabCount)return null}}},g.prototype.getPreviousSibling=function(){for(var a=this.lineNumber;;){a-=1;var b=h(this.editor,a);if(null===b)return null;if(b.isStructural){if(b.lineIndent.tabCount===this.lineIndent.tabCount)return b;if(this.isArrayStarter&&!b.isArrayStarter&&b.lineIndent.tabCount===this.lineIndent.tabCount+1)return b;if(!this.isArrayStarter&&b.isArrayStarter&&b.lineIndent.tabCount===this.lineIndent.tabCount-1)return b;if(b.lineIndent.tabCount<this.lineIndent.tabCount)return null}}},g.prototype.getFirstChild=function(){for(var a=this.lineIndent.tabCount+(this.isArrayStarter?2:1),b=this.lineNumber;;){var c=h(this.editor,++b);if(null===c)return null;if(c.lineIndent.tabCount<a)return null;if(c.lineIndent.tabCount>=a&&c.isStructural)return c}},g.prototype.getParent=function(){for(var a=this.lineIndent.tabCount-(!this.isArrayStarter&&this.getIsInArray()?2:1),b=this.lineNumber;;){var c=h(this.editor,--b);if(null===c)return null;if(c.lineIndent.tabCount<=a&&c.isStructural)return c}},g.prototype.getChildren=function(){for(var a=[],b=this.getFirstChild();null!==b;)a.push(b),b=b.getNextSibling();return a},g.prototype.getSelfAndNeighbors=function(){for(var a=[],b=this.getIsInArray(),c=this;c&&c.getIsInArray()===b&&(a.push(c),!c.isArrayStarter);)c=c.getPreviousSibling();for(c=this.getNextSibling();c&&!c.isArrayStarter&&c.getIsInArray()===b;)a.push(c),c=c.getNextSibling();return a},g.prototype.getIsInArray=function(){if(this.isArrayStarter)return!0;for(var a=this.getPreviousSibling();a&&a.lineIndent.tabCount>=this.lineIndent.tabCount;)a=a.getPreviousSibling();return!(!a||!a.isArrayStarter||a.lineIndent.tabCount!==this.lineIndent.tabCount-1)},g.prototype.getPath=function(){for(var a=[],b=this;b=b.getParent();)a.unshift(b);return a},g.prototype.selfOrParent=function(a){return this.first(this.getParent,a)},g.prototype.selfOrPrevious=function(a){return this.first(this.getPreviousSibling,a)},g.prototype.first=function(a,b){for(var c=this;c;){if(b(c))return c;c=a.apply(c)}return null},h}])}(),function(){"use strict";angular.module("lightweightParse",["utils"]).factory("getSpaceCount",function(){return function(a){for(var b=0,c=a.length;c>b&&" "===a[b];b++);return b}}).factory("getTabCount",["indentUnit",function(a){return function(b,c){return c=c||a,Math.floor(b/c)}}]).factory("getLineIndent",["getSpaceCount","getTabCount",function(a,b){return function(c,d){var e=a(c);return{spaceCount:e,tabCount:b(e,d),content:e?c.slice(e):c}}}]).factory("isArrayStarter",["getSpaceCount",function(a){return function(b){var c=a(b);return"-"===b[c]&&" "===b[c+1]}}]).factory("isCommentStarter",["getSpaceCount",function(a){return function(b){var c=a(b);return"#"===b[c]}}]).factory("extractKeyValue",function(){function a(a,b,c){for(b=b||0,c=c||a.length,0>b&&(b=a.length+b),0>c&&(c=a.length+c);c>b&&" "===a[b];)b+=1;for(;c>b&&" "===a[c-1];)c-=1;return 0===b&&c===a.length?a:a.slice(b,c)}function b(a){return a?{text:a,isAlias:"&"===a[0],isReference:"*"===a[0]}:null}return function(c){var d=0,e=c.length,f=c.indexOf("#");return-1!==f&&(e=f),f=c.indexOf("- "),-1!==f&&e>f&&(d=f+2),f=c.indexOf(": ",d),-1!==f&&e>f?{key:a(c,d,f),value:b(a(c,f+2,e))}:(f=c.lastIndexOf(":",e),f===e-1?{key:a(c,d,e-1),value:null}:{key:null,value:b(a(c,d,e))})}}).factory("getScopes",["getLineIndent",function(a){function b(a,b){if(void 0===a||void 0===b)return!1;if(a.length!==b.length)return!1;for(var c=0;c<a.length;c++)if(a[c]!==b[c])return!1;return!0}var c;return function(d){if(c&&b(c.key,d))return c.value;var e={},f=d.map(function(b,c){var d=a(b);return{tabCount:d.tabCount,content:d.content,lineNumber:c}}),g=f.reduce(function(a,b){var c,d,f=e[b.tabCount-1];if(f)c=f.length-1,d=e[b.tabCount-1][c];else{if(b.tabCount>1)return f=e[b.tabCount-2],f&&(c=f.length-1,d=e[b.tabCount-2][c],a[d]=a[d]||[],a[d].push({lineNumber:b.lineNumber,content:b.content,tabCount:b.tabCount}),e[b.tabCount-1]=e[b.tabCount-1]||[],e[b.tabCount-1].push(b.lineNumber)),a;d=0}return a[d]=a[d]||[],a[d].push({lineNumber:b.lineNumber,content:b.content,tabCount:b.tabCount}),e[b.tabCount]=e[b.tabCount]||[],e[b.tabCount].push(b.lineNumber),a},{});return c={result:{scopeLevels:e,scopesByLine:g},lines:d},{scopeLevels:e,scopesByLine:g}}}])}(),function(){"use strict";angular.module("codeFolding",["raml","lightweightParse"]).factory("getFoldRange",["getLineIndent",function(a){return function(b,c){var d,e=b.getLine(c.line),f=a(e);if(f.content){var g=b.getLine(c.line+1);if(g){var h=f.tabCount,i=a(g).tabCount;if(i>h)for(var j=c.line+2,k=b.lineCount();k>j;j++){if(g=b.getLine(j),d=a(g),i=d.tabCount,h>=i&&d.content)return g=b.getLine(j-1),{from:CodeMirror.Pos(c.line,e.length),to:CodeMirror.Pos(j-1,g.length)};if(j===k-1)return g=b.getLine(k-1),{from:CodeMirror.Pos(c.line,e.length),to:CodeMirror.Pos(k-1,g.length)}}}}}}])}(),function(){"use strict";angular.module("codeMirror",["raml","ramlEditorApp","codeFolding"]).factory("codeMirror",["$rootScope","ramlSuggest","codeMirrorHighLight","generateSpaces","generateTabs","getFoldRange","isArrayStarter","getSpaceCount","getTabCount","config","extractKeyValue",function(a,b,c,d,e,f,g,h,i,j,k){var l=null,m={CodeMirror:CodeMirror};m.removeTabs=function(a,b){var c=i(h(a),b)*b;return c?a.slice(c):a},m.tabKey=function(a){var b,c,e,f=a.getCursor(),g=a.getLine(f.line),h=a.getOption("indentUnit");return a.somethingSelected()?void a.indentSelection("add"):(c=m.removeTabs(g,h),c=c.length?c:"",e=""!==c&&""===c.replace(/ /g,"")?h-c.length:h,b=d(e),void a.replaceSelection(b,"end","+input"))},m.backspaceKey=function(a){var b=a.getCursor(),c=a.getLine(b.line).slice(0,b.ch),d=a.getOption("indentUnit"),e=c.length-c.replace(/\s+$/,"").length,f=e>=d;if(f&&e%d===0)for(var g=0;d>g;g++)a.deleteH(-1,"char");else a.deleteH(-1,"char")};var n={xml:{name:"xml"},xsd:{name:"xml",alignCDATA:!0},json:{name:"javascript",json:!0},md:{name:"gfm"},raml:{name:"raml"}},o={"Cmd-S":"save","Ctrl-S":"save","Shift-Tab":"indentLess","Shift-Ctrl-T":"toggleTheme"},p={"Ctrl-Space":"autocomplete","Cmd-S":"save","Ctrl-S":"save","Shift-Tab":"indentLess","Shift-Ctrl-T":"toggleTheme"},q=function(a){a.getLine(a.getCursor().line).trim()&&a.execCommand("autocomplete")};return m.configureEditor=function(a,b){var c=n[b]||n.raml;a.setOption("mode",c),"raml"===c.name?(a.setOption("extraKeys",p),a.on("change",q)):(a.setOption("extraKeys",o),a.off("change",q))},m.enterKey=function(a){function b(b,c){for(var d=b-1;d>=0;d--)if(h(a.getLine(d))<c)return k(a.getLine(d)).key}var c=a.getCursor(),f=c.ch>=a.getLine(c.line).length-1,i=a.getLine(c.line).slice(0,c.ch),j=g(i),l=h(i),m=d(l),n=b(c.line,l),o=-1!==["traits","resourceTypes"].indexOf(n);f?!function(){if(o)return void(m+=e(2));if(j&&(m+=e(1)),"|"===i.replace(/\s+$/,"").slice(-1))return void(m+=e(1));var b=a.getLine(c.line+1);b&&h(b)>l&&(m+=e(1))}():j&&(m+=e(1)),a.replaceSelection("\n"+m,"end","+input")},m.createEditor=function(a,b){var c,d,e=JSON.parse(j.get("folding","true")),f=!1;e&&(f={rangeFinder:CodeMirror.fold.indent,foldOnChangeTimeSpan:300,updateViewportTimeSpan:200}),d={mode:"raml",theme:"solarized dark",lineNumbers:!0,lineWrapping:!0,autofocus:!0,indentWithTabs:!1,indentUnit:2,tabSize:2,keyMap:"tabSpace",foldGutter:f,gutters:["CodeMirror-lint-markers","CodeMirror-linenumbers","CodeMirror-foldgutter"]},b&&Object.keys(b).forEach(function(a){d[a]=b[a]}),c=new CodeMirror(a,d),c.setSize("100%","100%"),c.foldCode(0,{rangeFinder:CodeMirror.fold.indent});var g=c.defaultCharWidth(),h=4;return c.on("renderLine",function(a,b,c){var d=CodeMirror.countColumn(b.text,null,a.getOption("tabSize"))*g;c.style.textIndent="-"+d+"px",c.style.paddingLeft=h+d+"px"}),c},m.initEditor=function(){var a=document.getElementById("code"),b=m.createEditor(a);return l=window.editor=b,b},m.getEditor=function(){return l},function(){CodeMirror.keyMap.tabSpace={Tab:m.tabKey,Backspace:m.backspaceKey,Enter:m.enterKey,fallthrough:["default"]},CodeMirror.commands.save=function(){a.$broadcast("event:save")},CodeMirror.commands.autocomplete=function(a){CodeMirror.showHint(a,CodeMirror.hint.raml,{completeSingle:!1,ghosting:!1,async:!0})},CodeMirror.commands.toggleTheme=function(){a.$broadcast("event:toggle-theme")},CodeMirror.defineMode("raml",c.highlight),CodeMirror.defineMIME("text/x-raml","raml"),CodeMirror.registerHelper("hint","raml",b.autocompleteHelper.bind(b)),CodeMirror.registerHelper("fold","indent",f)}(),m}])}(),function(){"use strict";angular.module("codeMirror").factory("codeMirrorErrors",["codeMirror","$timeout",function(a,b){function c(a,b){var c=document.createElement("div");c.className="CodeMirror-lint-tooltip",c.appendChild(a.cloneNode(!0));var d=$(b).offset();return c.style.top=Math.max(0,d.top-c.offsetHeight-5)+"px",c.style.left=d.left+20+"px",null!==c.style.opacity&&(c.style.opacity=1),document.body.appendChild(c),c}function d(a){a.parentNode&&a.parentNode.removeChild(a)}function e(a){a.parentNode&&(null===a.style.opacity&&d(a),a.style.opacity=0,b(function(){d(a)},200))}function f(a,b){function d(a,b){var c=$(a).offset().left,d=c+$(a).outerWidth(),e=c<=b.clientX&&b.clientX<=d+5,f=$(a).offset().top,g=f+$(a).outerHeight(),h=f<=b.clientY&&b.clientY<=g;return e&&h}function f(a){if(g){var b=d(h,a),c=d(g,a);c||b||(l.off(g,"mousedown",i),l.off(document,"mousemove",f),e(g),g=null)}}var g=c(a,b),h=b,i=function(a){f(g);var b=a.target.dataset.path;if(b){var c=angular.element(h).scope();c.$emit("event:raml-editor-file-select",b)}},j=setInterval(function(){if(!g)return clearInterval(j);for(var a=b;;a=a.parentNode){if(a===document.body)return;if(!a){f();break}}},400);l.on(g,"mousedown",i),l.on(document,"mousemove",f)}function g(a){a.clearGutter(m)}function h(a,b){return"error"===a?a:b}function i(a){for(var b=[],c=0,d=a.length;d>c;++c){var e=a[c],f=e.line||1;(b[f]||(b[f]=[])).push(e)}return b}function j(a){var b=a.severity;n.test(b)||(b="error");var c=document.createElement("div");c.className="CodeMirror-lint-message-"+b;var d=a.message;return a.path&&(d+=" at line "+a.tracingLine+" col "+a.tracingColumn+' in <a href="javascript:" data-path="/'+a.path+'">'+a.path+"</a>"),c.innerHTML="<p class=CodeMirror-tag-"+b+">"+b+'</p><p class="CodeMirror-message">'+d+"</p>",c}function k(a,b,c,d,e){var g=document.createElement("div"),h=g;return g.className="CodeMirror-lint-marker-"+b,c&&(h=g.appendChild(document.createElement("div")),h.className="CodeMirror-lint-marker-multiple"),d!==!1&&l.on(h,"mouseenter",function(){f(a,h)}),g.setAttribute("data-marker-line",e[0].line),g.setAttribute("data-marker-message",e[0].message),g}var l=a.CodeMirror,m="CodeMirror-lint-markers",n=/^(?:error|warning)$/,o={};return o.displayAnnotations=function(b,c){c=c||a.getEditor(),g(c);for(var d=i(b),e=0;e<d.length;++e){var f=d[e];if(f){for(var l=null,o=document.createDocumentFragment(),p=0;p<f.length;++p){var q=f[p],r=q.severity;n.test(r)||(r="error"),l=h(l,r),o.appendChild(j(q))}c.setGutterMarker(e-1,m,k(o,l,f.length>1,!0,f))}}},o.clearAnnotations=function(){g(a.getEditor())},o}])}(),function(){"use strict";angular.module("ramlEditorApp").factory("ramlParserAdapter",["$http","$q","$window","ramlExpander",function(a,b,c,d){
function e(a,c,d){return g(a,function(a){return c?c(a):b.reject(new Error("ramlParser: loadPath: contentAsync: "+a+": no such path"))},d)}function f(a){return function(){return b.when(a.apply(this,arguments))}}function g(b,e,f){function g(a){throw new Error("ramlParser: loadPath: loadApi: content: "+a+": no such path")}return f=f||{},RAML.Parser.loadApi(b,{attributeDefaults:!0,rejectOnErrors:!1,fsResolver:{contentAsync:e,content:g},httpResolver:{getResourceAsync:function(b){var d=(c.RAML||{}).Settings||{},e=(f.bypassProxy?{}:d).proxy||"",g={method:"GET",url:e+b,headers:{Accept:"application/raml+yaml"},transformResponse:null};return a(g).then(function(a){return{content:a.data}})}}}).then(function(a){a=a.expand?a.expand(!0):a;var b=a.toJSON(h);return b.specification&&d.expandRaml(b.specification),b})}var h={serializeMetadata:!1,dumpSchemaContents:!0,rootNodeDetails:!0};return{loadPath:f(e),loadPathUnwrapped:e}}])}(),function(){"use strict";angular.module("raml").value("snippets",{options:["options:","  description: <<insert text or markdown here>>"],head:["head:","  description: <<insert text or markdown here>>"],get:["get:","  description: <<insert text or markdown here>>"],post:["post:","  description: <<insert text or markdown here>>"],put:["put:","  description: <<insert text or markdown here>>"],"delete":["delete:","  description: <<insert text or markdown here>>"],trace:["trace:","  description: <<insert text or markdown here>>"],connect:["connect:","  description: <<insert text or markdown here>>"],patch:["patch:","  description: <<insert text or markdown here>>"],"<resource>":["/newResource:","  displayName: resourceName"],title:["title: My API"],version:["version: v0.1"],baseuri:["baseUri: http://server/api/{version}"]}).factory("ramlSnippets",["snippets",function(a){function b(a){return f.find(function(b){return b.label===a}).keyValues}var c={},d=[],e=["extends"],f=[{label:"Trait",keyValues:d},{label:"ResourceType",keyValues:d},{label:"Library",keyValues:["usage"]},{label:"Overlay",keyValues:e},{label:"Extension",keyValues:e},{label:"DataType",keyValues:d},{label:"DocumentationItem",keyValues:["title","content"]},{label:"NamedExample",keyValues:["value"]},{label:"AnnotationTypeDeclaration",keyValues:d},{label:"SecurityScheme",keyValues:["type"]},{label:"",keyValues:["title"]}];return c.getEmptyRaml=function(a,c){var d=a?a:"1.0",e=c?" "+c:"",f=b(c?c:""),g=["#%RAML "+d+e];return f.forEach(function(a){g.push(a+":")}),g.join("\n")},c.getSnippet=function(b){var c=b.key,d=b.metadata||{},e=a[c.toLowerCase()];return e?e:d.isText?b.isList?[c]:[c,""]:[c+":"]},c}])}(),function(){"use strict";angular.module("codeMirror").value("highlightRootElement",function(a,b,c,d,e,f){return e<=d[a+".level"]&&(d[a+".level"]=0,d[a+".inside"]=!1),a.indexOf(f)>=0?(d[a+".level"]=e,d[a+".inside"]=!0,b):d[a+".inside"]?c:!1}).value("booleanValues",["true","false"]).factory("keywordRegex",["booleanValues",function(a){return new RegExp("\\b(("+a.join(")|(")+"))$","i")}]).factory("token",["keywordRegex","highlightRootElement","getLineIndent","indentUnit",function(a,b,c,d){return function(e,f){var g=e.peek(),h=f.escaped;if(f.escaped=!1,"#"===g&&/^#%RAML (0\.8|1\.0|1\.0\s\w+)$/.test(e.string.trim()))return e.skipToEnd(),"raml-tag";if("#"===g&&(0===e.pos||/\s/.test(e.string.charAt(e.pos-1))))return e.skipToEnd(),"comment";if(f.literal&&e.indentation()>f.keyCol)return e.skipToEnd(),"none";if(f.literal&&(f.literal=!1),e.sol()){if(f.keyCol=0,f.pair=!1,f.pairStart=!1,e.match(/---/))return"def";if(e.match(/\.\.\./))return"def";if(e.match(/\s*-\s+/))return"meta"}if(!f.pair&&e.match(/^\s*([a-z0-9\?\/\{\}\._\-])+(?=\s*:)/i)){var i=e.string.replace(/^\s+|\s+$/g,"").split(":")[0],j="?"===i.slice(-1)?i.slice(0,-1):i,k=c(e.string).tabCount;if(f.pair=!0,f.keyCol=e.indentation(),e.string.match(/^\s*\- /i)&&(f.keyCol+=d),(k<=f.methodLevel||0===i.indexOf("/"))&&(f.methodLevel=0,f.insideMethod=!1),-1!==["options","get","head","post","put","delete","trace","connect","patch"].indexOf(j))return f.methodLevel=k,f.insideMethod=!0,"method-title";if(f.insideMethod)return"method-content";var l=b("traits","trait-title","trait-content",f,k,i)||b("resourceTypes","resource-type-title","resource-type-content",f,k,i)||b("schemas","schema-title","schema-content",f,k,i)||b("securitySchemes","security-scheme-title","security-scheme-content",f,k,i);return l?l:0===i.indexOf("/")?"resource":"key"}if(f.pair&&e.match(/^:\s*/))return f.pairStart=!0,"meta";if(e.match(/^(\{|\}|\[|\])/))return"{"===g?f.inlinePairs++:"}"===g?f.inlinePairs--:"["===g?f.inlineList++:f.inlineList--,"meta";if(f.inlineList>0&&!h&&","===g)return e.next(),"meta";if(f.inlinePairs>0&&!h&&","===g)return f.keyCol=0,f.pair=!1,f.pairStart=!1,e.next(),"meta";if(f.pairStart){if(e.match(/^\s*(\||\>)\s*/))return f.literal=!0,"meta";if(e.match(/^\s*(\&|\*)[a-z0-9\._\-]+\b/i))return"variable-2";if(0===f.inlinePairs&&e.match(/^\s*-?[0-9\.\,]+\s?$/))return"number";if(f.inlinePairs>0&&e.match(/^\s*-?[0-9\.\,]+\s?(?=(,|\}))/))return"number";if(e.match(a))return"keyword"}return f.pairStart=!1,f.escaped="\\"===g,e.next(),null}}]).value("startState",function(){return{pair:!1,pairStart:!1,keyCol:0,inlinePairs:0,inlineList:0,literal:!1,escaped:!1}}).factory("yamlMode",["token","startState",function(a,b){return function(){return{token:a,startState:b}}}]).run(["codeMirror","yamlMode",function(a,b){var c=a.CodeMirror;c.defineMode("yaml",b),c.defineMIME("text/x-yaml","yaml")}])}(),function(){"use strict";angular.module("codeMirror").factory("codeMirrorHighLight",["indentUnit",function(a){var b={};return b.highlight=function(a){return b.indentationOverlay={token:function(a,b){if(void 0===b.cutoff||a.column()<=b.cutoff){if(a.match("  "))return"indent indent-col-"+a.column();if(a.match(" "))return"indent-incomplete"}a.skipToEnd()},startState:function(){return{}}},b.yaml=CodeMirror.overlayMode(CodeMirror.getMode(a,"yaml"),b.indentationOverlay),b.xml=CodeMirror.overlayMode(CodeMirror.getMode(a,"xml"),b.indentationOverlay),b.json=CodeMirror.overlayMode(CodeMirror.getMode(a,{name:"javascript",json:!0}),b.indentationOverlay),b.markdown=CodeMirror.overlayMode(CodeMirror.getMode(a,"gfm"),b.indentationOverlay),{startState:function(){return{token:b._yaml,localMode:null,localState:null,yamlState:b.yaml.startState()}},copyState:function(a){var c;return a.localState&&(c=CodeMirror.copyState(a.localMode,a.localState),c.parentIndentation||(c.parentIndentation=a.localState.parentIndentation)),{token:a.token,localMode:a.localMode,localState:c,yamlState:CodeMirror.copyState(b.yaml,a.yamlState)}},innerMode:function(a){return{state:a.localState||a.yamlState,mode:a.localMode||b.yaml}},token:function(a,b){return b.token(a,b)}}},b._yaml=function(a,c){return/(content|description):(\s?)\|/.test(a.string)&&b._setMode("markdown",a,c),/application\/json:/.test(a.string)&&b._setMode("json",a,c,2),/text\/xml:/.test(a.string)&&b._setMode("xml",a,c,2),b.yaml.token(a,c.yamlState)},b._xml=function(a,c){return b._applyMode("xml",a,c)},b._json=function(a,c){return b._applyMode("json",a,c)},b._markdown=function(a,c){return b._applyMode("markdown",a,c)},b._setMode=function(c,d,e,f){e.token=b["_"+c],e.localMode=b[c],e.localState=b[c].startState(),e.localState.parentIndentation=d.indentation()+(f||0),d.string.match(/^\s*\- /i)&&(e.localState.parentIndentation+=a),"markdown"===c&&(e.localState.base.parentIndentation=e.localState.parentIndentation)},b._applyMode=function(a,c,d){return/(schema|example):(\s?)\|/.test(c.string)?b._yaml(c,d):c.string.trim().length>0&&c.indentation()<=d.localState.parentIndentation?(d.token=b._yaml,d.localState=d.localMode=null,b._yaml(c,d)):(d.localState.overlay.cutoff=d.localState.parentIndentation,b[a].token(c,d.localState))},b}])}(),function(){"use strict";function a(a,b,c){c=c||{},"/"===a.slice(-1)&&a.length>1&&(a=a.slice(0,-1)),this.type="file",this.path=a,this.name=a.slice(a.lastIndexOf("/")+1),this.isDirectory=!1,this.name.lastIndexOf(".")>0&&(this.extension=this.name.slice(this.name.lastIndexOf(".")+1)),this.contents=b||"",this.persisted=c.persisted||!1,this.dirty=c.dirty||!this.persisted,this.root=c.root}angular.module("fs",["raml","utils"]).factory("ramlRepository",["$q","$rootScope","ramlSnippets","fileSystem",function(b,c,d,e){function f(a){return".meta"!==a.path.slice(-5)}function g(a){return function(b){throw a.error=b,b}}function h(a,b){return a.isDirectory===b.isDirectory?a.name.localeCompare(b.name):a.isDirectory?-1:1}function i(a,b){for(var c,d=0,e=b.children.length-1;e>=d;)c=Math.floor((d+e)/2),h(b.children[c],a)>0?e=c-1:d=c+1;return d}function j(a,c){var d="/"===a.path?[""]:a.path.split("/"),e=c.path.split("/").slice(0,-1),f=b.when(a);return e.slice(d.length).forEach(function(a){f=f.then(function(c){var d=n.join(c.path,a),e=n.getByPath(d);return e?e.isDirectory?e:b.reject(new Error("Can not create directory, file already exists: "+d)):n.createDirectory(c,a)})}),f.then(function(a){var d=n.getByPath(c.path);return d?d.isDirectory&&c.isDirectory?d:b.reject(new Error("Path already exists: "+c.path)):(a.children.splice(i(c,a),0,c),c)})}function k(a,b){var c=a.path.slice(0,a.path.lastIndexOf("/"));return c+"/"+b}function l(b,c,d){"/"===b.slice(-1)&&b.length>1&&(b=b.slice(0,-1)),d=d||[],this.type="directory",this.path=b,this.name=b.slice(b.lastIndexOf("/")+1),this.meta=c,this.collapsed=!0,this.isDirectory=!0;var e={folder:[],file:[]};d.forEach(function(a){e[a.type||"file"].push(a)});var g=e.file.filter(f).map(function(b){return new a(b.path,b.contents,{dirty:!1,persisted:!0,root:b.root})}),i=e.folder.map(function(a){return new l(a.path,a.meta,a.children)});this.children=i.concat(g).sort(h)}var m,n={},o="/";return n.supportsFolders=e.supportsFolders||!1,l.prototype.getDirectories=function(){return this.children.filter(function(a){return a.isDirectory})},l.prototype.getFiles=function(){return this.children.filter(function(a){return!a.isDirectory})},l.prototype.forEachChildDo=function(a){for(var b,c=this.children.slice();c.length>0;)b=c.shift(),b.isDirectory&&(c=c.concat(b.children)),a.call(b,b)},l.prototype.sortChildren=function(){this.children.sort(h)},n.sortingFunction=h,n.getParent=function(a){var b=a.path.slice(0,a.path.lastIndexOf("/"));return 0===b.length&&(b="/"),n.getByPath(b)},n.canExport=function(){return e.hasOwnProperty("exportFiles")},n.exportFiles=function(){return e.exportFiles()},n.createDirectory=function(a,c){var d=n.join(a.path,c),f=new l(d),g=n.getByPath(d);return g?b.when(g):j(a,f).then(function(){return e.createFolder(f.path)}).then(function(){return f})},n.generateDirectory=function(a,b){return n.createDirectory(a,b).then(function(a){return c.$broadcast("event:raml-editor-directory-created",a),a})},n.loadDirectory=function(){return e.directory(o).then(function(a){return m=new l(a.path,a.meta,a.children)})},n.removeDirectory=function(a){var d=[];a.getDirectories().forEach(function(a){d.push(n.removeDirectory(a))}),a.getFiles().forEach(function(a){d.push(n.removeFile(a))});var f=n.getParent(a),g=f.children.indexOf(a);return-1!==g&&f.children.splice(g,1),b.all(d).then(function(){return e.remove(a.path)}).then(function(a){c.$broadcast("event:raml-editor-directory-removed",a)})},n.renameDirectory=function(a,b){var d=k(a,b),f=e.rename(a.path,d);return a.forEachChildDo(function(b){b.path=b.path.replace(a.path,d)}),f.then(function(){return a.name=b,a.path=d,c.$broadcast("event:raml-editor-filetree-modified",a),a},g(a))},n.saveFile=function(a){function b(){return a.dirty=!1,a.persisted=!0,a}return e.save(a.path,a.contents).then(b,g(a))},n.renameFile=function(a,d){function f(){return a.name=d,a.path=h,c.$broadcast("event:raml-editor-filetree-modified",a),a}var h=k(a,d),i=a.persisted?e.rename(a.path,h):b.when(a);return i.then(f,g(a))},n.loadFile=function(a){function b(b){return a.dirty=!1,a.persisted=!0,a.loaded=!0,a.contents=b,a}return e.load(a.path).then(b,g(a))},n.removeFile=function(a){function d(){return a.dirty=!1,a.persisted=!1,Object.freeze(a)}var f,h=n.getParent(a);return f=a.persisted?e.remove(a.path):b.when(a),f.then(d,g(a)).then(function(){var b=h.children.indexOf(a);-1!==b&&h.children.splice(b,1),c.$broadcast("event:raml-editor-file-removed",a)})},n.createFile=function(b,d){var e=n.join(b.path,d),f=new a(e);return j(b,f).then(function(){return c.$broadcast("event:raml-editor-file-created",f),f})},n.generateFile=function(a,b,e,f){return n.createFile(a,b).then(function(a){return"raml"===a.extension&&(a.contents=d.getEmptyRaml(e,f)),c.$broadcast("event:raml-editor-file-generated",a),a})},n.getByPath=function(a){if(a){if("/"===a)return m;a=a.replace(/\/$/,"");for(var b,c=m.children.slice();c.length;){if(b=c.shift(),b.path===a)return b;b.isDirectory&&(c=c.concat(b.children))}}},n.rename=function(a,b){return a.isDirectory?n.renameDirectory(a,b):n.renameFile(a,b)},n.remove=function(a){return a.isDirectory?n.removeDirectory(a):n.removeFile(a)},n.move=function(a,c){if(c.isDirectory){var d,f=n.join(c.path,a.name);return a.isDirectory?(d=e.rename(a.path,f),a.forEachChildDo(function(b){b.path=b.path.replace(a.path,f)})):d=a.persisted?e.rename(a.path,f):b.when(a),d.then(function(){return a.path=f,a},g(a))}},n.saveMeta=function(b,c){var d=new a(b.path+".meta",JSON.stringify(c));return n.saveFile(d).then(function(){return c})},n.loadMeta=function(b){var c=new a(b.path+".meta");return n.loadFile(c).then(function(a){return JSON.parse(a.contents)},function(){return{}})},n.join=function(){return Array.prototype.reduce.call(arguments,function(a,b){return null==b?a:"/"===b.charAt(0)?b:a.replace(/\/$/,"")+"/"+b},"/")},n}])}();var FSResolver=function(a,b){this.parsePath=function(a){return a.split("/").filter(function(a){return a&&""!==a})},this.getElement=function(b){var c=this.parsePath(b);return this.getElementFromPath(c,0,a)},this.getElementFromPath=function(a,b,c){if(a.length===b)return c;if(!c.isDirectory)return void 0;var d=this.getChild(c,a[b]);return d?this.getElementFromPath(a,b+1,d):d},this.getChild=function(a,b){return a.children.find(function(a){return a.name===b})},this.getFileContentAsync=function(a){if(a.loaded){if(a.doc)return Promise.resolve(a.doc.getValue());if(a.contents)return Promise.resolve(a.contents)}var c=function(a){return a.contents};return b.loadFile(a).then(c)},this.contentAsync=function(a){var b=this.getElement(a);return!b||b.isDirectory?Promise.resolve(""):this.getFileContentAsync(b)},this.list=function(a){var b=this.getElement(a);return b&&b.isDirectory?b.children.map(function(a){return a.name}):[]},this.listAsync=function(a){return Promise.resolve(this.list(a))},this.exists=function(a){return this.getElement(a)?!0:!1},this.existsAsync=function(a){return Promise.resolve(this.exists(a))},this.dirname=function(a){var b=this.getElement(a);if(!b)return"";if(b.isDirectory)return b.path;var c=a.substring(0,a.lastIndexOf("/")+1);return c||""},this.resolve=function(a,b){if(b.startsWith("/"))return b;var c=a.endsWith("/")?a:a+"/";return c+b},this.extname=function(a){var b=this.getElement(a);if(!b||b.isDirectory)return"";var c=b.name.split(".");return c.length<=1?"":c[c.length-1]},this.isDirectory=function(a){var b=this.getElement(a);return b&&b.isDirectory?!0:!1},this.isDirectoryAsync=function(a){return Promise.resolve(this.isDirectory(a))}},EditorStateProvider=function(a,b,c){function d(a,b){return a+b}this.getText=function(){return c.getValue()},this.getPath=function(){return b},this.getBaseName=function(){var c=a.getElement(b);return c?c.name:""};var e=function(a){var b=a.getCursor(),c=range(0,b.line-1).map(function(b){return a.getLine(b).length+1}).reduce(d,0);return c+b.ch};this.offset=e(c),this.getOffset=function(){return this.offset}};angular.module("ramlEditorApp").factory("ramlSuggest",["ramlRepository",function(a){function b(a,b){function c(a,b){if(!a)return!0;var c=b.text.toLowerCase();return c.startsWith(a)&&c!==a}var d=/:?(:|\s|\.|\[|]|-)+|!/,e=function(a,b){if(!a)return"";var c=a.slice(0,b).split(d);return c[c.length-1]},f=function(a,b){if(!a)return"";var c=a.slice(b).split(d);return c[0]},g=function(a,b,c){a.innerHTML=["<div>",c.displayText,"</div>",'<div class="category">',c.category,"</div>"].join("")},h=function(a){return{displayText:a.displayText||a.text,text:a.text,category:a.category,render:g}},i=a.getCursor(),j=a.getLine(i.line),k=i.ch,l=e(j,k)||"",m=f(j,k),n=l+m,o=n.toLowerCase(),p=a.getLine(i.line).length,q=k-l.length,r=b.filter(function(a){return c(o,a)}).map(h);return{word:n,list:r,from:CodeMirror.Pos(i.line,q),to:CodeMirror.Pos(i.line,p)}}function c(a){return(void 0===a.category||"unknown"===a.category.toLowerCase())&&(a.category="others"),a}function d(a){return a.text=a.text||a.displayText||"",a}return this.FSResolver=FSResolver,this.EditorStateProvider=EditorStateProvider,this.getSuggestions=function(b,e,f){var g=RAML.Suggestions,h=new FSResolver(b,a),i=g.getContentProvider(h),j=new EditorStateProvider(h,e.path,f);return g.suggestAsync(j,i).then(function(a){return Array.isArray(a)?a:[]},function(){return[]}).then(function(a){return a.map(c)}).then(function(a){return a.map(d)})},this.suggest=function(a,b,c){return this.getSuggestions(a,b,c)},this.autocompleteHelper=function(a,c,d,e,f){if(!e||!f){var g=angular.element(a.getInputField()).scope();e=e||g.homeDirectory,f=f||g.fileBrowser.selectedFile}this.getSuggestions(e,f,a).then(function(c){return b(a,c)}).then(function(a){c(a)})},this}]),function(){"use strict";angular.module("ramlEditorApp").factory("ramlExpander",["$q","jsTraverse",function(a,b){function c(a,b){if(a.types){var c=a.types.filter(function(a){return a[b]})[0];return c?c[b]:c}}function d(a,b,d){var e=d.example||d.examples,f=c(a,b);if(f)for(var g in f)if(f.hasOwnProperty(g)){if(["example","examples"].includes(g)&&e)continue;d[g]=f[g]}}function e(a){b.traverse(a).forEach(function(b){if("body.application/json"===this.path.slice(-2).join(".")&&b.type){var c=b.type[0];d(a,c,b)}})}function f(a){return a.items.type?a.items.type[0]:a.items}function g(a){return null===a||"object"!=typeof a}function h(a){b.traverse(a).forEach(function(b){if("body.application/json"===this.path.slice(-2).join(".")&&b.type&&"array"===b.type[0]){var c=f(b);g(b.items)&&(b.items={}),d(a,c,b.items),b.examples||b.example||i(b)}})}function i(a){var b=j(a.items);0!==b.length&&(a.example=b)}function j(a){return a.examples?a.examples.map(function(a){return a.structuredValue}):a.example?[a.example]:[]}function k(a){b.traverse(a).forEach(function(b){if("body.application/json"===this.path.slice(-2).join(".")&&b.schema){var c=b.schema[0];l(a,c,b)}})}function l(a,b,c){var d=m(a,b);d&&(c.schema[0]=d.type[0])}function m(a,b){if(a.schemas){var c=a.schemas.filter(function(a){return a[b]})[0];return c?c[b]:c}}function n(a){e(a),k(a),h(a)}return{expandRaml:n}}])}(),function(){"use strict";function a(){}a.prototype={directory:function(a){throw"Not implemented: FileSystem list invoked with [fullpath="+a+"]"},save:function(a,b){throw"Not implemented: FileSystem save invoked with [fullpath="+a+"] and [content="+b+"]"},createFolder:function(a){throw"Not implemented: FileSystem createFolder invoked with [fullpath="+a+"]"},load:function(a){throw"Not implemented: FileSystem load invoked with [fullpath="+a+"]"},remove:function(a){throw"Not implemented: FileSystem remove invoked with [fullpath="+a+"]"},rename:function(a,b){throw"Not implemented: FileSystem rename invoked with [source="+a+"] and [destination="+b+"]"}},angular.module("fs").provider("fileSystem",function(){return this.hasFactory=!1,this.setFileSystemFactory=function(a){this.$get=a,this.hasFactory=!0},this.$get=function(){return new a},this})}(),function(){"use strict";angular.module("ramlEditorApp").service("newFileService",["ramlRepository","newNameModal","$rootScope","generateName",function(a,b,c,d){function e(a,b,c){var e=a.children.map(function(a){return a.name}),f=(""!==b.label?c:"api")+"-";return d(e,f,"raml")}var f=this,g="https://github.com/raml-org/raml-spec/blob/master/versions/raml-10/raml-10.md#";return f.files={.8:{"":{label:"",name:"API Spec",description:"RAML 0.8 API Spec.",spec:"https://github.com/raml-org/raml-spec/blob/master/versions/raml-08/raml-08.md"}},"1.0":{"":{label:"",name:"API Spec",description:"RAML 1.0 API Spec.",spec:g+"the-root-of-the-document"},Trait:{label:"Trait",name:"Trait",description:"Define a single trait with common characteristics for methods.",spec:g+"resource-types-and-traits"},ResourceType:{label:"ResourceType",name:"Resource Type",description:"Define a single resource type with common characteristics for resources.",spec:g+"resource-types-and-traits"},Library:{label:"Library",name:"Library",description:"Define a collection of data type declarations, resource type declarations, trait declarations, and security scheme declarations into modular, externalized, reusable groups.",spec:g+"libraries"},Overlay:{label:"Overlay",name:"Overlay",description:"Define an overlay that adds or overrides nodes of a RAML API definition while preserving its behavioral, functional aspects.",spec:g+"overlays"},Extension:{label:"Extension",name:"Extension",description:"Define an extension that adds or modifies nodes of a RAML API definition.",spec:g+"extensions"},DataType:{label:"DataType",name:"Type",description:"Define a single data type declaration.",spec:g+"#raml-data-types"},DocumentationItem:{label:"DocumentationItem",name:"User Documentation",description:"Define a single page documentation item.",spec:g+"user-documentation"},NamedExample:{label:"NamedExample",name:"Example",description:"Define a single example for a given data type.",spec:g+"defining-examples-in-raml"},AnnotationTypeDeclaration:{label:"AnnotationTypeDeclaration",name:"Annotation",description:"Define a single annotation type declaration that describes additional metadata that can be applied to any RAML node.",spec:g+"annotations"},SecurityScheme:{label:"SecurityScheme",name:"Security Scheme",description:"Define a single security scheme that describes the mechanism to secure data access, identify requests, and determine access level and data visibility.",spec:g+"security-schemes"}}},f.prompt=function(d,g,h){var i=d.isDirectory?d:a.getParent(d),j=[{message:"That file name is already taken.",validate:function(b){var c=a.join(i.path,b);return!a.getByPath(c)}}],k=h?h:"",l=f.files[g][k],m=e(d,l,h),n="Add new "+l.name+" file";return b.open(l.description,m,j,n,l.spec).then(function(b){return a.generateFile(i,b,g,k)["catch"](function(a){return c.$broadcast("event:notification",{message:a.message,expires:!0,level:"error"})})})},f.newFragmentFile=function(a,b){return""===b?f.prompt(a,"1.0"):f.prompt(a,"1.0",b)},f.newFile=function(a,b){return f.prompt(a,b)},f}])}(),function(){"use strict";angular.module("ramlEditorApp").service("newFolderService",["ramlRepository","newNameModal",function(a,b){var c=this;return c.prompt=function(c){var d=c.isDirectory?c:a.getParent(c),e="Input a name for your new folder:",f="Add a new folder",g=[{message:"That folder name is already taken.",validate:function(b){var c=a.join(d.path,b);return!a.getByPath(c)}}];return b.open(e,"",g,f).then(function(b){return a.generateDirectory(d,b)})},c}])}(),function(){"use strict";function a(a,b,c,d,e,f){function g(a){return'file with path="'+a+'" does not exist'}function h(a,b){a.type===f&&(a.children=b(a.path))}function i(a){var b=[];return e.forEach(function(c){c.path.toLowerCase()===a.toLowerCase()&&(h(c,j),b.push(c))}),b.length>0?b[0]:null}function j(a){a.lastIndexOf("/")!==a.length-1&&(a+="/");var b=[];return e.forEach(function(c){c.path.toLowerCase()!==a.toLowerCase()&&o(c.path)+"/"===a&&(h(c,j),b.push(c))}),b}function k(a){return 0!==a.indexOf("/")?{valid:!1,reason:'Path should start with "/"'}:{valid:!0}}function l(a){var b=o(a);return e.has(b)||""===b?!0:!1}function m(a){var b=!1;return e.forEach(function(c){0===c.path.indexOf(a+"/")&&(b=!0)}),b}function n(a){var b=k(a);if(!b.valid)throw"Invalid Path!";return a.lastIndexOf("/")===a.length-1&&(a=a.slice(0,-1)),a.slice(a.lastIndexOf("/")+1)}function o(a){var b=k(a);if(!b.valid)throw"Invalid Path!";return a.lastIndexOf("/")===a.length-1&&(a=a.slice(0,-1)),a.slice(0,a.lastIndexOf("/"))}var p={},q=500;return p.supportsFolders=!0,p.directory=function(a){var c=b.defer();return d(function(){var b=k(a);return b.valid?(e.has("/")||e.set(a,{path:"/",name:"",type:"folder",meta:{created:Math.round((new Date).getTime()/1e3)}}),void c.resolve(i(a))):(c.reject(b.reason),c.promise)},q),c.promise},p.save=function(a,c){var g=b.defer();return d(function(){var b=n(a),d=e.get(a);if(!l(a))return g.reject(new Error("Parent folder does not exists: "+a)),g.promise;var h={};if(d){if(d.type===f)return g.reject("file has the same name as a folder"),g.promise;d.content=c,d.meta.lastUpdated=Math.round((new Date).getTime()/1e3),h=d}else h={path:a,name:b,content:c,type:"file",meta:{created:Math.round((new Date).getTime()/1e3)}};e.set(a,h),g.resolve()},q),g.promise},p.createFolder=function(a){var c=b.defer(),f=k(a);if(!f.valid)return c.reject(f.reason),c.promise;if(e.has(a))return c.reject(new Error("Folder already exists: "+a)),c.promise;var g=o(a);return e.has(g)?(d(function(){e.set(a,{path:a,name:n(a),type:"folder",meta:{created:Math.round((new Date).getTime()/1e3)}}),c.resolve()},q),c.promise):(c.reject(new Error("Parent folder does not exists: "+a)),c.promise)},p.load=function(a){var c=b.defer();return d(function(){var b=e.get(a);b&&"file"===b.type?c.resolve(e.get(a).content):c.reject(g(a))},q),c.promise},p.remove=function(a){var c=b.defer();return d(function(){var b=e.get(a);return b&&b.type===f&&m(a)?(c.reject("folder not empty"),c.promise):(e.remove(a),void c.resolve())},q),c.promise},p.rename=function(a,c){var g=b.defer();return d(function(){var b=e.get(a);if(!b)return g.reject("Source file or folder does not exists."),g.promise;var d=e.get(c);return d?(g.reject("File or folder already exists."),g.promise):l(c)?(b.path=c,b.name=n(c),e.remove(c),e.remove(a),e.set(c,b),b.type===f&&e.forEach(function(b){if(b.path.toLowerCase()!==a.toLowerCase()&&0===b.path.indexOf(a)){var d=c+b.path.substring(a.length);e.remove(b.path),b.path=d,e.set(d,b)}}),void g.resolve()):(g.reject("Destination folder does not exist."),g.promise)},q),g.promise},p.exportFiles=function(){var b=new a.JSZip;e.forEach(function(a){if("/"!==a.path&&".meta"!==a.name.slice(-5)){var c=a.path.slice(1);"folder"===a.type?b.folder(c):b.file(c,a.content)}});var d=c("Please enter a ZIP file name:","api.zip");d&&a.saveAs(b.generate({type:"blob"}),d)},p}angular.module("fs").constant("LOCAL_PERSISTENCE_KEY","localStorageFilePersistence").constant("FOLDER","folder").factory("localStorageHelper",["LOCAL_PERSISTENCE_KEY",function(a){return{forEach:function(b){for(var c in localStorage)localStorage.hasOwnProperty(c)&&0===c.indexOf(a+".")&&b(JSON.parse(localStorage.getItem(c)))},has:function(a){var b=!1;return a=a||"/",this.forEach(function(c){c.path.toLowerCase()===a.toLowerCase()&&(b=!0)}),b},set:function(b,c){localStorage.setItem(a+"."+b,JSON.stringify(c))},get:function(b){return JSON.parse(localStorage.getItem(a+"."+b))},remove:function(b){localStorage.removeItem(a+"."+b)}}}]).factory("localStorageFileSystem",a).config(function(b){b.hasFactory||b.setFileSystemFactory(a)})}(),function(){"use strict";angular.module("ramlEditorApp").factory("mockingServiceUtils",["$q","jsTraverse","ramlRepository","refParser",function(a,b,c,d){function e(c){return a.when().then(function(){var e=[];return b.traverse(c).forEach(function(a){if("body.application/json"===this.path.slice(-2).join(".")){var b;a.schema?b=a.schema:a.type&&(b=a.type),Array.isArray(b)&&(b=b[0]);try{e.push(d.dereference(JSON.parse(b),{$refs:{read$Ref:g}}).then(JSON.stringify).then(function(b){a.schema=b}))}catch(c){}}}),a.all(e)})}function f(a){return e(a)}function g(b){var d="/"===b.path[0]?b.path:"/"+b.path,e=c.getByPath(d);return e?e.loaded?a.when(e):c.loadFile({path:d}).then(function(a){return a.contents}):a.reject('File with path "'+d+'" does not exist')}return{dereference:f}}])}(),function(){"use strict";angular.module("ramlEditorApp").service("mockingServiceClient",["$http","$q","$window","resolveUri",function(a,b,c,d){function e(a){var b=a.baseUri,c=b.match(/mocks\//g).length;if(c>1)for(var d="mocks/",e=c;e>1;e--){var f=b.indexOf(d),g=b.indexOf("/",f+d.length);b=b.substring(0,f)+b.substring(g+1,b.length)}a.baseUri=b}var f=this;f.proxy=null,f.baseUri="http://ec2-52-201-242-128.compute-1.amazonaws.com",f.buildURL=function(){var a=f.baseUri+["/mocks"].concat(Array.prototype.slice.call(arguments,0)).join("/"),b=f.proxy||c.RAML.Settings.proxy;return b&&(a=b+d(a)),a},f.simplifyMock=function(a){return a.baseUri&&e(a),{id:a.id,baseUri:a.baseUri,manageKey:a.manageKey}},f.getMock=function(c){return a.get(f.buildURL(c.id,c.manageKey)).then(function(a){return f.simplifyMock(a.data)},function(a){return 404!==a.status?b.reject(a):void 0})},f.createMock=function(b){return a.post(f.buildURL(),b).then(function(a){return f.simplifyMock(a.data)})},f.updateMock=function(b){return a({method:"PATCH",url:f.buildURL(b.id,b.manageKey),data:{raml:b.raml,json:b.json}}).then(function(a){return f.simplifyMock(angular.extend(b,a.data))})},f.deleteMock=function(b){return a["delete"](f.buildURL(b.id,b.manageKey))}}])}(),function(){"use strict";angular.module("ramlEditorApp").service("mockingService",["mockingServiceClient","mockingServiceUtils","ramlRepository",function(a,b,c){function d(a){return c.loadMeta(a).then(function(a){return a.mock})}function e(a,b){return c.loadMeta(a).then(function(d){return d.mock=b,c.saveMeta(a,d)}).then(function(){return b})}function f(a){return b.dereference(a)["catch"](function(a){console.error("dereferenceRaml failed",a.stack)})}var g=this;g.getMock=function(a){return d(a)},g.createMock=function(b,c){return f(c).then(function(){return a.createMock({raml:b.contents,json:c})}).then(function(a){return e(b,a)})},g.updateMock=function(b,c){return f(c).then(function(){return d(b)}).then(function(d){return d&&a.updateMock(angular.extend(d,{raml:b.contents,json:c}))}).then(function(a){return e(b,a)})},g.deleteMock=function(b){return d(b).then(function(b){return b&&a.deleteMock(b)}).then(function(){return e(b,null)})}}])}(),function(){"use strict";angular.module("ramlEditorApp").service("subMenuService",["$timeout","$window",function(a,b){this.open=function(c,d){a(function(){b.addEventListener("click",function a(){c.$apply(function(){c[d]=!1}),b.removeEventListener("click",a)})}),c[d]=!0},this.openSubMenu=function(a,b){a[b]=!0}}])}(),function(){"use strict";angular.module("ramlEditorApp").service("importModal",["$modal",function(a){var b=this;return b.open=function(){return a.open({templateUrl:"views/import-modal.html",controller:"ImportController"}).result},b}]).controller("ImportController",["$scope","$modalInstance","swaggerToRAML","$q","$rootScope","importService","ramlRepository",function(a,b,c,d,e,f,g){function h(a){return e.$broadcast("event:notification",{message:a,expires:!0,level:"error"})}function i(c){return a.fileSupported?(a.importing=!0,f.mergeFile(a.rootDirectory,c.value).then(function(){f.isZip(c.value)&&e.$broadcast("event:save-all")}).then(function(){return b.close(!0)})["catch"](function(a){h(a.message)})["finally"](function(){a.importing=!1})):h("File upload not supported. Try upgrading your browser.")}function j(d){return a.importing=!0,c.convert(d.value).then(function(b){var c=l(d.value,"raml");return f.createAndSaveFile(a.rootDirectory,c,b)}).then(function(){return b.close(!0)})["catch"](function(a){h("Failed to import Swagger: "+a.message)})["finally"](function(){a.importing=!1})}function k(d){return a.importing=!0,c.zip(d.value).then(function(b){var c=l(d.value.name,"raml");return f.createFile(a.rootDirectory,c,b)}).then(function(){return e.$broadcast("event:save-all"),b.close(!0)})["catch"](function(a){h("Failed to parse Swagger: "+a.message)})["finally"](function(){a.importing=!1})}function l(a,b){var c=a.replace(/\/*$/,""),d=c.lastIndexOf("/");return d>-1&&(c=c.substr(d)),b&&(c=c.replace(/\.[^\.]*$/,"")+"."+b),c}a.importing=!1,
a.rootDirectory=g.getByPath("/"),a.handleFileSelect=function(b){a.mode.value=b.files[0]},a.options=[{name:"file",type:"file",callback:i},{name:"Swagger spec",type:"swagger",callback:j},{name:"Swagger .zip",type:"zip",callback:k}],a.mode=a.options[0],a.fileSupported=!!(window.File&&window.FileReader&&window.FileList&&window.Blob),a["import"]=function(b){if(b.$submitted=!0,a.submittedType=a.mode.type,!b.$invalid&&!a.importing)try{return a.mode.callback(a.mode)}catch(c){a.importing=!1,h(c)}}}])}(),function(){"use strict";angular.module("ramlEditorApp").service("confirmModal",["$rootScope","$modal",function(a,b){var c=this;return c.open=function(c,d,e){return e=angular.extend({canDiscard:!1,closeButtonLabel:"OK",discardButtonLabel:"Discard",dismissButtonLabel:"Cancel",closeButtonCssClass:"btn-primary"},e),b.open({templateUrl:"views/confirm-modal.html",controller:"ConfirmController",scope:angular.extend(a.$new(),{title:d,message:c,canDiscard:e.canDiscard,closeButtonLabel:e.closeButtonLabel,discardButtonLabel:e.discardButtonLabel,dismissButtonLabel:e.dismissButtonLabel,closeButtonCssClass:e.closeButtonCssClass})}).result},c}]).controller("ConfirmController",["$modalInstance","$scope",function(a,b){b.discard=function(){a.dismiss(angular.extend(new Error,{discard:!0}))}}])}(),function(){"use strict";angular.module("ramlEditorApp").service("newNameModal",["$modal",function(a){var b=this;return b.open=function(b,c,d,e,f){return a.open({templateUrl:"views/new-name-modal.html",controller:"NewNameController",windowClass:"modal in",resolve:{message:function(){return b},title:function(){return e},defaultName:function(){return c},validations:function(){return d},link:function(){return f}}}).result},b}]).controller("NewNameController",["$modalInstance","$scope","message","defaultName","validations","title","link",function(a,b,c,d,e,f,g){b.input={newName:d,message:c,title:f,link:g},b.validationErrorMessage="",b.isValid=function(a){if(a)for(var c=0;c<e.length;c++)if(!e[c].validate(a))return b.validationErrorMessage=e[c].message,!1;return!0},b.submit=function(c){return c.$invalid?void(c.$submitted=!0):void a.close(b.input.newName)}}])}(),function(){"use strict";angular.module("ramlEditorApp").service("swaggerToRAML",["$window","$q","$http","importService",function(a,b,c,d){function e(a,b){return/^https?\:\/\//.test(a)?c.get(h+a,{transformResponse:!1}).then(function(a){return b(null,a.data)})["catch"](function(a){return b(new Error(a.data))}):b(new Error("Invalid file location: "+a))}function f(a){return function(b,c){if(b)return a.reject(b);try{return a.resolve(ramlObjectToRaml(c))}catch(d){return a.reject(d)}}}var g=this,h=a.RAML.Settings.proxy||"";return g.convert=function(a){var c=b.defer();return swaggerToRamlObject(a,e,f(c)),c.promise},g.zip=function(a){var c=b.defer();return d.isZip(a)?d.readFile(a).then(function(a){var b=d.parseZip(a);swaggerToRamlObject.files(Object.keys(b),function(a,c){return b.hasOwnProperty(a)?c(null,b[a]):e(a,c)},f(c))}):c.reject(new Error("Invalid zip file")),c.promise},g}])}(),function(){"use strict";angular.module("ramlEditorApp").service("importService",["$q","$window","ramlRepository","importServiceConflictModal",function(a,b,c,d){function e(a,b,c){return n.readFile(c).then(function(d){if(n.isZip(c)){var e=b.replace(/[\\\/][^\\\/]*$/,"");return n.createDirectory(a,e).then(function(a){return n.importZip(a,d)})}return n.createFile(a,b,d)})}function f(b,c,d){var e=Object.keys(c).filter(i).map(function(e){return function(){if(d){var f=a.defer();return d(c,e,f),f.promise.then(function(a){return n.createFile(b,a.name,a.content)})}return n.createFile(b,e,c[e])}});return m(e)}function g(a){var b={};return Object.keys(a).forEach(function(c){/^__MACOSX\//.test(c)||/\/$/.test(c)||(b[c]=a[c].asText())}),b}function h(a){var b=Object.keys(a).map(function(a){return/[\\\/]/.test(a)?a.replace(/[\\\/][^\\\/]*$/,"").split(/[\\\/]/):[]}).reduce(function(a,b){for(var c=0;c<a.length;c++)if(b[c]!==a[c])return b.slice(0,c);return a}).join("/");if(!b)return angular.extend({},a);var c={};return Object.keys(a).forEach(function(d){var e=d.substr(b.length+1);e&&(c[e]=a[d])}),c}function i(a){return!/(?:^|[\/\\])\./.test(a)}function j(a){return!!c.getByPath(a)}function k(a,b,d){return c.createFile(a,b).then(function(a){return a.contents=d,a})}function l(a,b){var d,e=0,f=b.lastIndexOf("."),g=f>-1?b.substr(0,f):b,h=f>-1?b.substr(f):"";do{var i=g+"-"+ ++e+h;d=c.join(a.path,i)}while(j(d));return d}function m(b){return b.reduce(function(a,b){return a.then(b)},a.when())}var n=this;n.mergeFile=function(a,b){return n.isZip(b)?n.readFile(b).then(function(b){return n.mergeZip(a,b)}):n.importFile(a,b).then(c.saveFile)},n.mergeFileList=function(a,b){var c=Array.prototype.map.call(b,function(b){return function(){return n.mergeFile(a,b)}});return m(c)},n.importEntry=function(b,d){var f=a.defer();if(d.isFile)d.file(function(a){var g=c.join(b.path,d.fullPath);return e(b,g,a).then(f.resolve,f.reject)},f.reject);else{var g=d.createReader();g.readEntries(function(a){var c=a.filter(function(a){return i(a.name)}).map(function(a){return function(){return n.importEntry(b,a)}});return m(c).then(f.resolve,f.reject)})}return f.promise},n.importItem=function(a,b){return b.webkitGetAsEntry?n.importEntry(a,b.webkitGetAsEntry()):n.importFile(a,b.getAsFile())},n.importFile=function(a,b){return e(a,b.name,b)},n.importFromEvent=function(a,b){return b.dataTransfer.items?n.importItemList(a,b.dataTransfer.items):n.importFileList(a,b.dataTransfer.files)},n.importItemList=function(a,b){var c=Array.prototype.map.call(b,function(b){return function(){return n.importItem(a,b)}});return m(c)},n.importFileList=function(a,b){var c=Array.prototype.map.call(b,function(b){return function(){return n.importFile(a,b)}});return m(c)},n.createAndSaveFile=function(a,b,d){return n.createFile(a,b,d).then(c.saveFile)},n.createFile=function(b,e,f){return n.checkExistence(b,e).then(function(g){if(g!==d.SKIP_FILE){if(g===d.KEEP_FILE){var h=l(b,e);return k(b,h,f)}if(g===d.REPLACE_FILE){var i=c.join(b.path,e),j=c.getByPath(i);return(j.loaded?a.when(j):c.loadFile({path:i})).then(function(a){return a.contents!==f&&(j.contents=a.contents,j.loaded=!0,j.doc?j.doc.setValue(f):j.doc=new CodeMirror.Doc(f),j.dirty=!0),j})}return k(b,e,f)}})},n.createDirectory=function(a,b){return c.createDirectory(a,b)},n.checkExistence=function(b,e){var f=c.join(b.path,e);return j(f)?d.open(f):a.when(null)},n.isZip=function(a){return/\.zip$/i.test(a.name)},n.readFile=function(c){var d=a.defer(),e=new b.FileReader;return e.onload=function(){return d.resolve(e.result)},e.onerror=function(){return d.reject(e.error)},n.isZip(c)?e.readAsArrayBuffer(c):e.readAsText(c),d.promise},n.parseZip=function(a){var c=new b.JSZip(a);return g(c.files)},n.mergeZip=function(a,b){var c=h(n.parseZip(b));return f(a,c)},n.importZip=function(a,b,c){var d=n.parseZip(b);return f(a,d,c)}}])}(),function(){"use strict";var a=0,b=1,c=2;angular.module("ramlEditorApp").service("importServiceConflictModal",["$modal",function(d){var e=this;return e.open=function(a){return d.open({backdrop:"static",templateUrl:"views/import-service-conflict-modal.html",controller:"ImportServiceConflictModal",resolve:{path:function(){return a}}}).result},e.KEEP_FILE=b,e.SKIP_FILE=a,e.REPLACE_FILE=c,e}]).controller("ImportServiceConflictModal",["$scope","$modalInstance","path",function(d,e,f){d.path=f,d.skip=function(){e.close(a)},d.keep=function(){e.close(b)},d.replace=function(){e.close(c)}}])}(),function(){"use strict";angular.module("ramlEditorApp").factory("apiSpecTransformer",["$window",function(a){return a.apiSpecTransformer}])}(),function(){"use strict";angular.module("ramlEditorApp").factory("jsTraverse",["$window",function(a){return a.jsTraverse}])}(),function(){"use strict";angular.module("ramlEditorApp").factory("refParser",["$window",function(a){return a.$RefParser}])}(),function(){"use strict";angular.module("stringFilters",[]).filter("dasherize",function(){return function(a){return a?a.toLowerCase().trim().replace(/\s/g,"-"):""}})}(),function(){"use strict";angular.module("ramlEditorApp").constant("UPDATE_RESPONSIVENESS_INTERVAL",800).controller("ramlEditorMain",["UPDATE_RESPONSIVENESS_INTERVAL","$scope","$rootScope","$timeout","$window","safeApply","safeApplyWrapper","debounce","ramlParserAdapter","ramlRepository","codeMirror","codeMirrorErrors","config","$prompt","$confirm","$modal","mockingServiceClient","$q","ramlEditorMainHelpers",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s){function t(a){var b="";return a&&(b=a.path,a.dirty&&(b="* "+b)),b}function u(a){function b(a){return a.__isFold}function c(a){return a.find().from.line}function d(a,b){return Math.min(a,b)}var e={line:a};return x.findMarksAt(e).filter(b).map(c).reduce(d,y)}function v(a,b,c){return c===b?a:"Error on line "+(b+1)+": "+a}function w(a){return a&&a.start?{line:1+a.start.line,column:a.start.column}:a&&Array.isArray(a)?{line:1+a[0],column:a[1]}:{line:1,column:1}}var x,y,z;e.setTheme=function(a){m.set("theme",a),b.theme=c.theme=a,f(b)},b.$on("event:raml-editor-file-selected",function(a,d){z=d,s.isApiDefinitionLike(d.contents)&&c.$broadcast("event:raml-parsed",{}),d.doc||(d.doc=new CodeMirror.Doc(d.contents)),x.swapDoc(d.doc),x.focus(),k.configureEditor(x,d.extension),b.fileParsable=b.getIsFileParsable(d),b.sourceUpdated()}),b.$watch("fileBrowser.selectedFile.contents",function(a){null!=a&&a!==x.getValue()&&(z.doc=new CodeMirror.Doc(a),x.swapDoc(z.doc))});var A=h(function(){c.$broadcast("event:file-updated")},m.get("updateResponsivenessInterval",a));b.$on("event:raml-editor-file-created",A),b.$on("event:raml-editor-file-removed",A),b.$on("event:raml-editor-file-removed",function(a,b){z===b&&(z=void 0,x.swapDoc(new CodeMirror.Doc("")))}),b.canExportFiles=function(){return j.canExport()},b.supportsFolders=j.supportsFolders,b.sourceUpdated=function(){var a=x.getValue(),c=b.fileBrowser.selectedFile;b.clearErrorMarks(),c.contents=a,b.fileParsable=b.getIsFileParsable(c),A()},b.loadRaml=function(a,b){return i.loadPath(b,function(a){var b=j.getByPath(a);return b?(b.loaded?r.when(b):j.loadFile({path:a})).then(function(a){return a.contents}):r.reject("ramlEditorMain: loadRaml: contentAsync: "+a+": no such path")}).then(function(b){return s.isApiDefinitionLike(a)?b:null})},b.clearErrorMarks=function(){l.clearAnnotations(),b.hasErrors=!1},b.$on("event:file-updated",function(){b.clearErrorMarks();var a=b.fileBrowser.selectedFile;return a&&b.fileParsable&&""!==a.contents.trim()?void b.loadRaml(a.contents,a.path).then(g(b,function(a){var d=!0,e=a.errors;if(e&&e.length>0&&(c.$broadcast("event:raml-parser-error",e),d=0===e.filter(function(a){return!a.isWarning}).length),d){var f=a.specification;b.fileBrowser.selectedFile.raml=f,c.$broadcast("event:raml-parsed",f)}}),g(b,function(a){c.$broadcast("event:raml-parser-error",a.parserErrors||a)})):(b.currentError=void 0,void(y=void 0))}),b.$on("event:raml-parsed",g(b,function(a,c){b.raml=c,b.title=c&&c.title,b.version=c&&c.version,b.currentError=void 0,y=void 0})),b.$on("event:raml-parser-error",g(b,function(a,b){var c=Array.isArray(b)?b:[{line:0,column:1,message:b.message,isWarning:b.isWarning}];l.displayAnnotations(c.map(function(b){function c(a,b){for(var e=0;e<a.length;e++){var f=a[e];if(f.path===b.name)return f.from=d,f;if(f.trace){var g=c(f.trace,b);if(g)return g.from=f,g}}}var d=b,e={line:void 0,column:void 0,path:void 0},f=void 0!==b.trace;if(f){var g=a.currentScope.fileBrowser.selectedFile,h=g.path,i=h.lastIndexOf("/")+1,j=h.substring("/"===h[0]?1:0,i);if(d=c(b.trace,g)){d.isWarning=b.isWarning;var k=w(d.from.range);e={line:k.line,column:k.column,path:j+d.from.path}}else{d={message:b.message,isWarning:b.isWarning};var l=w(b.range);e={line:l.line,column:l.column,path:j+b.path}}}var m=w(d.range);return{line:m.line,column:m.column,message:d.message,severity:d.isWarning?"warning":"error",path:e.path,tracingLine:e.line,tracingColumn:e.column}}))})),b.openHelp=function(){p.open({templateUrl:"views/help.html"})},b.getIsFileParsable=function(a){return s.isRamlFile(a.extension)&&s.isApiDefinitionLike(a.contents)},b.getIsMockingServiceVisible=function(){return b.mockingServiceDisabled||!b.fileParsable?!1:!0},b.getIsShelfVisible=function(){return b.fileParsable?!0:!1},b.getIsConsoleVisible=function(){return b.fileParsable&&b.raml},b.toggleShelf=function(){b.shelf.collapsed=!b.shelf.collapsed,m.set("shelf.collapsed",b.shelf.collapsed)},b.getSelectedFileAbsolutePath=function(){return t(z)},b.$on("event:toggle-theme",function(){e.setTheme("dark"===b.theme?"light":"dark")}),function(){b.currentError=void 0,b.theme=c.theme=m.get("theme","dark"),b.shelf={},b.shelf.collapsed=JSON.parse(m.get("shelf.collapsed","false")),b.editor=x=k.initEditor(),x.on("fold",function(a,c,d){c.line<=y&&y<=d.line&&l.displayAnnotations([{line:c.line+1,message:v(b.currentError.message,y,c.line)}])}),x.on("unfold",function(){var a=u(y),c=v(b.currentError.message,y,a);l.displayAnnotations([{line:a+1,message:c}])}),x.on("change",function(){b.sourceUpdated()}),e.alreadyNotifiedExit=!1,e.editorFilesystemIsDirty=function(){var a=!1;return b.homeDirectory.forEachChildDo(function(b){a=b.dirty||a}),a},e.onbeforeunload=function(){return!e.alreadyNotifiedExit&&e.editorFilesystemIsDirty()?"WARNING: You have unsaved changes. Those will be lost if you leave this page.":void 0},b.mockingServiceBaseUri&&(q.baseUri=b.mockingServiceBaseUri)}()}])}(),function(){"use strict";angular.module("ramlEditorApp").factory("ramlEditorMainHelpers",function(){function a(a){return"raml"===a}function b(a){return c(a)||d(a)}function c(a){return/^#%RAML\s(0\.8|1\.0)\s*$/.test(e(a))}function d(a){return/^#%RAML\s1\.0\s(Trait|ResourceType|Library|Overlay|Extension|DataType|DocumentationItem|NamedExample|AnnotationTypeDeclaration|SecurityScheme)\s*$/.test(e(a))}function e(a){return a.split(/\r\n|\n/)[0]}return{isRamlFile:a,isApiDefinition:c,isApiDefinitionLike:b}})}(),function(){"use strict";angular.module("ramlEditorApp").factory("applySuggestion",function(){return function(a,b){var c=b.replacementPrefix||"",d=a.getCursor(),e={line:d.line,ch:a.getLine(d.line).length},f={line:d.line,ch:d.ch-c.length};a.replaceRange(b.key,f,e);var g=b.key.split("\n"),h=g.length>1?g[g.length-1].length:d.ch+g[0].length-c.length,i=d.line+g.length-1;a.setCursor({line:i,ch:h}),a.focus()}}).factory("newSuggestions",["ramlSuggest",function(a){var b=function(a,b){var c=function(a,c){var d=a[c[b]]||[];return d.push(c),a[c[b]]=d,a};return a.reduce(c,{})},c=function(a){var c=a.map(function(a){return{category:a.category,title:a.displayText||a.text,key:a.text,replacementPrefix:a.replacementPrefix||""}}),d=b(c,"category"),e=Object.keys(d).map(function(a){return{name:a,items:d[a]}});return{categories:e}};return function(b,d,e){return a.suggest(b,d,e).then(c)}}]).controller("ramlEditorShelf",["$scope","safeApplyWrapper","newSuggestions","applySuggestion",function(a,b,c,d){function e(b){a.model=b,a.$digest()}var f=a.editor;a.cursorMoved=b(null,function(){c(a.homeDirectory,a.fileBrowser.selectedFile,f).then(e)}),a.orderSections=function(a){var b=["root","docs","methods","parameters","responses","security","resources","traits and types"].indexOf(a.name.toLowerCase());return-1===b?b.length:b},a.itemClick=function(a){d(f,a)},f.on("cursorActivity",a.cursorMoved)}])}(),function(){"use strict";angular.module("ramlEditorApp").constant("NOTIFICATION_TIMEOUT",3e3).controller("notifications",["NOTIFICATION_TIMEOUT","$scope","$timeout",function(a,b,c){function d(){var f;e.length&&(f=e.splice(0,1)[0],b.message=f.message,b.expires=f.expires,b.level=f.level||"info",b.shouldDisplayNotifications=!0,f.expires&&c(function(){b.shouldDisplayNotifications=!1,d()},a))}var e=[];b.shouldDisplayNotifications=!1,b.$on("event:notification",function(a,b){e.push(JSON.parse(JSON.stringify(b))),d()}),b.hideNotifications=function(){b.shouldDisplayNotifications=!1,d()}}])}(),function(){"use strict";angular.module("ramlEditorApp").controller("mockingServiceController",["$scope","mockingService","getNode",function(a,b,c){function d(){function b(b,c,d){a.editor.setLine(b,(d||"")+a.editor.getLine(b)+"\n"+c)}for(var d="baseUri: "+a.mock.baseUri,e=c(a.editor,0);e;){if("baseUri"===e.getKey())return void(e.getValue().text!==a.mock.baseUri&&b(e.lineNumber,d,"#"));e=e.getNextSibling()}for(var f=0;a.editor.getLine(f);f++)if("---"===a.editor.getLine(f).trim())return void b(f,d);b(0,d)}function e(){var b="baseUri: "+a.mock.baseUri,c=void 0,d=void 0;for(c=0;c<a.editor.lineCount();c++)if(d=a.editor.getLine(c).trim(),d===b){a.editor.removeLine(c);break}for(c=Math.min(c,a.editor.lineCount()-1);c>=0;c--)if(d=a.editor.getLine(c).trim(),0===d.indexOf("#")&&0===d.slice(1).trim().indexOf("baseUri: ")){a.editor.setLine(c,d.slice(1).trim());break}}function f(b){return a.loading=!0,b["finally"](function(){a.loading=!1})}function g(b){a.mock=b,a.enabled=!!b}function h(){f(b.getMock(a.fileBrowser.selectedFile).then(g).then(function(){a.mock&&d()}))}function i(){f(b.createMock(a.fileBrowser.selectedFile,a.fileBrowser.selectedFile.raml).then(g).then(d))}function j(){b.updateMock(a.fileBrowser.selectedFile,a.fileBrowser.selectedFile.raml).then(g)}function k(){f(b.deleteMock(a.fileBrowser.selectedFile).then(function(){e()}).then(g))}a.toggleMockingService=function(){return a.fileBrowser.selectedFile?a.enabled?void k():void i():void 0},a.$watch("fileBrowser.selectedFile",function(a){a?h():g()}),a.$watch("fileBrowser.selectedFile.raml",function(){a.enabled&&j()})}])}(),function(){"use strict";angular.module("splitter",[]).directive("ngSplitter",["$window","config",function(a,b){function c(a){return a.attr("ng-splitter-collapse-target")}function d(a){return a.attr("ng-splitter-min-width")}function e(a){return a[c(a)]()}function f(a){return a[{next:"prev",prev:"next"}[c(a)]]()}function g(a,b){var c=d(a);return("undefined"==typeof c||b>=c)&&e(a).css("min-width",Math.max(0,b)+"px"),Math.max(0,b)}function h(a,b,d){var h=e(a),j=i(h,b),k=f(a),l=i(k,b),m={next:1,prev:-1}[c(a)];return 0>l+d*m&&(d=l*m*-1),d&&(j=g(a,j-d*m)),j}function i(a,b){var c="offset"+b[0].toUpperCase()+b.slice(1);return a[0][c]}function j(a,c){return b.get("splitterSize_"+a.attr("id"))||k(a,c)}function k(a,c){var d=i(e(a),c);return b.set("splitterSize_"+a.attr("id"),d),d}function l(a){return"true"===b.get("splitterCollapsed_"+a.attr("id"))}function m(a,c){b.set("splitterCollapsed_"+a.attr("id"),c)}function n(a,b){b=arguments.length>1?b:!l(a),a.toggleClass("collapsed",b),e(a).toggleClass("hide-display",b),m(a,b)}return angular.element.prototype.prev||(angular.element.prototype.prev=function(){var a;if(this.length)for(a=this[0].previousSibling;null!==a&&1!==a.nodeType;)a=a.previousSibling;return angular.isDefined(a)?angular.element(a):this}),{restrict:"A",link:function(b,c,d){var e,f=!1,i=!0,m="vertical"===d.ngSplitter,o=m?"width":"height",p=m?"clientX":"clientY",q=j(c,o),r=l(c),s=c.parent();g(c,q),n(c,r),c.on("mousedown",function(a){0===a.button&&(e=a[p],q=j(c,o),r=l(c),f=!0,s.addClass("noselect"))}),angular.element(a).on("mousemove",function(a){if(f){i=!0;var b=0===h(c,o,a[p]-e);b!==r&&n(c,b),e=a[p],r=b}}).on("mouseup",function(){f&&(r?(n(c,!0),g(c,q)):k(c,o),f=!1,s.removeClass("noselect"))}),c.children(".split").on("mousedown",function(){i=!1}),c.children(".split").on("mouseup",function(){i||(n(c),i=!0,f=!1)})}}}])}(),function(){"use strict";angular.module("validate",[]).directive("ngValidate",["$parse",function(a){return{require:"ngModel",link:function(b,c,d,e){var f=a(d.ngValidate);b.$watch(d.ngModel,function(a){var c=f(b,{$value:a});e.$setValidity("validate",c)})}}}])}(),function(){"use strict";angular.module("autoFocus",[]).directive("ngAutoFocus",["$timeout",function(a){return{link:function(b,c,d){b.$watch(d.ngAutoFocus,function(b){b&&a(function(){c[0].focus()},100)})}}}])}(),function(){"use strict";angular.module("rightClick",[]).directive("ngRightClick",["$parse",function(a){return function(b,c,d){var e=a(d.ngRightClick);c.on("contextmenu",function(a){b.$apply(function(){a.preventDefault(),e(b,{$event:a})})})}}])}(),function(){"use strict";angular.module("ramlEditorApp").directive("ramlEditor",function(){return{restrict:"E",scope:{mockingServiceDisabled:"=",mockingServiceBaseUri:"="},templateUrl:"views/raml-editor-main.tmpl.html",controller:"ramlEditorMain"}})}(),function(){"use strict";angular.module("dragAndDrop",[]).directive("ngDragEnter",["$parse",function(a){return function(b,c,d){var e=a(d.ngDragEnter),f=0;c.on("dragleave",function(){f--}),c.on("dragenter",function(a){f++,1===f&&b.$apply(function(){a.preventDefault(),e(b,{$event:a})})})}}]).directive("ngDragLeave",["$parse",function(a){return function(b,c,d){var e=a(d.ngDragLeave),f=0;c.on("dragenter",function(){f++}),c.on("dragleave",function(a){f--,0===f&&b.$apply(function(){a.preventDefault(),e(b,{$event:a})})})}}]).directive("ngDrop",["$parse",function(a){return function(b,c,d){var e=a(d.ngDrop);c.on("dragover",function(a){a.preventDefault()}),c.on("drop",function(a){b.$apply(function(){a.preventDefault(),a.stopPropagation(),e(b,{$event:a.originalEvent})})})}}])}(),function(){"use strict";angular.module("ramlEditorApp").directive("ramlEditorContextMenu",["$injector","$window","confirmModal","newNameModal","ramlRepository","newFileService","newFolderService","subMenuService","scroll",function(a,b,c,d,e,f,g,h,i){function j(a){var b={label:"Save",execute:function(){return e.saveFile(a)}},h={label:"New File",fragments:f.files["1.0"],execute:function(b){return b?f.prompt(a,"1.0",b):void 0},newFile:function(){return f.prompt(a,"0.8")}},i={label:"New Folder",execute:function(){return g.prompt(a)}},j={label:"Rename",execute:function(){var b=e.getParent(a),c=a.isDirectory?"Enter a new name for this folder:":"Enter a new name for this file:",f=a.isDirectory?"Rename a folder":"Rename a file",g=[{message:"This name is already taken.",validate:function(a){var c=e.join(b.path,a);return!e.getByPath(c)}}];return d.open(c,a.name,g,f).then(function(b){e.rename(a,b)})}},k={label:"Delete",execute:function(){var b,d;return a.isDirectory?(b='Are you sure you want to delete "'+a.name+'" and all its contents?',d="Delete folder"):(b='Are you sure you want to delete "'+a.name+'"?',d="Delete file"),c.open(b,d,{closeButtonLabel:"Delete",closeButtonCssClass:"btn-danger"}).then(function(){return e.remove(a)})}};return a.isDirectory?[h,i,j,k]:[b,j,k]}function k(a){var b=a.getBoundingClientRect();return!(b.top>=0&&b.left>=0&&b.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&b.right<=(window.innerWidth||document.documentElement.clientWidth))}return{restrict:"E",templateUrl:"views/raml-editor-context-menu.tmpl.html",link:function(a,c){function d(a,b){var c=b.pageY,d=b.pageX,e=angular.element(a[0].children[0]);e.css("top",c+"px"),e.css("left",d+"px"),setTimeout(function(){k(e[0])&&e.css("top",c-e[0].offsetHeight+"px")},0)}function e(c){c&&c.target.firstChild.nodeValue.match("New File")||(i.enable(),a.$apply(function(){delete g.target,a.opened=!1,b.removeEventListener("click",e),b.removeEventListener("keydown",f)}))}function f(a){27===a.which&&(a.preventDefault(),e())}a.openFileMenu=function(b){"New File"===b.label&&h.openSubMenu(a,"showFileMenu")},a.closeFileMenu=function(){a.showFileMenu=!1};var g={open:function(g,h){i.disable(),this.target=h,a.actions=j(h),g.stopPropagation(),d(c,g),b.addEventListener("click",e),b.addEventListener("keydown",f),a.opened=!0}};a.registerContextMenu(g)},scope:!0}}])}(),function(){"use strict";angular.module("ramlEditorApp").directive("ramlEditorFileBrowser",["$q","$window","$rootScope","$timeout","config","ramlRepository","newNameModal","importService",function(a,b,c,d,e,f,g,h){function i(i){function j(a){if("/"!==a.path){var b=f.getParent(a);b.collapsed=!1,j(b)}}function k(a){83!==a.which||!a.metaKey&&!a.ctrlKey||a.shiftKey||a.altKey||(a.preventDefault(),i.$apply(function(){n.saveFile(n.selectedFile)}))}function l(){var a="Untitled-1.raml",b="File system has no files, please input a name for the new file:",c=[],d="Add a new file";g.open(b,a,c,d).then(function(a){return f.generateFile(i.homeDirectory,a)},function(){return f.generateFile(i.homeDirectory,a)})}function m(a){for(var b=[a],c=0;c<b.length;){for(var d=b[c],e=d.children,f=void 0,g=0;g<e.length;g++){if(f=e[g],"file"===f.type&&f.root)return f;"directory"===f.type&&b.push(f)}c+=1}}var n=this,o=angular.noop,p=void 0;i.toggleFolderCollapse=function(a){a.collapsed=!a.collapsed},i.fileTreeOptions=function(){var a=!1;return{accept:function(b,c,d){var e,g=b.$modelValue,h=0>d?i.homeDirectory:c.$modelValue[d];h.isDirectory||(h=c.$nodeScope?c.$nodeScope.$modelValue:i.homeDirectory);var j=f.getParent(g).path===h.path||h.path.slice(0,g.path.length)===g.path;return a=h.children.filter(function(a){return a.name===g.name}).length>0,e=!a&&!j,e?n.cursorState="ok":n.cursorState="no",e},dropped:function(a){var b=a.source.nodeScope.$modelValue,c=a.dest.nodesScope.$nodeScope?a.dest.nodesScope.$nodeScope.$modelValue:i.homeDirectory;f.move(b,c).then(function(){return n.select(b)})},dragStop:function(b){n.cursorState="",!b.canceled&&a&&c.$broadcast("event:notification",{message:"Failed: duplicate file name found in the destination folder.",expires:!0,level:"error"})}}}(),n.select=function(a){return a.isDirectory?n.selectDirectory(a):n.selectFile(a)},i.$on("event:raml-editor-file-select",function(a,b){var c=f.getByPath(b);n.selectFile(c)}),n.selectFile=function(b){if(n.selectedFile&&n.selectedFile.$$hashKey===b.$$hashKey)return void(n.currentTarget=b);o();var c=b.loaded||!b.persisted,d=c?a.when(b):f.loadFile(b);d.then(function(a){n.selectedFile=n.currentTarget=a,i.$emit("event:raml-editor-file-selected",a),o=i.$watch("fileBrowser.selectedFile.contents",function(b,c){b!==c&&(a.dirty=!0)})})},n.selectDirectory=function(a){i.$emit("event:raml-editor-directory-selected",a)},n.saveFile=function(a){f.saveFile(a).then(function(){return c.$broadcast("event:notification",{message:"File saved.",expires:!0})})},n.dropFile=function(a,b){return h.importFromEvent(b,a).then(function(){b.collapsed=!1})["catch"](function(a){c.$broadcast("event:notification",{message:a.message,expires:!0,level:"error"})})},n.showContextMenu=function(a,b){p.open(a,b)},n.contextMenuOpenedFor=function(a){return p&&p.target===a},b.addEventListener("keydown",k),i.fileBrowser=n,i.registerContextMenu=function(a){p=a},i.$on("event:raml-editor-file-generated",function(a,b){n.selectFile(b)}),i.$on("event:raml-editor-directory-created",function(a,b){n.selectDirectory(b)}),i.$on("event:raml-editor-file-selected",function(a,b){j(b)}),i.$on("event:raml-editor-directory-selected",function(a,b){j(b)}),i.$on("event:raml-editor-filetree-modified",function(a,b){f.getParent(b).sortChildren()}),i.$on("event:raml-editor-file-removed",function(a,b){d(function(){var a=i.homeDirectory.getFiles();0===a.length?l():b===n.selectedFile&&n.selectFile(a[0])})}),i.$on("$destroy",function(){b.removeEventListener("keydown",k)}),i.$watch("fileBrowser.selectedFile.path",function(a,b){a!==b&&e.set("currentFile",JSON.stringify({path:a,name:a.slice(a.lastIndexOf("/")+1)}))}),f.loadDirectory().then(function(a){i.homeDirectory=a,n.rootFile=m(a);var b=[];if(i.homeDirectory.forEachChildDo(function(a){a.isDirectory||b.push(a)}),!b.length)return void l();var c=JSON.parse(e.get("currentFile","{}")),d=f.getByPath(c.path)||n.rootFile||b[0];n.selectFile(d)})}return{restrict:"E",templateUrl:"views/raml-editor-file-browser.tmpl.html",controller:i}}])}(),function(){"use strict";angular.module("ramlEditorApp").directive("ramlEditorProjectButton",["$timeout","$window","subMenuService",function(a,b,c){return{restrict:"E",templateUrl:"views/menu/project-menu.tmpl.html",link:function(a){a.openProjectMenu=function(){c.open(a,"showProjectMenu")},a.openFileMenu=function(){c.openSubMenu(a,"showFileMenu")},a.closeFileMenu=function(){a.showFileMenu=!1}}}}])}(),function(){"use strict";angular.module("ramlEditorApp").directive("ramlEditorSaveFileButton",["$rootScope","ramlRepository",function(a,b){return{restrict:"E",template:'<li role="save-button" ng-click="saveFile()"><a><i class="fa fa-save"></i>&nbsp;Save</a></li>',link:function(c){c.saveFile=function(){var d=c.fileBrowser.selectedFile;return b.saveFile(d).then(function(){a.$broadcast("event:notification",{message:"File saved.",expires:!0})})}}}}])}(),function(){"use strict";angular.module("ramlEditorApp").directive("ramlEditorSaveAllButton",["$rootScope","ramlRepository","$q",function(a,b,c){return{restrict:"E",template:'<li role="save-all-button" ng-click="saveAllFiles()"><a><i class="fa fa-save"></i>&nbsp;Save All</a></li>',link:function(d){d.saveAllFiles=function(){var e=[];return d.homeDirectory.forEachChildDo(function(a){return a.isDirectory?void 0:a.dirty?e.push(b.saveFile(a)):void 0}),c.all(e).then(function(){a.$broadcast("event:notification",{message:"All files saved.",expires:!0})})},a.$on("event:save-all",function(){d.saveAllFiles()})}}}])}(),function(){"use strict";angular.module("ramlEditorApp").directive("ramlEditorNewFolderButton",["newFolderService",function(a){return{restrict:"E",template:'<li ng-show="supportsFolders" role="new-folder-button" ng-click="newFolder()"><a><i class="fa fa-folder-open"></i>&nbsp;New Folder</a></li>',link:function(b){b.newFolder=function(){return a.prompt(b.homeDirectory)}}}}])}(),function(){"use strict";angular.module("ramlEditorApp").directive("ramlEditorNewFileMenu",["newFileService","subMenuService",function(a,b){return{restrict:"E",scope:{showFileMenu:"=",showFragmentMenu:"=",openFileMenuCondition:"@",menuRole:"@"},templateUrl:"views/menu/new-file-menu.tmpl.html",link:function(c){c.closeFragmentMenu=function(){c.showFragmentMenu=!1},c.openFragmentMenu=function(){b.openSubMenu(c,"showFragmentMenu"),c.fragments=a.files["1.0"]},c.newFragmentFile=function(b){return a.newFragmentFile(c.$parent.homeDirectory,b)},c.newFile=function(b){return a.newFile(c.$parent.homeDirectory,b)},c.notSorted=function(a){return a?Object.keys(a).map(function(b){return a[b]}):[]}}}}])}(),function(){"use strict";angular.module("ramlEditorApp").directive("ramlEditorExportMenu",["ramlRepository",function(a){return{restrict:"E",template:'<li role="export-zip" ng-click="exportZipFiles()"><a><i class="fa fa-download"></i>&nbsp;Export files</a></li>',link:function(b){b.exportZipFiles=function(){a.exportFiles()}}}}])}(),function(){"use strict";angular.module("ramlEditorApp").directive("ramlEditorImportButton",["$injector","importModal",function(a,b){return{restrict:"E",template:'<li role="import-button" ng-click="importFile()"><a><i class="fa fa-cloud-download"></i> Import</a></li>',link:function(a){a.importFile=function(){return b.open()}}}}])}(),function(){"use strict";angular.module("ramlEditorApp").directive("ramlEditorViewButton",["$timeout","$window","subMenuService","$rootScope",function(a,b,c,d){return{restrict:"E",templateUrl:"views/menu/view-menu.tmpl.html",link:function(a){a.openViewMenu=function(){c.open(a,"showViewMenu")},a.toogleBackgroundColor=function(){d.$broadcast("event:toggle-theme")}}}}])}(),function(){"use strict";angular.module("ramlEditorApp").directive("ramlEditorHelpButton",["$modal","$timeout","$window","subMenuService",function(a,b,c,d){return{restrict:"E",templateUrl:"views/menu/help-menu.tmpl.html",link:function(b){b.openHelpContextMenu=function(){d.open(b,"menuContextHelpOpen")},b.openHelpModal=function(){a.open({templateUrl:"views/modal/help.html"})}}}}])}(),function(){"use strict";angular.module("ui.tree").directive("uiTreeNode",["treeConfig","$uiTreeHelper","$window","$document","$timeout","ramlRepository","config",function(a,b,c,d,e,f,g){return{require:["^uiTreeNodes","^uiTree","?uiTreeNode"],link:function(h,i,j,k){var l={};angular.extend(l,a),l.nodeClass&&i.addClass(l.nodeClass),h.init(k),h.collapsed=!!b.getNodeAttribute(h,"collapsed"),h.$watch(j.collapsed,function(a){"boolean"==typeof a&&(h.collapsed=a)}),h.$watch("collapsed",function(a){b.setNodeAttribute(h,"collapsed",a),j.$set("collapsed",a)});var m,n,o,p,q,r,s,t,u,v="ontouchstart"in window,w=!0,x=!1,y=null,z=!1,A=null,B=1e3,C=document.body,D=document.documentElement,E=function(a){
if((v||2!==a.button&&3!==a.which)&&!(a.uiTreeDragging||a.originalEvent&&a.originalEvent.uiTreeDragging)){var e=angular.element(a.target),f=e.scope();if(f&&f.$type&&!("uiTreeNode"!==f.$type&&"uiTreeHandle"!==f.$type||"uiTreeNode"===f.$type&&f.$handleScope)){var j=e.prop("tagName").toLowerCase();if("input"!==j&&"textarea"!==j&&"button"!==j&&"select"!==j){for(;e&&e[0]&&e[0]!==i;){if(b.nodrag(e))return;e=e.parent()}if(h.beforeDrag(h)){a.uiTreeDragging=!0,a.originalEvent&&(a.originalEvent.uiTreeDragging=!0),a.preventDefault();var k=b.eventObj(a);n=!0,o=b.dragInfo(h);var q=h.$element.prop("tagName");s=angular.element(c.document.createElement(q)),l.hiddenClass&&s.addClass(l.hiddenClass),p=b.positionStarted(k,h.$element),r=angular.element(c.document.createElement(h.$parentNodesScope.$element.prop("tagName"))).addClass(h.$parentNodesScope.$element.attr("class")).addClass(l.dragClass).addClass("light"===g.get("theme")?"drag-light":""),r.css("z-index",9999),h.$element.after(s),r.append(h.$element.clone().html(h.$element.children()[0].innerHTML)),d.find("body").append(r),r.css({left:k.pageX-p.offsetX+"px",top:k.pageY-p.offsetY+"px"}),m={dragging:r},h.$element.addClass("drag-elm");var w=angular.element(r[0].lastChild).scope();w.collapsed=!0,angular.element(d).bind("touchend",K),angular.element(d).bind("touchcancel",K),angular.element(d).bind("touchmove",J),angular.element(d).bind("mouseup",K),angular.element(d).bind("mousemove",J),angular.element(d).bind("mouseleave",L),t=Math.max(C.scrollHeight,C.offsetHeight,D.clientHeight,D.scrollHeight,D.offsetHeight),u=Math.max(C.scrollWidth,C.offsetWidth,D.clientWidth,D.scrollWidth,D.offsetWidth),h.$treeScope.isDragging=!0}}}}},F=function(a){if(!x)return void(w||(x=!0,h.$apply(function(){h.$callbacks.dragStart(o.eventArgs(m,p))})));var d,f,g,i=b.eventObj(a);if(r){a.preventDefault(),c.getSelection?c.getSelection().removeAllRanges():c.document.selection&&c.document.selection.empty(),d=i.pageX-p.offsetX,f=i.pageY-p.offsetY,g={left:d,right:d+r[0].scrollWidth+5,top:f,bottom:f+r[0].scrollHeight},g.left<0?d=0:g.right>u&&(d=u-r[0].scrollWidth-5),g.top<0?f=0:g.bottom>t&&(f=t-r[0].scrollHeight),r.css({left:d+"px",top:f+"px"});var j=window.pageYOffset||c.document.documentElement.scrollTop,k=j+(window.innerHeight||c.document.clientHeight||c.document.clientHeight);if(k<i.pageY&&t>=k&&window.scrollBy(0,10),j>i.pageY&&window.scrollBy(0,-10),b.positionMoved(a,p,n),n)return void(n=!1);var l;angular.isFunction(r.hide)?r.hide():(l=r[0].style.display,r[0].style.display="none");var s=i.pageX-c.document.body.scrollLeft,v=i.pageY-(window.pageYOffset||c.document.documentElement.scrollTop);c.document.elementFromPoint(s,v);var y=angular.element(c.document.elementFromPoint(s,v));angular.isFunction(r.show)?r.show():r[0].style.display=l;var z=y.scope();if(!p.dirAx&&z!==h.prevHoverNode){var C=!1;if(h.prevHoverNode=z,!z)return;if("uiTree"===z.$type&&z.dragEnabled&&(C=z.isEmpty()),"uiTreeHandle"===z.$type&&(z=z.$nodeScope),"uiTreeDummyNode"===z.$type)return q=z.$parentNodesScope.accept(h,-1),q&&o.moveTo(z.$parentNodesScope,z.$parentNodesScope.childNodes(),H(h.$modelValue,z.$parentNodesScope.$modelValue)),$(".dragover").removeClass("dragover"),y.addClass("dragover"),void(A&&(e.cancel(A),A=null));if("uiTreeNode"!==z.$type&&!C)return;e.cancel(A),$(".dragover").removeClass("dragover"),z.$childNodesScope?(angular.element(z.$element.children()[0]).addClass("dragover"),z.collapsed&&(A=e(function(){z.collapsed=!1,h.nodeToExpand=null},B)),h.nodeToExpand=z):z.$parentNodeScope?(y.addClass("dragover"),angular.element(z.$parentNodeScope.$element.children()[0]).addClass("dragover"),h.nodeToExpand=z.$parentNodeScope):y.addClass("dragover"),C?z.$nodesScope.accept(h,0)&&o.moveTo(z.$nodesScope,z.$nodesScope.childNodes(),0):z.dragEnabled()&&(y=z.$element,q=z.$parentNodesScope.accept(h,z.index()),q&&(z.$childNodesScope?o.moveTo(z.$childNodesScope,z.childNodes(),H(h.$modelValue,z.$childNodesScope.$modelValue)):o.moveTo(z.$parentNodesScope,z.$parentNodesScope.childNodes(),H(h.$modelValue,z.$parentNodesScope.$modelValue))))}h.$apply(function(){h.$callbacks.dragMove(o.eventArgs(m,p))})}},G=function(a){a.preventDefault(),r&&(h.$treeScope.$apply(function(){h.$callbacks.beforeDrop(o.eventArgs(m,p))}),s.replaceWith(h.$element),r.remove(),r=null,h.$$apply?(o.apply(),h.$treeScope.$apply(function(){h.$callbacks.dropped(o.eventArgs(m,p))})):M(),h.$treeScope.$apply(function(){var a=o.eventArgs(m,p);a.canceled=z,h.$callbacks.dragStop(a)}),h.$$apply=!1,o=null),angular.element(d).unbind("touchend",K),angular.element(d).unbind("touchcancel",K),angular.element(d).unbind("touchmove",J),angular.element(d).unbind("mouseup",K),angular.element(d).unbind("mousemove",J),angular.element(c.document.body).unbind("mouseleave",L),$(".dragover").removeClass("dragover"),h.$element.removeClass("drag-elm"),h.$treeScope.isDragging=!1,h.prevHoverNode=null,z=!1},H=function(a,b){for(var c,d=0,e=b.length-1;e>=d;)c=Math.floor((d+e)/2),f.sortingFunction.call(null,b[c],a)>0?e=c-1:d=c+1;return d},I=function(a){h.dragEnabled()&&E(a)},J=function(a){F(a)},K=function(a){h.$$apply=q,G(a)},L=function(a){h.$$apply=!1,z=!0,G(a)},M=function(){e(function(){i.unbind(),i.bind("touchstart mousedown",function(a){w=!0,x=!1,y=e(function(){w=!1,I(a)},h.dragDelay)}),i.bind("touchend touchcancel mouseup",function(){e.cancel(y)})})};M(),angular.element(c.document.body).bind("keydown",function(a){27===a.keyCode&&L(a)})}}}]).directive("uiTreeDummyNode",["treeConfig",function(a){return{require:["^uiTreeNodes","^uiTree"],template:"<div class=\"file-item dummy\" ng-class=\"{'no-drop': fileBrowser.cursorState === 'no', copy: fileBrowser.cursorState === 'ok'}\"></div>",restrict:"E",replace:!0,controller:function(a,b){this.scope=a,a.$element=b,a.$parentNodeScope=null,a.$childNodesScope=null,a.$parentNodesScope=null,a.$treeScope=null,a.$$apply=!1,a.$type="uiTreeDummyNode",a.init=function(b){var c=b[0];a.$treeScope=b[1]?b[1].scope:null,a.$parentNodeScope=c.scope.$nodeScope,a.$parentNodesScope=c.scope}},link:function(b,c,d,e){var f={};angular.extend(f,a),f.nodeClass&&c.addClass(f.nodeClass),b.init(e)}}}])}(),angular.module("ramlEditorApp").run(["$templateCache",function(a){"use strict";a.put("views/confirm-modal.html",'<form name="form" novalidate>\n  <div class="modal-header">\n    <h3>{{title}}</h3>\n  </div>\n\n  <div class="modal-body">\n    <p>{{message}}</p>\n  </div>\n\n  <div class="modal-footer">\n    <button type="button" class="btn btn-default" ng-click="$dismiss()">{{dismissButtonLabel}}</button>\n    <button type="button" class="btn btn-default" ng-if="canDiscard" ng-click="discard()">{{discardButtonLabel}}</button>\n    <button type="button" class="btn" ng-class="closeButtonCssClass" ng-click="$close()" ng-auto-focus="true">{{closeButtonLabel}}</button>\n  </div>\n</form>\n'),a.put("views/import-modal.html",'<form name="form" novalidate ng-submit="import(form)">\n  <div class="modal-header">\n    <h3>Import file (beta)</h3>\n  </div>\n\n  <div class="modal-body" ng-class="{\'has-error\': submittedType === mode.type && form.$invalid}">\n    <div style="text-align: center; font-size: 2em; margin-bottom: 1em;" ng-show="importing">\n      <i class="fa fa-spin fa-spinner"></i>\n    </div>\n\n    <div class="form-group" style="margin-bottom: 10px;">\n      <div style="float: left; width: 130px;">\n        <select class="form-control" ng-model="mode" ng-options="option.name for option in options"></select>\n      </div>\n\n      <div style="margin-left: 145px;" ng-switch="mode.type">\n        <input id="swagger" name="swagger" type="text" ng-model="mode.value" class="form-control" required ng-switch-when="swagger" placeholder="http://example.swagger.wordnik.com/api/api-docs">\n\n        <input id="file" name="file" type="file" ng-model="mode.value" class="form-control" required ng-switch-when="file" onchange="angular.element(this).scope().handleFileSelect(this)">\n\n        <input id="zip" name="zip" type="file" ng-model="mode.value" class="form-control" required ng-switch-when="zip" onchange="angular.element(this).scope().handleFileSelect(this)">\n      </div>\n    </div>\n\n    <div ng-if="submittedType === \'swagger\'">\n      <p class="help-block" ng-show="form.swagger.$error.required">Please provide a URL.</p>\n    </div>\n\n    <div ng-if="submittedType === \'file\'">\n      <p class="help-block" ng-show="form.file.$error.required">Please select a file to import.</p>\n    </div>\n\n    <div ng-if="submittedType === \'zip\'">\n      <p class="help-block" ng-show="form.zip.$error.required">Please select a zip to import.</p>\n    </div>\n\n    <div ng-if="mode.type === \'file\'">\n      <p>If you want to upload multiple files, you can .zip them and import them in a single step.</p>\n    </div>\n\n    <div ng-if="mode.type !== \'file\'">\n      <p>Note: Currently only supports Swagger v1.2</p>\n    </div>\n  </div>\n\n  <div class="modal-footer" style="margin-top: 0;">\n    <button type="button" class="btn btn-default" ng-click="$dismiss()">Close</button>\n    <button type="submit" class="btn btn-primary">Import</button>\n  </div>\n</form>\n'),a.put("views/import-service-conflict-modal.html",'<form name="form" novalidate>\n  <div class="modal-header">\n    <h3>Path already exists</h3>\n  </div>\n\n  <div class="modal-body">\n    The path (<strong>{{path}}</strong>) already exists.\n  </div>\n\n  <div class="modal-footer">\n    <button type="button" class="btn btn-default pull-left" ng-click="skip()">Skip</button>\n    <button type="submit" class="btn btn-primary" ng-click="keep()">Keep Both</button>\n    <button type="submit" class="btn btn-primary" ng-click="replace()">Replace</button>\n  </div>\n</form>\n'),a.put("views/menu/help-menu.tmpl.html",'<span role="help-button" class="menu-item-toggle" ng-click="openHelpContextMenu($event)">\n  <i class="fa fa-question-circle"></i>&nbsp;Help\n  <i class="menu-icon fa fa-caret-down"></i>\n</span>\n<ul role="menu-dropdown" class="menu-item-context" ng-show="menuContextHelpOpen">\n  <li role="context-menu-item"><a role="raml-specification" href="https://github.com/raml-org/raml-spec/blob/master/versions/raml-10/raml-10.md" target="_blank">RAML Specification</a></li>\n  <li rile="context-menu-item"><a role="raml-website" href="http://raml.org" target="_blank">raml.org Website</a></li>\n  <li role="context-menu-item"><a role="report-raml-bug" href="https://github.com/mulesoft/api-designer/issues" target="_blank">Report a Bug</a></li>\n  <li role="context-menu-item"><a role="raml-guide" href="http://raml.org/docs.html" target="_blank">Getting Started Guide</a></li>\n  <li role="context-menu-item" ng-click="openHelpModal()"><a role="raml-about">About</a></li>\n</ul>\n'),a.put("views/menu/new-file-menu.tmpl.html",'<ul role="{{menuRole}}" class="submenu-item menu-item-context" ng-show="showFileMenu">\n  <li role="context-menu-item" ng-mouseenter="openFragmentMenu()" ng-mouseleave="closeFragmentMenu()">\n    <a>\n        &nbsp;Raml 1.0\n        <i class="submenu-icon fa fa-caret-right"></i>\n    </a>\n\n    <ul role="{{menuRole}}" class="submenu-item menu-item-context" ng-show="{{ openFileMenuCondition }}">\n      <li role="new-raml-{{fragment.name}}" ng-repeat="fragment in notSorted(fragments)" ng-click="newFragmentFile(fragment.label)">\n        <a>&nbsp;{{ fragment.name }}</a>\n      </li>\n    </ul>\n  </li>\n\n  <li role="new-raml-0.8" ng-click="newFile(\'0.8\')">\n    <a>&nbsp;Raml 0.8 API Spec</a>\n  </li>\n</ul>\n'),a.put("views/menu/project-menu.tmpl.html",'<span class="menu-item-toggle" role="project-button" ng-click="openProjectMenu($event)">\n  <i class="fa fa-cogs"></i>&nbsp;Project\n  <i class="menu-icon fa fa-caret-down"></i>\n</span>\n<ul role="menu-dropdown" class="menu-item-context" ng-show="showProjectMenu">\n  <li role="new-file" ng-mouseenter="openFileMenu()" ng-mouseleave="closeFileMenu()">\n    <a>\n      <i class="fa fa-plus"></i>&nbsp;New File\n      <i class="submenu-icon fa fa-caret-right"></i>\n    </a>\n    <raml-editor-new-file-menu show-file-menu="showFileMenu" show-fragment-menu="showFragmentMenu" open-file-menu-condition="showFragmentMenu" menu-role="menu-dropdown"></raml-editor-new-file-menu>\n  </li>\n\n  <raml-editor-new-folder-button></raml-editor-new-folder-button>\n\n  <raml-editor-save-file-button></raml-editor-save-file-button>\n\n  <raml-editor-save-all-button></raml-editor-save-all-button>\n\n  <raml-editor-import-button></raml-editor-import-button>\n\n\n\n  <!--Uncomment to include export menu-->\n\n  <!--<li role="context-menu-item" class="submenu" ng-mouseenter="openExportMenu()" ng-mouseleave="closeExportMenu()" ng-show="canExportFiles()">-->\n  <raml-editor-export-menu></raml-editor-export-menu>\n  <!--</li>-->\n</ul>\n'),a.put("views/menu/view-menu.tmpl.html",'<span class="menu-item-toggle" ng-click="openViewMenu($event)">\n  <i class="fa fa-edit"></i>&nbsp;View\n  <i class="menu-icon fa fa-caret-down"></i>\n</span>\n<ul role="menu-dropdown" class="menu-item-context" ng-show="showViewMenu">\n  <li role="toogle-background" ng-click="toogleBackgroundColor()">\n      <a>&nbsp;Toggle Background Color (ctrl+shift+t)</a>\n  </li>\n</ul>\n\n'),a.put("views/modal/help.html",'<div class="modal-header">\n    <h3>About</h3>\n</div>\n\n<div class="modal-body">\n    <p>\n        The API Designer for RAML is built by MuleSoft, and is a web-based editor designed to help you author RAML specifications for your APIs.\n        <br />\n        <br />\n        RAML is a human-and-machine readable modeling language for REST APIs, backed by a workgroup of industry leaders.\n    </p>\n\n    <p>\n        To learn more about the RAML specification and other tools which support RAML, please visit <a href="http://www.raml.org" target="_blank">http://www.raml.org</a>.\n        <br />\n        <br />\n        For specific questions, or to get help from the community, head to the community forum at <a href="http://forums.raml.org" target="_blank">http://forums.raml.org</a>.\n    </p>\n</div>\n'),a.put("views/new-name-modal.html",'<form name="form" novalidate ng-submit="submit(form)">\n  <div class="modal-header">\n    <h3>{{input.title}}</h3>\n  </div>\n\n  <div class="modal-body">\n    <!-- name -->\n    <div class="form-group" ng-class="{\'has-error\': form.$submitted && form.name.$invalid}">\n      <p>\n        {{input.message}}\n      </p>\n      <p>\n        Learn more\n        <a ng-if="input.link" target="_blank" href="{{input.link}}">\n          <i class="fa fa-external-link"></i>\n        </a>\n      </p>\n      <!-- label -->\n      <label for="name" class="control-label required-field-label">Name</label>\n\n      <!-- input -->\n      <input id="name" name="name" type="text"\n             ng-model="input.newName" class="form-control"\n             ng-validate="isValid($value)"\n             ng-maxlength="64" ng-auto-focus="true" value="{{input.suggestedName}}" required>\n\n      <!-- error -->\n      <p class="help-block" ng-show="form.$submitted && form.name.$error.required">Please provide a name.</p>\n      <p class="help-block" ng-show="form.$submitted && form.name.$error.maxlength">Name must be shorter than 64 characters.</p>\n      <p class="help-block" ng-show="form.$submitted && form.name.$error.validate">{{validationErrorMessage}}</p>\n    </div>\n  </div>\n\n  <div class="modal-footer">\n    <button type="button" class="btn btn-default" ng-click="$dismiss()">Cancel</button>\n    <button type="submit" class="btn btn-primary">OK</button>\n  </div>\n</form>\n'),a.put("views/raml-editor-context-menu.tmpl.html",'<ul role="context-menu" ng-show="opened">\n  <li role="context-menu-item" ng-mouseenter="openFileMenu(action)" ng-mouseleave="closeFileMenu()" ng-repeat="action in actions" ng-click="action.execute()">\n    {{ action.label }}\n    <i class="submenu-icon fa fa-caret-right" ng-if="action.fragments !== undefined"></i>\n    <raml-editor-new-file-menu ng-if="action.fragments !== undefined" show-file-menu="showFileMenu" show-fragment-menu="showFragmentMenu" open-file-menu-condition="showFragmentMenu" menu-role="context-menu"></raml-editor-new-file-menu>\n  </li>\n</ul>\n'),a.put("views/raml-editor-file-browser.tmpl.html",'<raml-editor-context-menu></raml-editor-context-menu>\n\n<script type="text/ng-template" id="file-item.html">\n  <div ui-tree-handle class="file-item" ng-right-click="fileBrowser.showContextMenu($event, node)" ng-click="fileBrowser.select(node)"\n    ng-class="{currentfile: fileBrowser.currentTarget.path === node.path && !isDragging,\n      dirty: node.dirty,\n      geared: fileBrowser.contextMenuOpenedFor(node),\n      directory: node.isDirectory,\n      \'no-drop\': fileBrowser.cursorState === \'no\',\n      copy: fileBrowser.cursorState === \'ok\'}"\n    ng-drop="node.isDirectory && fileBrowser.dropFile($event, node)">\n    <span class="file-name" ng-click="toggleFolderCollapse(node)">\n      <i class="fa icon fa-caret-right fa-fw" ng-if="node.isDirectory" ng-class="{\'fa-rotate-90\': !collapsed}"></i>\n      <i class="fa icon fa-fw" ng-class="{\'fa-folder-o\': node.isDirectory, \'fa-file-text-o\': !node.isDirectory}"></i>\n      &nbsp;{{node.name}}\n    </span>\n    <i class="fa fa-cog" ng-click="fileBrowser.showContextMenu($event, node)" ng-class="{hidden: isDragging}" data-nodrag></i>\n  </div>\n\n  <ul ui-tree-nodes ng-if="node.isDirectory" ng-class="{hidden: collapsed}" ng-model="node.children">\n    <li ui-tree-node ng-repeat="node in node.children" ng-include="\'file-item.html\'" data-collapsed="node.collapsed" data-path="{{node.path}}">\n    </li>\n  </ul>\n</script>\n\n<div ui-tree="fileTreeOptions" ng-model="homeDirectory" class="file-list" data-drag-delay="300" data-empty-place-holder-enabled="false" ng-drop="fileBrowser.dropFile($event, homeDirectory)" ng-right-click="fileBrowser.showContextMenu($event, homeDirectory)">\n  <ul ui-tree-nodes ng-model="homeDirectory.children" id="tree-root">\n    <ui-tree-dummy-node class="top"></ui-tree-dummy-node>\n    <li ui-tree-node ng-repeat="node in homeDirectory.children" ng-include="\'file-item.html\'" data-collapsed="node.collapsed"\n     data-path="{{node.path}}"\n     ng-drag-enter="node.collapsed = false"\n     ng-drag-leave="node.collapsed = true"></li>\n    <ui-tree-dummy-node class="bottom" ng-click="fileBrowser.select(homeDirectory)"></ui-tree-dummy-node>\n  </ul>\n</div>\n'),a.put("views/raml-editor-main.tmpl.html",'<div role="raml-editor" class="{{theme}}">\n  <div role="notifications" ng-controller="notifications" class="hidden" ng-class="{hidden: !shouldDisplayNotifications, error: level === \'error\'}">\n    {{message}}\n    <i class="fa" ng-class="{\'fa-check\': level === \'info\', \'fa-warning\': level === \'error\'}" ng-click="hideNotifications()"></i>\n  </div>\n\n  <header>\n    <h1>\n      <strong>API</strong> Designer\n    </h1>\n\n    <a role="logo" target="_blank" href="http://mulesoft.com"></a>\n  </header>\n\n  <ul class="menubar">\n    <li class="menu-item menu-item-ll">\n      <raml-editor-project-button></raml-editor-project-button>\n    </li>\n    <li class="menu-item menu-item-ll">\n      <raml-editor-view-button></raml-editor-view-button>\n    </li>\n    <li class="menu-item menu-item-ll">\n      <raml-editor-help-button></raml-editor-help-button>\n    </li>\n    <li class="spacer file-absolute-path">{{getSelectedFileAbsolutePath()}}</li>\n    <li class="menu-item menu-item-fr menu-item-mocking-service" ng-show="getIsMockingServiceVisible()" ng-controller="mockingServiceController" ng-click="toggleMockingService()">\n      <div class="title">Mocking Service</div>\n      <div class="field-wrapper" ng-class="{loading: loading}">\n        <i class="fa fa-spin fa-spinner" ng-if="loading"></i>\n        <div class="field" ng-if="!loading">\n          <input type="checkbox" value="None" id="mockingServiceEnabled" ng-checked="enabled" ng-click="$event.preventDefault()" />\n          <label for="mockingServiceEnabled"></label>\n        </div>\n      </div>\n    </li>\n  </ul>\n\n  <div role="flexColumns">\n    <raml-editor-file-browser role="browser"></raml-editor-file-browser>\n\n    <div id="browserAndEditor" ng-splitter="vertical" ng-splitter-collapse-target="prev"><div class="split split-left">&nbsp;</div></div>\n\n    <div role="editor" ng-class="{error: currentError}">\n      <div id="code" role="code"></div>\n\n      <div role="shelf" ng-show="getIsShelfVisible()" ng-class="{expanded: !shelf.collapsed}">\n        <div role="shelf-tab" ng-click="toggleShelf()">\n          <i class="fa fa-inbox fa-lg"></i><i class="fa" ng-class="shelf.collapsed ? \'fa-caret-up\' : \'fa-caret-down\'"></i>\n        </div>\n\n        <div role="shelf-container" ng-show="!shelf.collapsed" ng-include src="\'views/raml-editor-shelf.tmpl.html\'"></div>\n      </div>\n    </div>\n\n    <div id="consoleAndEditor" ng-show="getIsConsoleVisible()" ng-splitter="vertical" ng-splitter-collapse-target="next" ng-splitter-min-width="470"><div class="split split-right">&nbsp;</div></div>\n\n    <div ng-show="getIsConsoleVisible()" role="preview-wrapper" class="raml-console-embedded">\n      <raml-console\n        raml="raml"\n        options="{\n          singleView: true,\n          disableThemeSwitcher: true,\n          disableRamlClientGenerator: true,\n          disableTitle: true\n        }"\n        style="padding: 0; margin-top: 0;"></raml-console>\n    </div>\n  </div>\n</div>\n'),a.put("views/raml-editor-shelf.tmpl.html",'<ul role="sections" ng-controller="ramlEditorShelf">\n  <li role="section" ng-repeat="category in model.categories | orderBy:orderSections" class="{{category.name | dasherize}}">\n    {{category.name}}&nbsp;({{category.items.length}})\n    <ul role="items">\n      <li ng-repeat="item in category.items" ng-click="itemClick(item)"><i class="fa fa-reply"></i><span>{{item.title}}</span></li>\n    </ul>\n  </li>\n</ul>\n')}]);
