!function(){"use strict";angular.module("ramlEditorApp",["ngResource","ngSanitize","ui.bootstrap.modal","ui.bootstrap.tpls","ui.tree","ramlConsoleApp","codeMirror","fs","helpers","raml","stringFilters","utils","lightweightDOM","splitter"]).run(["$window",function(a){a.RAML.Settings.proxy="/proxy/"}])}(),function(){"use strict";angular.module("utils",[]).value("indentUnit",2).factory("safeApply",["$rootScope","$exceptionHandler",function(a,b){return function(c,d){if(c=c||a,-1===["$apply","$digest"].indexOf(c.$root.$$phase))return c.$apply(d);try{return c.$eval(d)}catch(e){b(e)}}}]).factory("safeApplyWrapper",["safeApply",function(a){return function(b,c){return function(){var d=Array.prototype.slice.call(arguments,0);return a(b,function(){return c.apply(this,d)})}}}]).factory("getTime",function(){return Date.now||function(){return(new Date).getTime()}}).factory("debounce",["$timeout",function(a){var b;return function(c,d,e){b&&a.cancel(b),b=a(c,d,e)}}]).factory("throttle",["getTime","$timeout",function(a,b){function c(c,d,e){var f,g,h,i=null,j=0;e||(e={});var k=function(){j=e.leading===!1?0:a(),i=null,h=c.apply(f,g)};return function(){var l=a();j||e.leading!==!1||(j=l);var m=d-(l-j);return f=this,g=arguments,0>=m?(b.cancel(i),i=null,j=l,h=c.apply(f,g)):i||e.trailing===!1||(i=b(k,m)),h}}return c}]).value("generateSpaces",function(a){return a=a||0,new Array(a+1).join(" ")}).factory("generateTabs",["generateSpaces","indentUnit",function(a,b){return function(c,d){return d=d||b,c=c||0,new Array(c+1).join(a(b))}}]).value("$prompt",function(a,b){return window.prompt(a,b)}).value("$confirm",function(a){return window.confirm(a)}).factory("generateName",function(){return function(a,b,c){c=c?"."+c:"";var d=Math.max.apply(void 0,a.map(function(a){var c=new RegExp(b+"(\\d+)"),d=a.match(c);return d?d[1]:0}).concat(0));return b+(d+1)+c}}).factory("scroll",function(){function a(a){a=a||window.event,a.preventDefault?a.preventDefault():a.returnValue=!1}function b(b){return d[b.keyCode]?void a(b):void 0}function c(b){a(b)}var d={37:!0,38:!0,39:!0,40:!0};return{enable:function(){window.removeEventListener&&window.removeEventListener("DOMMouseScroll",c,!1),window.onmousewheel=document.onmousewheel=document.onkeydown=null},disable:function(){window.addEventListener&&window.addEventListener("DOMMouseScroll",c,!1),window.onmousewheel=document.onmousewheel=c,document.onkeydown=b}}})}(),function(){"use strict";angular.module("raml").value("config",{set:function(a,b){localStorage["config."+a]=b},get:function(a,b){return a="config."+a,a in localStorage?localStorage[a]:b},remove:function(a){delete localStorage["config."+a]},clear:function(){localStorage.clear()}})}(),function(){"use strict";angular.module("lightweightDOM",["lightweightParse"]).factory("getNode",["getSpaceCount","getTabCount","getLineIndent","isArrayStarter","isCommentStarter","extractKeyValue",function(a,b,c,d,e,f){function g(a,b,f){this.editor=a,this.lineNumber=b,this.line=f,this.lineIndent=c(this.line,a.getOption("indentUnit")),this.isEmpty=this.lineIndent.spaceCount===this.line.length,this.isComment=!this.isEmpty&&e(this.line),this.isArrayStarter=!this.isComment&&d(this.line),this.isStructural=!this.isEmpty&&!this.isComment}function h(b,c){var d=b.getCursor(),e=arguments.length>1?c:d.line,f=b.getLine(e),h=i[e];if(void 0===f)return null;if(d.line===e){var j=a(f);(j===f.length||"#"===f[j])&&(f=f.slice(0,d.ch))}return h&&h.line===f||(h=i[e]=new g(b,e,f)),h}var i={};return g.prototype.getKeyValue=function(){return this.keyValue||(this.keyValue=f(this.line)),this.keyValue},g.prototype.getKey=function(){return this.getKeyValue().key},g.prototype.getValue=function(){return this.getKeyValue().value},g.prototype.getNextSibling=function(){for(var a=this.lineNumber;;){var b=h(this.editor,++a);if(null===b)return null;if(b.isStructural){if(b.lineIndent.tabCount===this.lineIndent.tabCount)return b;if(this.isArrayStarter&&!b.isArrayStarter&&b.lineIndent.tabCount===this.lineIndent.tabCount+1)return b;if(!this.isArrayStarter&&b.isArrayStarter&&b.lineIndent.tabCount===this.lineIndent.tabCount-1)return b;if(b.lineIndent.tabCount<this.lineIndent.tabCount)return null}}},g.prototype.getPreviousSibling=function(){for(var a=this.lineNumber;;){a-=1;var b=h(this.editor,a);if(null===b)return null;if(b.isStructural){if(b.lineIndent.tabCount===this.lineIndent.tabCount)return b;if(this.isArrayStarter&&!b.isArrayStarter&&b.lineIndent.tabCount===this.lineIndent.tabCount+1)return b;if(!this.isArrayStarter&&b.isArrayStarter&&b.lineIndent.tabCount===this.lineIndent.tabCount-1)return b;if(b.lineIndent.tabCount<this.lineIndent.tabCount)return null}}},g.prototype.getFirstChild=function(){for(var a=this.lineIndent.tabCount+(this.isArrayStarter?2:1),b=this.lineNumber;;){var c=h(this.editor,++b);if(null===c)return null;if(c.lineIndent.tabCount<a)return null;if(c.lineIndent.tabCount>=a&&c.isStructural)return c}},g.prototype.getParent=function(){for(var a=this.lineIndent.tabCount-(!this.isArrayStarter&&this.getIsInArray()?2:1),b=this.lineNumber;;){var c=h(this.editor,--b);if(null===c)return null;if(c.lineIndent.tabCount<=a&&c.isStructural)return c}},g.prototype.getChildren=function(){for(var a=[],b=this.getFirstChild();null!==b;)a.push(b),b=b.getNextSibling();return a},g.prototype.getSelfAndNeighbors=function(){for(var a=[],b=this.getIsInArray(),c=this;c&&c.getIsInArray()===b&&(a.push(c),!c.isArrayStarter);)c=c.getPreviousSibling();for(c=this.getNextSibling();c&&!c.isArrayStarter&&c.getIsInArray()===b;)a.push(c),c=c.getNextSibling();return a},g.prototype.getIsInArray=function(){if(this.isArrayStarter)return!0;for(var a=this.getPreviousSibling();a&&a.lineIndent.tabCount>=this.lineIndent.tabCount;)a=a.getPreviousSibling();return!(!a||!a.isArrayStarter||a.lineIndent.tabCount!==this.lineIndent.tabCount-1)},g.prototype.getPath=function(){for(var a=[],b=this;b=b.getParent();)a.unshift(b);return a},g.prototype.selfOrParent=function(a){return this.first(this.getParent,a)},g.prototype.selfOrPrevious=function(a){return this.first(this.getPreviousSibling,a)},g.prototype.first=function(a,b){for(var c=this;c;){if(b(c))return c;c=a.apply(c)}return null},h}])}(),function(){"use strict";angular.module("lightweightParse",["utils"]).factory("getEditorTextAsArrayOfLines",function(){var a="",b=[];return function(c){if(a===c.getValue())return b;a=c.getValue(),b=[];for(var d=0,e=c.lineCount();e>d;d++)b.push(c.getLine(d));return b}}).factory("getSpaceCount",function(){return function(a){for(var b=0,c=a.length;c>b&&" "===a[b];b++);return b}}).factory("getTabCount",["indentUnit",function(a){return function(b,c){return c=c||a,Math.floor(b/c)}}]).factory("getLineIndent",["getSpaceCount","getTabCount",function(a,b){return function(c,d){var e=a(c);return{spaceCount:e,tabCount:b(e,d),content:e?c.slice(e):c}}}]).factory("isArrayStarter",["getSpaceCount",function(a){return function(b){var c=a(b);return"-"===b[c]&&" "===b[c+1]}}]).factory("isCommentStarter",["getSpaceCount",function(a){return function(b){var c=a(b);return"#"===b[c]}}]).factory("extractKeyValue",function(){function a(a,b,c){for(b=b||0,c=c||a.length,0>b&&(b=a.length+b),0>c&&(c=a.length+c);c>b&&" "===a[b];)b+=1;for(;c>b&&" "===a[c-1];)c-=1;return 0===b&&c===a.length?a:a.slice(b,c)}function b(a){return a?{text:a,isAlias:"&"===a[0],isReference:"*"===a[0]}:null}return function(c){var d=0,e=c.length,f=c.indexOf("#");return-1!==f&&(e=f),f=c.indexOf("- "),-1!==f&&e>f&&(d=f+2),f=c.indexOf(": ",d),-1!==f&&e>f?{key:a(c,d,f),value:b(a(c,f+2,e))}:(f=c.lastIndexOf(":",e),f===e-1?{key:a(c,d,e-1),value:null}:{key:null,value:b(a(c,d,e))})}}).factory("getScopes",["getLineIndent",function(a){function b(a,b){if(void 0===a||void 0===b)return!1;if(a.length!==b.length)return!1;for(var c=0;c<a.length;c++)if(a[c]!==b[c])return!1;return!0}var c;return function(d){if(c&&b(c.key,d))return c.value;var e={},f=d.map(function(b,c){var d=a(b);return{tabCount:d.tabCount,content:d.content,lineNumber:c}}),g=f.reduce(function(a,b){var c,d,f=e[b.tabCount-1];if(f)c=f.length-1,d=e[b.tabCount-1][c];else{if(b.tabCount>1)return f=e[b.tabCount-2],f&&(c=f.length-1,d=e[b.tabCount-2][c],a[d]=a[d]||[],a[d].push({lineNumber:b.lineNumber,content:b.content,tabCount:b.tabCount}),e[b.tabCount-1]=e[b.tabCount-1]||[],e[b.tabCount-1].push(b.lineNumber)),a;d=0}return a[d]=a[d]||[],a[d].push({lineNumber:b.lineNumber,content:b.content,tabCount:b.tabCount}),e[b.tabCount]=e[b.tabCount]||[],e[b.tabCount].push(b.lineNumber),a},{});return c={result:{scopeLevels:e,scopesByLine:g},lines:d},{scopeLevels:e,scopesByLine:g}}}])}(),function(){"use strict";angular.module("codeFolding",["raml","lightweightParse"]).factory("getFoldRange",["getLineIndent",function(a){return function(b,c){var d,e=b.getLine(c.line),f=a(e);if(f.content){var g=b.getLine(c.line+1);if(g){var h=f.tabCount,i=a(g).tabCount;if(i>h)for(var j=c.line+2,k=b.lineCount();k>j;j++){if(g=b.getLine(j),d=a(g),i=d.tabCount,h>=i&&d.content)return g=b.getLine(j-1),{from:CodeMirror.Pos(c.line,e.length),to:CodeMirror.Pos(j-1,g.length)};if(j===k-1)return g=b.getLine(k-1),{from:CodeMirror.Pos(c.line,e.length),to:CodeMirror.Pos(k-1,g.length)}}}}}}])}(),function(){"use strict";angular.module("codeMirror",["raml","ramlEditorApp","codeFolding"]).factory("codeMirror",["ramlHint","codeMirrorHighLight","eventService","generateSpaces","generateTabs","getFoldRange","isArrayStarter","getSpaceCount","getTabCount","config","extractKeyValue",function(a,b,c,d,e,f,g,h,i,j,k){var l=null,m={CodeMirror:CodeMirror};m.removeTabs=function(a,b){var c=i(h(a),b)*b;return c?a.slice(c):a},m.tabKey=function(a){var b,c,e,f=a.getCursor(),g=a.getLine(f.line),h=a.getOption("indentUnit");return a.somethingSelected()?void a.indentSelection("add"):(c=m.removeTabs(g,h),c=c.length?c:"",e=""!==c&&""===c.replace(/ /g,"")?h-c.length:h,b=d(e),void a.replaceSelection(b,"end","+input"))},m.backspaceKey=function(a){var b=a.getCursor(),c=a.getLine(b.line).slice(0,b.ch),d=a.getOption("indentUnit"),e=c.length-c.trimRight().length,f=e>=d;if(f&&e%d===0)for(var g=0;d>g;g++)a.deleteH(-1,"char");else a.deleteH(-1,"char")};var n={xml:{name:"xml"},xsd:{name:"xml",alignCDATA:!0},json:{name:"javascript",json:!0},md:{name:"gfm"},raml:{name:"raml"}},o={"Cmd-S":"save","Ctrl-S":"save","Shift-Tab":"indentLess","Shift-Ctrl-T":"toggleTheme"},p={"Ctrl-Space":"autocomplete","Cmd-S":"save","Ctrl-S":"save","Shift-Tab":"indentLess","Shift-Ctrl-T":"toggleTheme"},q=function(a){a.getLine(a.getCursor().line).trim()&&a.execCommand("autocomplete")};return m.configureEditor=function(a,b){var c=n[b]||n.raml;a.setOption("mode",c),"raml"===c.name?(a.setOption("extraKeys",p),a.on("change",q)):(a.setOption("extraKeys",o),a.off("change",q))},m.enterKey=function(a){function b(b,c){for(var d=b-1;d>=0;d--)if(h(a.getLine(d))<c)return k(a.getLine(d)).key}var c=a.getCursor(),f=c.ch>=a.getLine(c.line).length-1,i=a.getLine(c.line).slice(0,c.ch),j=g(i),l=h(i),m=d(l),n=b(c.line,l),o=-1!==["traits","resourceTypes"].indexOf(n);f?!function(){if(o)return void(m+=e(2));if(j&&(m+=e(1)),"|"===i.trimRight().slice(-1))return void(m+=e(1));var b=a.getLine(c.line+1);b&&h(b)>l&&(m+=e(1))}():j&&(m+=e(1)),a.replaceSelection("\n"+m,"end","+input")},m.createEditor=function(a,b){var c,d,e=JSON.parse(j.get("folding","true")),f=!1;e&&(f={rangeFinder:CodeMirror.fold.indent,foldOnChangeTimeSpan:300,updateViewportTimeSpan:200}),d={mode:"raml",theme:"solarized dark",lineNumbers:!0,lineWrapping:!0,autofocus:!0,indentWithTabs:!1,indentUnit:2,tabSize:2,keyMap:"tabSpace",foldGutter:f,gutters:["CodeMirror-lint-markers","CodeMirror-linenumbers","CodeMirror-foldgutter"]},b&&Object.keys(b).forEach(function(a){d[a]=b[a]}),c=new CodeMirror(a,d),c.setSize("100%","100%"),c.foldCode(0,{rangeFinder:CodeMirror.fold.indent});var g=c.defaultCharWidth(),h=4;return c.on("renderLine",function(a,b,c){var d=CodeMirror.countColumn(b.text,null,a.getOption("tabSize"))*g;c.style.textIndent="-"+d+"px",c.style.paddingLeft=h+d+"px"}),c},m.initEditor=function(){var a=document.getElementById("code"),b=m.createEditor(a);return l=window.editor=b,b},m.getEditor=function(){return l},function(){CodeMirror.keyMap.tabSpace={Tab:m.tabKey,Backspace:m.backspaceKey,Enter:m.enterKey,fallthrough:["default"]},CodeMirror.commands.save=function(){c.broadcast("event:save")},CodeMirror.commands.autocomplete=function(a){CodeMirror.showHint(a,CodeMirror.hint.raml,{ghosting:!0})},CodeMirror.commands.toggleTheme=function(){c.broadcast("event:toggle-theme")},CodeMirror.defineMode("raml",b.highlight),CodeMirror.defineMIME("text/x-raml","raml"),CodeMirror.registerHelper("hint","raml",a.autocompleteHelper),CodeMirror.registerHelper("fold","indent",f)}(),m}])}(),function(){"use strict";angular.module("codeMirror").factory("codeMirrorErrors",["codeMirror","$timeout",function(a,b){function c(a,b){function c(a){return d.parentNode?(d.style.top=Math.max(0,a.clientY-d.offsetHeight-5)+"px",void(d.style.left=a.clientX+5+"px")):l.off(document,"mousemove",c)}var d=document.createElement("div");return d.className="CodeMirror-lint-tooltip",d.appendChild(b.cloneNode(!0)),document.body.appendChild(d),l.on(document,"mousemove",c),c(a),null!==d.style.opacity&&(d.style.opacity=1),d}function d(a){a.parentNode&&a.parentNode.removeChild(a)}function e(a){a.parentNode&&(null===a.style.opacity&&d(a),a.style.opacity=0,b(function(){d(a)},200))}function f(a,b,d){function f(){l.off(d,"mouseout",f),g&&(e(g),g=null)}var g=c(a,b),h=setInterval(function(){if(!g)return clearInterval(h);for(var a=d;;a=a.parentNode){if(a===document.body)return;if(!a){f();break}}},400);l.on(d,"mouseout",f)}function g(a){a.clearGutter(m)}function h(a,b){return"error"===a?a:b}function i(a){for(var b=[],c=0;c<a.length;++c){var d=a[c],e=d.line;(b[e]||(b[e]=[])).push(d)}return b}function j(a){var b=a.severity;n.test(b)||(b="error");var c=document.createElement("div");return c.className="CodeMirror-lint-message-"+b,c.appendChild(document.createTextNode(a.message)),c}function k(a,b,c,d,e){var g=document.createElement("div"),h=g;return g.className="CodeMirror-lint-marker-"+b,c&&(h=g.appendChild(document.createElement("div")),h.className="CodeMirror-lint-marker-multiple"),d!==!1&&l.on(h,"mouseover",function(b){f(b,a,h)}),g.setAttribute("data-marker-line",e[0].line),g.setAttribute("data-marker-message",e[0].message),g}var l=a.CodeMirror,m="CodeMirror-lint-markers",n=/^(?:error|warning)$/,o={};return o.displayAnnotations=function(b){var c=a.getEditor(),d=i(b);this.clearAnnotations();for(var e=0;e<d.length;++e){var f=d[e];if(f){for(var g=null,l=document.createDocumentFragment(),o=0;o<f.length;++o){var p=f[o],q=p.severity;n.test(q)||(q="error"),g=h(g,q),l.appendChild(j(p))}c.setGutterMarker(e-1,m,k(l,g,f.length>1,!0,f))}}},o.clearAnnotations=function(){var b=a.getEditor();g(b)},o}])}(),function(){"use strict";var a;try{a=angular.module("helpers")}catch(b){a=angular.module("helpers",[])}a.factory("eventService",["$rootScope","$timeout",function(a,b){var c={},d={};return c.broadcast=function(b,c){a.$broadcast(b,c),d[b]={data:c}},c.on=function(c,e){a.$on(c,e),d[c]&&e&&b(function(){e({},d[c].data)})},c}])}(),function(){"use strict";angular.module("ramlEditorApp").factory("getNeighborLines",["getLineIndent","isArrayStarter",function(a,b){return function(c,d){"number"!=typeof d&&(d=c.getCursor().line);var e,f,g,h=[d],i=c.getLine(d).slice(0,c.getCursor().ch+1),j=a(i),k=b(i),l=c.lineCount();for(e=d-1;e>=0;e--)if(f=c.getLine(e),g=a(f),g.tabCount===j.tabCount){if(b(f))break;h.push(e)}else if(g.tabCount<j.tabCount){!k&&b(f)&&g.tabCount+1===j.tabCount&&h.push(e);break}for(e=d+1;l>e;e++){if(f=c.getLine(e),g=a(f),g.tabCount!==j.tabCount){if(g.tabCount<j.tabCount)break;if(!k||g.tabCount!==j.tabCount+1)continue}else if(b(f))break;h.push(e)}return h.sort().map(function(a){return c.getLine(a)})}}]).factory("getNeighborKeys",["getNeighborLines","extractKeyValue",function(a,b){return function(c){return a(c).map(function(a){return b(a).key})}}]).factory("ramlHint",["generateTabs","getNeighborKeys","getTabCount","getScopes","getEditorTextAsArrayOfLines","getNode",function(a,b,c,d,e,f){var g={},h="#%RAML 0.8",i=new RegExp("^\\s*"+h+"\\s*$","i");return g.suggestRAML=RAML.Grammar.suggestRAML,g.getScopes=function(a){return d(e(a))},g.shouldSuggestVersion=function(a){var b=a.getCursor().line,c=a.getLine(b),d=i.test(c);return 0===b&&!d},g.isSuggestionInUse=function(a,b,c){var d=c.map(b.metadata.isText?function(a){return a.getValue()?a.getValue().text:null}:function(a){return a.getKey()});return-1!==d.indexOf(a)||!b.metadata.isText&&b.metadata.canBeOptional&&-1!==d.indexOf(a+"?")},g.getSuggestions=function(a){if(g.shouldSuggestVersion(a))return[{key:"#%RAML 0.8",metadata:{category:"main",isText:!0}}];var b=f(a),d=b.selfOrParent(function(a){return a.getValue()&&a.getValue().isReference});if(d)return[];if(b.isEmpty){var e=a.getCursor().ch,h=c(e);if(h<=b.lineIndent.tabCount){var i=e%a.getOption("indentUnit")===0;if(!i)return[]}h=Math.min(h,b.lineIndent.tabCount),b=b.selfOrParent(function(a){return a.lineIndent.tabCount===h})}var j=null,k=[],l=[];if(b){var m=b.getPath().map(function(a){return a.getKey()});j=g.suggestRAML(m),k=j.suggestions;var n=Object.keys(k).some(function(a){return k[a].metadata.isText}),o=j.metadata&&j.metadata.isList&&n;l=o?b.getParent().getChildren():b.getSelfAndNeighbors(),l=l.filter(function(a){return a.isStructural})}return k=Object.keys(k).filter(function(a){return!g.isSuggestionInUse(a,k[a],l)}).sort().map(function(a){return{key:a,metadata:k[a].metadata}}),k.isList=j&&j.metadata?j.metadata.isList:!1,k},g.canAutocomplete=function(a){var b=a.getCursor(),c=a.getLine(b.line),d=c.trim(),e=c.indexOf(d),f=b.line;return function(){var a=d.indexOf("#");return f>0&&-1!==a&&b.ch>a+e}()?!1:function(){var a=d.indexOf("/");return 0===a&&b.ch>=a+e}()?!1:function(){var a=d.indexOf(": ");return-1!==a&&b.ch>=a+e+2}()?!1:function(){var a=d.indexOf("- ");return 0===a&&b.ch<a+e}()?!1:!0},g.autocompleteHelper=function(a){function b(a){return!a.metadata.dynamic}var c,d,e,f,h,i=a.getCursor(),j=a.getLine(i.line),k=j.trimLeft(),l=function(a,b,c){a.innerHTML=["<div>",c.displayText,"</div>",'<div class="category">',c.category,"</div>"].join("")};return g.canAutocomplete(a)?(d=g.getSuggestions(a),function(){var a=k.indexOf("#");-1!==a&&(0!==i.line||0!==a)&&(k=k.slice(0,a))}(),0===k.indexOf("- ")&&(k=k.slice(2)),function(){var a=k.match(/:(?:\s|$)/);a&&(k=k.slice(0,a.index),c=!0)}(),k=k.trim(),e=d.filter(b).map(function(a){var b=a.key;return a.metadata.isText||c||(b+=":"),{displayText:b,text:b,category:a.metadata.category,render:l}}),k&&(e=e.filter(function(a){return 0===a.text.indexOf(k)&&a.text.length!==k.length})),k?(f=j.indexOf(k),h=f+k.length):(f=i.ch,h=f),{word:k,list:e,from:CodeMirror.Pos(i.line,f),to:CodeMirror.Pos(i.line,h)}):void 0},g}])}(),function(){"use strict";angular.module("raml").value("snippets",{options:["options:","  description: <<insert text or markdown here>>"],head:["head:","  description: <<insert text or markdown here>>"],get:["get:","  description: <<insert text or markdown here>>"],post:["post:","  description: <<insert text or markdown here>>"],put:["put:","  description: <<insert text or markdown here>>"],"delete":["delete:","  description: <<insert text or markdown here>>"],trace:["trace:","  description: <<insert text or markdown here>>"],connect:["connect:","  description: <<insert text or markdown here>>"],patch:["patch:","  description: <<insert text or markdown here>>"],"<resource>":["/newResource:","  displayName: resourceName"],title:["title: My API"],version:["version: v0.1"],baseuri:["baseUri: http://server/api/{version}"]}).factory("ramlSnippets",["snippets",function(a){var b={};return b.getEmptyRaml=function(){return["#%RAML 0.8","title:"].join("\n")},b.getSnippet=function(b){var c=b.key,d=b.metadata||{},e=a[c.toLowerCase()];return e?e:d.isText?b.isList?[c]:[c,""]:[c+":"]},b}])}(),function(){"use strict";angular.module("codeMirror").value("highlightRootElement",function(a,b,c,d,e,f){return e<=d[a+".level"]&&(d[a+".level"]=0,d[a+".inside"]=!1),a.indexOf(f)>=0?(d[a+".level"]=e,d[a+".inside"]=!0,b):d[a+".inside"]?c:!1}).value("booleanValues",["true","false"]).factory("keywordRegex",["booleanValues",function(a){return new RegExp("\\b(("+a.join(")|(")+"))$","i")}]).factory("token",["keywordRegex","highlightRootElement","getLineIndent","indentUnit",function(a,b,c,d){return function(e,f){var g=e.peek(),h=f.escaped;if(f.escaped=!1,"#"===g&&"#%RAML 0.8"===e.string.trim())return e.skipToEnd(),"raml-tag";if("#"===g&&(0===e.pos||/\s/.test(e.string.charAt(e.pos-1))))return e.skipToEnd(),"comment";if(f.literal&&e.indentation()>f.keyCol)return e.skipToEnd(),"none";if(f.literal&&(f.literal=!1),e.sol()){if(f.keyCol=0,f.pair=!1,f.pairStart=!1,e.match(/---/))return"def";if(e.match(/\.\.\./))return"def";if(e.match(/\s*-\s+/))return"meta"}if(!f.pair&&e.match(/^\s*([a-z0-9\?\/\{\}\._\-])+(?=\s*:)/i)){var i=e.string.replace(/^\s+|\s+$/g,"").split(":")[0],j="?"===i.slice(-1)?i.slice(0,-1):i,k=c(e.string).tabCount;if(f.pair=!0,f.keyCol=e.indentation(),e.string.match(/^\s*\- /i)&&(f.keyCol+=d),(k<=f.methodLevel||0===i.indexOf("/"))&&(f.methodLevel=0,f.insideMethod=!1),-1!==["options","get","head","post","put","delete","trace","connect","patch"].indexOf(j))return f.methodLevel=k,f.insideMethod=!0,"method-title";if(f.insideMethod)return"method-content";var l=b("traits","trait-title","trait-content",f,k,i)||b("resourceTypes","resource-type-title","resource-type-content",f,k,i)||b("schemas","schema-title","schema-content",f,k,i)||b("securitySchemes","security-scheme-title","security-scheme-content",f,k,i);return l?l:0===i.indexOf("/")?"resource":"key"}if(f.pair&&e.match(/^:\s*/))return f.pairStart=!0,"meta";if(e.match(/^(\{|\}|\[|\])/))return"{"===g?f.inlinePairs++:"}"===g?f.inlinePairs--:"["===g?f.inlineList++:f.inlineList--,"meta";if(f.inlineList>0&&!h&&","===g)return e.next(),"meta";if(f.inlinePairs>0&&!h&&","===g)return f.keyCol=0,f.pair=!1,f.pairStart=!1,e.next(),"meta";if(f.pairStart){if(e.match(/^\s*(\||\>)\s*/))return f.literal=!0,"meta";if(e.match(/^\s*(\&|\*)[a-z0-9\._\-]+\b/i))return"variable-2";if(0===f.inlinePairs&&e.match(/^\s*-?[0-9\.\,]+\s?$/))return"number";if(f.inlinePairs>0&&e.match(/^\s*-?[0-9\.\,]+\s?(?=(,|\}))/))return"number";if(e.match(a))return"keyword"}return f.pairStart=!1,f.escaped="\\"===g,e.next(),null}}]).value("startState",function(){return{pair:!1,pairStart:!1,keyCol:0,inlinePairs:0,inlineList:0,literal:!1,escaped:!1}}).factory("yamlMode",["token","startState",function(a,b){return function(){return{token:a,startState:b}}}]).run(["codeMirror","yamlMode",function(a,b){var c=a.CodeMirror;c.defineMode("yaml",b),c.defineMIME("text/x-yaml","yaml")}])}(),function(){"use strict";angular.module("codeMirror").factory("codeMirrorHighLight",["indentUnit",function(a){var b={};return b.highlight=function(a){return b.indentationOverlay={token:function(a,b){if(void 0===b.cutoff||a.column()<=b.cutoff){if(a.match("  "))return"indent indent-col-"+a.column();if(a.match(" "))return"indent-incomplete"}a.skipToEnd()},startState:function(){return{}}},b.yaml=CodeMirror.overlayMode(CodeMirror.getMode(a,"yaml"),b.indentationOverlay),b.xml=CodeMirror.overlayMode(CodeMirror.getMode(a,"xml"),b.indentationOverlay),b.json=CodeMirror.overlayMode(CodeMirror.getMode(a,{name:"javascript",json:!0}),b.indentationOverlay),b.markdown=CodeMirror.overlayMode(CodeMirror.getMode(a,"gfm"),b.indentationOverlay),{startState:function(){return{token:b._yaml,localMode:null,localState:null,yamlState:b.yaml.startState()}},copyState:function(a){var c;return a.localState&&(c=CodeMirror.copyState(a.localMode,a.localState),c.parentIndentation||(c.parentIndentation=a.localState.parentIndentation)),{token:a.token,localMode:a.localMode,localState:c,yamlState:CodeMirror.copyState(b.yaml,a.yamlState)}},innerMode:function(a){return{state:a.localState||a.yamlState,mode:a.localMode||b.yaml}},token:function(a,b){return b.token(a,b)}}},b._yaml=function(a,c){return/(content|description):(\s?)\|/.test(a.string)&&b._setMode("markdown",a,c),/application\/json:/.test(a.string)&&b._setMode("json",a,c,2),/text\/xml:/.test(a.string)&&b._setMode("xml",a,c,2),b.yaml.token(a,c.yamlState)},b._xml=function(a,c){return b._applyMode("xml",a,c)},b._json=function(a,c){return b._applyMode("json",a,c)},b._markdown=function(a,c){return b._applyMode("markdown",a,c)},b._setMode=function(c,d,e,f){e.token=b["_"+c],e.localMode=b[c],e.localState=b[c].startState(),e.localState.parentIndentation=d.indentation()+(f||0),d.string.match(/^\s*\- /i)&&(e.localState.parentIndentation+=a),"markdown"===c&&(e.localState.base.parentIndentation=e.localState.parentIndentation)},b._applyMode=function(a,c,d){return/(schema|example):(\s?)\|/.test(c.string)?b._yaml(c,d):c.string.trim().length>0&&c.indentation()<=d.localState.parentIndentation?(d.token=b._yaml,d.localState=d.localMode=null,b._yaml(c,d)):(d.localState.overlay.cutoff=d.localState.parentIndentation,b[a].token(c,d.localState))},b}])}(),function(){"use strict";function a(a,b,c){c=c||{},"/"===a.slice(-1)&&a.length>1&&(a=a.slice(0,-1)),this.type="file",this.path=a,this.name=a.slice(a.lastIndexOf("/")+1),this.isDirectory=!1,this.name.lastIndexOf(".")>0&&(this.extension=this.name.slice(this.name.lastIndexOf(".")+1)),this.contents=b||"",this.persisted=c.persisted||!1,this.dirty=c.dirty||!this.persisted,this.root=c.root}angular.module("fs",["ngCookies","raml","utils"]).factory("ramlRepository",["$q","$rootScope","ramlSnippets","fileSystem",function(b,c,d,e){function f(a){return".meta"!==a.path.slice(-5)}function g(a){return function(b){throw a.error=b,b}}function h(a,b){return a.isDirectory===b.isDirectory?a.name.localeCompare(b.name):a.isDirectory?-1:1}function i(a,b){for(var c,d=0,e=b.children.length-1;e>=d;)c=Math.floor((d+e)/2),h(b.children[c],a)>0?e=c-1:d=c+1;return d}function j(a,b){return"/"===a.path?"/"+b:a.path+"/"+b}function k(a,b){var c=a.path.slice(0,a.path.lastIndexOf("/"));return c+"/"+b}function l(b,c,d){"/"===b.slice(-1)&&b.length>1&&(b=b.slice(0,-1)),d=d||[],this.type="directory",this.path=b,this.name=b.slice(b.lastIndexOf("/")+1),this.meta=c,this.collapsed=!0,this.isDirectory=!0;var e={folder:[],file:[]};d.forEach(function(a){e[a.type||"file"].push(a)});var g=e.file.filter(f).map(function(b){return new a(b.path,b.contents,{dirty:!1,persisted:!0,root:b.root})}),i=e.folder.map(function(a){return new l(a.path,a.meta,a.children)});this.children=i.concat(g).sort(h)}var m={},n="/",o={};return m.supportsFolders=e.supportsFolders||!1,l.prototype.getDirectories=function(){return this.children.filter(function(a){return a.isDirectory})},l.prototype.getFiles=function(){return this.children.filter(function(a){return!a.isDirectory})},l.prototype.forEachChildDo=function(a){for(var b,c=this.children.slice();c.length>0;)b=c.shift(),b.isDirectory&&(c=c.concat(b.children)),a.apply(b,[b])},l.prototype.hasChildren=function(a){var b=a.path.slice(0,a.path.lastIndexOf("/"));return 0===b.length&&(b="/"),b.length>=this.path.length&&this.path===b.slice(0,this.path.length)},l.prototype.sortChildren=function(){this.children.sort(h)},m.sortingFunction=function(){return h}(),m.getParent=function(a){var b=a.path.slice(0,a.path.lastIndexOf("/"));return 0===b.length&&(b="/"),m.getByPath(b)},m.canExport=function(){return e.hasOwnProperty("exportFiles")},m.exportFiles=function(){return e.exportFiles()},m.createDirectory=function(a,b){var d=j(a,b),f=new l(d),g=i(f,a);return a.children.splice(g,0,f),e.createFolder(f.path).then(function(){return c.$broadcast("event:raml-editor-directory-created",f),f})},m.loadDirectory=function(a){return a=a||n,o={},e.directory(a).then(function(b){return o[a]=new l(b.path,b.meta,b.children),o[a]})},m.removeDirectory=function(a){var d=[];a.getDirectories().forEach(function(a){d.push(m.removeDirectory(a))}),a.getFiles().forEach(function(a){d.push(m.removeFile(a))});var f=m.getParent(a),g=f.children.indexOf(a);return-1!==g&&f.children.splice(g,1),b.all(d).then(function(){return e.remove(a.path)}).then(function(a){c.$broadcast("event:raml-editor-directory-removed",a)})},m.renameDirectory=function(a,b){var d=k(a,b),f=e.rename(a.path,d);return a.forEachChildDo(function(b){b.path=b.path.replace(a.path,d)}),f.then(function(){return a.name=b,a.path=d,c.$broadcast("event:raml-editor-filetree-modified",a),a},g(a))},m.saveFile=function(a){function b(){return a.dirty=!1,a.persisted=!0,a}return e.save(a.path,a.contents).then(b,g(a))},m.renameFile=function(a,d){function f(){return a.name=d,a.path=h,c.$broadcast("event:raml-editor-filetree-modified",a),a}var h=k(a,d),i=a.persisted?e.rename(a.path,h):b.when(a);return i.then(f,g(a))},m.loadFile=function(a){function b(b){return a.dirty=!1,a.persisted=!0,a.loaded=!0,a.contents=b,a}return e.load(a.path).then(b,g(a))},m.removeFile=function(a){function d(){return a.dirty=!1,a.persisted=!1,Object.freeze(a)}var f,h=m.getParent(a);return f=a.persisted?e.remove(a.path):b.when(a),f.then(d,g(a)).then(function(){var b=h.children.indexOf(a);-1!==b&&h.children.splice(b,1),c.$broadcast("event:raml-editor-file-removed",a)})},m.createFile=function(b,e){var f=j(b,e),g=new a(f),h=i(g,b);return b.children.splice(h,0,g),"raml"===g.extension&&(g.contents=d.getEmptyRaml()),c.$broadcast("event:raml-editor-file-created",g),g},m.getByPath=function(a){if("/"===a.slice(-1)&&"/"!==a&&(a=a.slice(0,-1)),o.hasOwnProperty(a))return o[a];for(var b,c=o["/"].children.slice();c.length;){if(b=c.shift(),b.path===a)return o[a]=b,b;b.isDirectory&&(c=c.concat(b.children))}return void 0},m.rename=function(a,b){return a.isDirectory?m.renameDirectory(a,b):m.renameFile(a,b)},m.remove=function(a){return a.isDirectory?m.removeDirectory(a):m.removeFile(a)},m.move=function(a,c){if(c.isDirectory){var d,f=j(c,a.name);return a.isDirectory?(d=e.rename(a.path,f),a.forEachChildDo(function(b){b.path=b.path.replace(a.path,f)})):d=a.persisted?e.rename(a.path,f):b.when(a),d.then(function(){return a.path=f,a},g(a))}},m.saveMeta=function(b,c){var d=new a(b.path+".meta",JSON.stringify(c));return m.saveFile(d).then(function(){return c})},m.loadMeta=function(b){var c=new a(b.path+".meta");return m.loadFile(c).then(function(a){return JSON.parse(a.contents)},function(){return{}})},m}])}(),function(){"use strict";function a(){}a.prototype={directory:function(a){throw"Not implemented: FileSystem list invoked with [fullpath="+a+"]"},save:function(a,b){throw"Not implemented: FileSystem save invoked with [fullpath="+a+"] and [content="+b+"]"},createFolder:function(a){throw"Not implemented: FileSystem createFolder invoked with [fullpath="+a+"]"},load:function(a){throw"Not implemented: FileSystem load invoked with [fullpath="+a+"]"},remove:function(a){throw"Not implemented: FileSystem remove invoked with [fullpath="+a+"]"},rename:function(a,b){throw"Not implemented: FileSystem rename invoked with [source="+a+"] and [destination="+b+"]"}},angular.module("fs").factory("fileSystem",["$injector","config",function(a,b){var c=b.get("fsFactory"),d=c&&a.has(c);return d||b.set("fsFactory",c="localStorageFileSystem"),a.get(c)}])}(),function(){"use strict";angular.module("fs").constant("LOCAL_PERSISTENCE_KEY","localStorageFilePersistence").constant("FOLDER","folder").factory("localStorageHelper",["LOCAL_PERSISTENCE_KEY",function(a){return{forEach:function(b){for(var c in localStorage)localStorage.hasOwnProperty(c)&&0===c.indexOf(a+".")&&b(JSON.parse(localStorage.getItem(c)))},has:function(a){var b=!1;return a=a||"/",this.forEach(function(c){c.path.toLowerCase()===a.toLowerCase()&&(b=!0)}),b},set:function(b,c){localStorage.setItem(a+"."+b,JSON.stringify(c))},get:function(b){return JSON.parse(localStorage.getItem(a+"."+b))},remove:function(b){localStorage.removeItem(a+"."+b)}}}]).factory("localStorageFileSystem",["$q","$timeout","localStorageHelper","FOLDER",function(a,b,c,d){function e(a){return'file with path="'+a+'" does not exist'}function f(a,b){a.type===d&&(a.children=b(a.path))}function g(a){var b=[];return c.forEach(function(c){c.path.toLowerCase()===a.toLowerCase()&&(f(c,h),b.push(c))
}),b.length>0?b[0]:null}function h(a){a.lastIndexOf("/")!==a.length-1&&(a+="/");var b=[];return c.forEach(function(c){c.path.toLowerCase()!==a.toLowerCase()&&m(c.path)+"/"===a&&(f(c,h),b.push(c))}),b}function i(a){return 0!==a.indexOf("/")?{valid:!1,reason:'Path should start with "/"'}:{valid:!0}}function j(a){var b=m(a);return c.has(b)||""===b?!0:!1}function k(a){var b=!1;return c.forEach(function(c){c.path.toLowerCase()!==a.toLowerCase()&&0===c.path.indexOf(a)&&(b=!0)}),b}function l(a){var b=i(a);if(!b.valid)throw"Invalid Path!";return a.lastIndexOf("/")===a.length-1&&(a=a.slice(0,-1)),a.slice(a.lastIndexOf("/")+1)}function m(a){var b=i(a);if(!b.valid)throw"Invalid Path!";return a.lastIndexOf("/")===a.length-1&&(a=a.slice(0,-1)),a.slice(0,a.lastIndexOf("/"))}var n={},o=500;return n.supportsFolders=!0,n.directory=function(d){var e=a.defer();return b(function(){var a=i(d);return a.valid?(c.has("/")||c.set(d,{path:"/",name:"",type:"folder",meta:{created:Math.round((new Date).getTime()/1e3)}}),void e.resolve(g(d))):(e.reject(a.reason),e.promise)},o),e.promise},n.save=function(e,f){var g=a.defer();return b(function(){var a=l(e),b=c.get(e);if(!j(e))return g.reject("Parent folder does not exists"),g.promise;var h={};if(b){if(b.type===d)return g.reject("file has the same name as a folder"),g.promise;b.content=f,b.meta.lastUpdated=Math.round((new Date).getTime()/1e3),h=b}else h={path:e,name:a,content:f,type:"file",meta:{created:Math.round((new Date).getTime()/1e3)}};c.set(e,h),g.resolve()},o),g.promise},n.createFolder=function(d){var e=a.defer(),f=i(d);if(!f.valid)return e.reject(f.reason),e.promise;if(c.has(d))return e.reject("Folder already exists"),e.promise;var g=m(d);return c.has(g)?(b(function(){c.set(d,{path:d,name:l(d),type:"folder",meta:{created:Math.round((new Date).getTime()/1e3)}}),e.resolve()},o),e.promise):(e.reject("Parent folder does not exists"),e.promise)},n.load=function(d){var f=a.defer();return b(function(){var a=c.get(d);a&&"file"===a.type?f.resolve(c.get(d).content):f.reject(e(d))},o),f.promise},n.remove=function(e){var f=a.defer();return b(function(){var a=c.get(e);return a&&a.type===d&&k(e)?(f.reject("folder not empty"),f.promise):(c.remove(e),void f.resolve())},o),f.promise},n.rename=function(e,f){var g=a.defer();return b(function(){var a=c.get(e);if(!a)return g.reject("Source file or folder does not exists."),g.promise;var b=c.get(f);return b?(g.reject("File or folder already exists."),g.promise):j(f)?(a.path=f,a.name=l(f),c.remove(f),c.remove(e),c.set(f,a),a.type===d&&c.forEach(function(a){if(a.path.toLowerCase()!==e.toLowerCase()&&0===a.path.indexOf(e)){var b=f+a.path.substring(e.length);c.remove(a.path),a.path=b,c.set(b,a)}}),void g.resolve()):(g.reject("Destination folder does not exist."),g.promise)},o),g.promise},n}])}(),function(){"use strict";angular.module("ramlEditorApp").service("mockingServiceClient",["$http","$q","$window",function(a,b,c){var d=this;d.proxy=null,d.host="http://mocksvc.mulesoft.com",d.base="/mocks",d.buildURL=function(){var a=d.host+d.base+[""].concat(Array.prototype.slice.call(arguments,0)).join("/"),b=d.proxy||c.RAML.Settings.proxy;return b&&(a=b+a),a},d.simplifyMock=function(a){return{id:a.id,baseUri:a.baseUri,manageKey:a.manageKey}},d.getMock=function(c){return a.get(d.buildURL(c.id,c.manageKey)).then(function(a){return d.simplifyMock(a.data)},function(a){return 404!==a.status?b.reject(a):void 0})},d.createMock=function(b){return a.post(d.buildURL(),b).then(function(a){return d.simplifyMock(a.data)})},d.updateMock=function(b){return a({method:"PATCH",url:d.buildURL(b.id,b.manageKey),data:{raml:b.raml,json:b.json}}).then(function(a){return d.simplifyMock(angular.extend(b,a.data))})},d.deleteMock=function(b){return a.delete(d.buildURL(b.id,b.manageKey))}}])}(),function(){"use strict";angular.module("ramlEditorApp").service("mockingService",["mockingServiceClient","ramlRepository",function(a,b){function c(a){return b.loadMeta(a).then(function(a){return a.mock})}function d(a,c){return b.loadMeta(a).then(function(d){return d.mock=c,b.saveMeta(a,d)}).then(function(){return c})}var e=this;e.getMock=function(a){return c(a)},e.createMock=function(b,c){return a.createMock({raml:b.contents,json:c}).then(function(a){return d(b,a)})},e.updateMock=function(b,e){return c(b).then(function(c){return c&&a.updateMock(angular.extend(c,{raml:b.contents,json:e}))}).then(function(a){return d(b,a)})},e.deleteMock=function(b){return c(b).then(function(b){return b&&a.deleteMock(b)}).then(function(){return d(b,null)})}}])}(),function(){"use strict";angular.module("ramlEditorApp").service("confirmModal",["$modal",function(a){var b=this;return b.open=function(b,c){return a.open({templateUrl:"views/confirm-modal.html",controller:"ConfirmController",resolve:{message:function(){return b},title:function(){return c}}}).result},b}]).controller("ConfirmController",["$modalInstance","$scope","message","title",function(a,b,c,d){b.data={message:c,title:d}}])}(),function(){"use strict";angular.module("ramlEditorApp").service("newNameModal",["$modal",function(a){var b=this;return b.open=function(b,c,d,e){return a.open({templateUrl:"views/new-name-modal.html",controller:"NewNameController",resolve:{message:function(){return b},title:function(){return e},defaultName:function(){return c},validations:function(){return d}}}).result},b}]).controller("NewNameController",["$modalInstance","$scope","message","defaultName","validations","title",function(a,b,c,d,e,f){b.input={newName:d,message:c,title:f},b.validationErrorMessage="",b.isValid=function(a){if(a&&a.length>0)for(var c=0;c<e.length;c++)if(!e[c].validate(a))return b.validationErrorMessage=e[c].message,!1;return!0},b.submit=function(c){return c.$invalid?void(c.$submitted=!0):void a.close(b.input.newName)}}])}(),function(){"use strict";angular.module("stringFilters",[]).filter("dasherize",function(){return function(a){return a?a.toLowerCase().trim().replace(/\s/g,"-"):""}})}(),function(){"use strict";angular.module("ramlEditorApp").constant("UPDATE_RESPONSIVENESS_INTERVAL",800).service("ramlParserFileReader",["$http","$q","ramlParser","ramlRepository","safeApplyWrapper",function(a,b,c,d,e){function f(a){return d.loadFile({path:a}).then(function(a){return a.contents})}function g(b){return a.get(b,{transformResponse:null}).then(function(a){return a.data},function(a){var c="cannot fetch "+b+", check that the server is up and that CORS is enabled";throw a.status&&(c+="(HTTP "+a.status+")"),c})}this.readFileAsync=e(null,function(a){var c=/^https?:\/\//.test(a)?g(a):f(a),d=new b.defer;return c.then(d.resolve.bind(d),d.reject.bind(d)),d.promise})}]).controller("ramlEditorMain",["UPDATE_RESPONSIVENESS_INTERVAL","$scope","$rootScope","$timeout","$window","safeApply","safeApplyWrapper","debounce","throttle","ramlHint","ramlParser","ramlParserFileReader","ramlRepository","eventService","codeMirror","codeMirrorErrors","config","$prompt","$confirm","$modal",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t){function u(a){var b="";return a&&(b=a.path,a.dirty&&(b="* "+b)),b}function v(a){function b(a){return a.__isFold}function c(a){return a.find().from.line}function d(a,b){return Math.min(a,b)}var e={line:a};return x.findMarksAt(e).filter(b).map(c).reduce(d,y)}function w(a,b,c){return c===b?a:"Error on line "+(b+1)+": "+a}var x,y,z;e.setTheme=function(a){q.set("theme",a),b.theme=c.theme=a,f(b)},b.$on("event:raml-editor-file-selected",function(a,c){o.configureEditor(x,c.extension),z=c,n.broadcast("event:raml-parsed",{}),x.setValue(c.contents),b.fileParsable=b.getIsFileParsable(c)}),b.$on("event:raml-editor-file-removed",function(a,b){z===b&&(z=void 0,x.setValue(""))}),b.canExportFiles=function(){return m.canExport()},b.supportsFolders=m.supportsFolders,b.sourceUpdated=function(){var c=x.getValue(),d=b.fileBrowser.selectedFile;b.clearErrorMarks(),d.contents=c,b.fileParsable=b.getIsFileParsable(d),h(function(){n.broadcast("event:raml-source-updated",c)},q.get("updateResponsivenessInterval",a))},b.loadRaml=function(a,b){return k.load(a,b,{validate:!0,transform:!0,compose:!0,reader:l})},b.clearErrorMarks=function(){p.clearAnnotations(),b.hasErrors=!1},n.on("event:raml-source-updated",function(a,c){return b.clearErrorMarks(),b.fileParsable&&""!==c.trim()?void b.loadRaml(c,((b.fileBrowser||{}).selectedFile||{}).path).then(g(b,function(a){b.fileBrowser.selectedFile.raml=angular.copy(a),n.broadcast("event:raml-parsed",a)}),g(b,function(a){n.broadcast("event:raml-parser-error",a)})):(b.currentError=void 0,void(y=void 0))}),n.on("event:raml-parsed",g(b,function(a,c){b.title=c.title,b.version=c.version,b.currentError=void 0,y=void 0})),n.on("event:raml-parser-error",g(b,function(a,c){var d=c.problem_mark,e=0,f=0,g=c.message;y=e,b.currentError=c,d&&(y=d.line,e=v(y),f=d.column),p.displayAnnotations([{line:e+1,column:f+1,message:w(g,y,e)}])})),b.openHelp=function(){t.open({templateUrl:"views/help.html"})},b.getIsFileParsable=function(a,c){return"raml"!==a.extension?!1:(c=arguments.length>1?c:a.contents,0!==c.search(/^\s*#%RAML( \d*\.\d*)?\s*(\n|$)/)?!1:((b.fileBrowser||{}).rootFile||a)!==a?!1:!0)},b.getIsMockingServiceVisible=function(){return b.fileParsable?!0:!1},b.getIsShelfVisible=function(){return b.fileParsable?!0:!1},b.getIsConsoleVisible=function(){return b.fileParsable?!0:!1},b.toggleShelf=function(){b.shelf.collapsed=!b.shelf.collapsed,q.set("shelf.collapsed",b.shelf.collapsed)},b.getSelectedFileAbsolutePath=function(){return u(z)},n.on("event:toggle-theme",function(){e.setTheme("dark"===b.theme?"light":"dark")}),function(){b.currentError=void 0,b.theme=c.theme=q.get("theme","dark"),b.shelf={},b.shelf.collapsed=JSON.parse(q.get("shelf.collapsed","false")),b.editor=x=o.initEditor(),x.on("fold",function(a,c,d){c.line<=y&&y<=d.line&&p.displayAnnotations([{line:c.line+1,message:w(b.currentError.message,y,c.line)}])}),x.on("unfold",function(){var a=v(y),c=w(b.currentError.message,y,a);p.displayAnnotations([{line:a+1,message:c}])}),x.on("change",function(){b.sourceUpdated()}),e.onbeforeunload=function(){var a=!1;return b.homeDirectory.forEachChildDo(function(b){a=a||b.dirty}),a?"WARNING: You have unsaved changes. Those will be lost if you leave this page.":void 0}}()}])}(),function(){"use strict";angular.module("ramlEditorApp").factory("applySuggestion",["ramlSnippets","generateTabs","getNode",function(a,b,c){return function(d,e){var f=a.getSnippet(e),g=c(d),h="-"===g.line.trim(),i=g.lineIndent.tabCount,j=h?" ":"",k=h?"":b(i);if(e.isList&&!h){var l=g.selfOrPrevious(function(a){return a.isArrayStarter});!l||g.lineIndent.tabCount===l.lineIndent.tabCount&&g.lineNumber!==l.lineNumber||e.metadata&&e.metadata.isText?j="- ":g.isArrayStarter&&(k=b(i+1))}for(var m=f.map(function(a,b){return k+(0===b?j:"")+a}).join("\n");;){if(g.isEmpty)break;var n=c(d,g.lineNumber+1);if(!n||n.lineIndent.tabCount<=i)break;g=n}var o={line:g.lineNumber,ch:g.line.trimRight().length},p={line:o.line,ch:g.line.length},q=!g.isEmpty&&!h;q&&(m="\n"+m),d.replaceRange(m,o,p),d.setCursor({line:o.line+f.length-(q?0:1)}),d.focus()}}]).value("suggestionKeyToTitleMapping",{"<resource>":"New Resource"}).factory("updateSuggestions",["ramlHint","suggestionKeyToTitleMapping",function(a,b){return function(c){var d=a.getSuggestions(c),e={},f={sections:[]};return d.forEach(function(a){a.title=b[a.key]||a.key,e[a.metadata.category]=e[a.metadata.category]||{name:a.metadata.category,items:[]},e[a.metadata.category].items.push(a),a.isList=d.isList}),Object.keys(e).forEach(function(a){f.sections.push(e[a])}),f.path=d.path,f}}]).controller("ramlEditorShelf",["$scope","safeApplyWrapper","applySuggestion","updateSuggestions",function(a,b,c,d){var e=a.editor;a.cursorMoved=b(null,function(){a.model=d(e)}),a.orderSections=function(a){var b=["root","docs","methods","parameters","responses","security","resources","traits and types"].indexOf(a.name.toLowerCase());return-1===b?b.length:b},a.itemClick=function(a){c(e,a)},e.on("cursorActivity",a.cursorMoved)}])}(),function(){"use strict";angular.module("ramlEditorApp").constant("NOTIFICATION_TIMEOUT",3e3).controller("notifications",["NOTIFICATION_TIMEOUT","eventService","$scope","$timeout",function(a,b,c,d){function e(){var b;f.length&&(b=f.splice(0,1)[0],c.message=b.message,c.expires=b.expires,c.level=b.level||"info",c.shouldDisplayNotifications=!0,b.expires&&d(function(){c.shouldDisplayNotifications=!1,e()},a))}var f=[];c.shouldDisplayNotifications=!1,b.on("event:notification",function(a,b){f.push(JSON.parse(JSON.stringify(b))),e()}),c.hideNotifications=function(){c.shouldDisplayNotifications=!1,e()}}])}(),function(){"use strict";angular.module("ramlEditorApp").controller("mockingServiceController",["$scope","mockingService","getNode",function(a,b,c){function d(){function b(b,c,d){a.editor.setLine(b,(d||"")+a.editor.getLine(b)+"\n"+c)}for(var d="baseUri: "+a.mock.baseUri,e=c(a.editor,0);e;){if("baseUri"===e.getKey())return void b(e.lineNumber,d,"#");e=e.getNextSibling()}for(var f=0;a.editor.getLine(f);f++)if("---"===a.editor.getLine(f).trim())return void b(f,d);b(0,d)}function e(){var b="baseUri: "+a.mock.baseUri,c=void 0,d=void 0;for(c=0;c<a.editor.lineCount();c++)if(d=a.editor.getLine(c).trim(),d===b){a.editor.removeLine(c);break}for(c=Math.min(c,a.editor.lineCount()-1);c>=0;c--)if(d=a.editor.getLine(c).trim(),0===d.indexOf("#")&&0===d.slice(1).trim().indexOf("baseUri: ")){a.editor.setLine(c,d.slice(1).trim());break}}function f(b){return a.loading=!0,b.finally(function(){a.loading=!1})}function g(b){a.mock=b,a.enabled=!!b}function h(){f(b.getMock(a.fileBrowser.selectedFile).then(g))}function i(){f(b.createMock(a.fileBrowser.selectedFile,a.fileBrowser.selectedFile.raml).then(g).then(d))}function j(){b.updateMock(a.fileBrowser.selectedFile,a.fileBrowser.selectedFile.raml).then(g)}function k(){f(b.deleteMock(a.fileBrowser.selectedFile).then(function(){e()}).then(g))}a.toggleMockingService=function(){return a.fileBrowser.selectedFile?a.enabled?void k():void i():void 0},a.$watch("fileBrowser.selectedFile",function(a){a?h():g()}),a.$watch("fileBrowser.selectedFile.raml",function(){a.enabled&&j()})}])}(),function(){"use strict";angular.module("splitter",[]).directive("ngSplitter",["$window","config",function(a,b){function c(a){return a.attr("ng-splitter-collapse-target")}function d(a){return a[c(a)]()}function e(a){return a[{next:"prev",prev:"next"}[c(a)]]()}function f(a,b){return d(a).css("min-width",Math.max(0,b)+"px"),Math.max(0,b)}function g(a,b,g){var i=d(a),j=h(i,b),k=e(a),l=h(k,b),m={next:1,prev:-1}[c(a)];return 0>l+g*m&&(g=l*m*-1),g&&(j=f(a,j-g*m)),j}function h(a,b){var c="offset"+b[0].toUpperCase()+b.slice(1);return a[0][c]}function i(a,c){return b.get("splitterSize_"+a.attr("id"))||j(a,c)}function j(a,c){var e=h(d(a),c);return b.set("splitterSize_"+a.attr("id"),e),e}function k(a){return"true"===b.get("splitterCollapsed_"+a.attr("id"))}function l(a,c){b.set("splitterCollapsed_"+a.attr("id"),c)}function m(a,b){b=arguments.length>1?b:!k(a),a.toggleClass("collapsed",b),d(a).toggleClass("hide-display",b),l(a,b)}return angular.element.prototype.prev||(angular.element.prototype.prev=function(){var a;if(this.length)for(a=this[0].previousSibling;null!==a&&1!==a.nodeType;)a=a.previousSibling;return angular.isDefined(a)?angular.element(a):this}),{restrict:"A",link:function(b,c,d){var e,h=!1,l=!0,n="vertical"===d.ngSplitter,o=n?"width":"height",p=n?"clientX":"clientY",q=i(c,o),r=k(c),s=c.parent();f(c,q),m(c,r),c.on("mousedown",function(a){0===a.button&&(e=a[p],q=i(c,o),r=k(c),h=!0,s.addClass("noselect"))}),angular.element(a).on("mousemove",function(a){if(h){l=!0;var b=0===g(c,o,a[p]-e);b!==r&&m(c,b),e=a[p],r=b}}).on("mouseup",function(){h&&(r?(m(c,!0),f(c,q)):j(c,o),h=!1,s.removeClass("noselect"))}),c.children(".split").on("mousedown",function(){l=!1}),c.children(".split").on("mouseup",function(){l||(m(c),l=!0,h=!1)})}}}])}(),function(){"use strict";angular.module("ramlEditorApp").directive("ramlEditor",function(){return{restrict:"E",templateUrl:"views/raml-editor-main.tmpl.html",controller:"ramlEditorMain"}})}(),function(){"use strict";angular.module("ramlEditorApp").directive("ramlEditorContextMenu",["$injector","$window","confirmModal","newNameModal","ramlRepository","scroll",function(a,b,c,d,e,f){function g(a){var b=[{label:"Save",execute:function(){e.saveFile(a)}},{label:"Delete",execute:function(){var b,d;a.isDirectory?(b='Are you sure you want to delete "'+a.name+'" and all its contents?',d="Remove folder"):(b='Are you sure you want to delete "'+a.name+'"?',d="Remove file"),c.open(b,d).then(function(){e.remove(a)})}},{label:"Rename",execute:function(){var b=e.getParent(a),c=a.isDirectory?"Enter a new name for this folder:":"Enter a new name for this file:",f=a.isDirectory?"Rename a folder":"Rename a file",g=[{message:"This name is already taken.",validate:function(a){return!b.children.some(function(b){return b.name.toLowerCase()===a.toLowerCase()})}}];d.open(c,a.name,g,f).then(function(b){e.rename(a,b)})}}];return a.isDirectory?b.slice(1):b}function h(a){var b=a.getBoundingClientRect();return!(b.top>=0&&b.left>=0&&b.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&b.right<=(window.innerWidth||document.documentElement.clientWidth))}return{restrict:"E",templateUrl:"views/raml-editor-context-menu.tmpl.html",link:function(a,c){function d(a,b){var c=b.getBoundingClientRect(),d=c.top+.5*c.height,e=c.left+.5*c.width,f=angular.element(a[0].children[0]);f.css("top",d+"px"),f.css("left",e+"px"),setTimeout(function(){h(f[0])&&f.css("top",d-f[0].offsetHeight+"px")},0)}function e(){f.enable(),a.$apply(function(){delete j.target,a.opened=!1,b.removeEventListener("click",e),b.removeEventListener("keydown",i)})}function i(a){27===a.which&&(a.preventDefault(),e())}var j={open:function(h,j){f.disable(),this.target=j,a.actions=g(j),h.stopPropagation(),d(c,h.target),b.addEventListener("click",e),b.addEventListener("keydown",i),a.opened=!0}};a.registerContextMenu(j)},scope:!0}}])}(),function(){"use strict";angular.module("ramlEditorApp").directive("ramlEditorFileBrowser",["$q","$window","$rootScope","config","eventService","ramlRepository","newNameModal",function(a,b,c,d,e,f,g){function h(h){function i(a){if(0!==a.path.lastIndexOf("/")){var b=f.getParent(a);b.collapsed=!1,i(b)}}function j(a){83!==a.which||!a.metaKey&&!a.ctrlKey||a.shiftKey||a.altKey||(a.preventDefault(),h.$apply(function(){m.saveFile(m.selectedFile)}))}function k(){var a="Untitled-1.raml",b="File system has no files, please input a name for the new file:",c=[],d="Add a new file";g.open(b,a,c,d).then(function(a){f.createFile(h.homeDirectory,a)},function(){f.createFile(h.homeDirectory,a)})}function l(a){for(var b=[a],c=0;c<b.length;){for(var d=b[c],e=d.children,f=void 0,g=0;g<e.length;g++){if(f=e[g],"file"===f.type&&f.root)return f;"directory"===f.type&&b.push(f)}c+=1}}var m=this,n=angular.noop,o=void 0;h.toggleFolderCollapse=function(a){a.collapsed=!a.collapsed},h.fileTreeOptions=function(){var a=!1;return{accept:function(b,c,d){var e,g=b.$modelValue,i=0>d?h.homeDirectory:c.$modelValue[d];i.isDirectory||(i=c.$nodeScope?c.$nodeScope.$modelValue:h.homeDirectory);var j=f.getParent(g).path===i.path||i.path.slice(0,g.path.length)===g.path;return a=i.children.filter(function(a){return a.name===g.name}).length>0,e=!a&&!j,m.cursorState=e?"ok":"no",e},dropped:function(a){var b=a.source.nodeScope.$modelValue,c=a.dest.nodesScope.$nodeScope?a.dest.nodesScope.$nodeScope.$modelValue:h.homeDirectory;f.move(b,c).then(function(){m.select(b)})},dragStop:function(b){m.cursorState="",!b.canceled&&a&&c.$broadcast("event:notification",{message:"Failed: duplicate file name found in the destination folder.",expires:!0,level:"error"})}}}(),m.select=function(a){var b=a.isDirectory?m.selectDirectory:m.selectFile;b(a)},m.selectFile=function(b){if(m.selectedFile&&m.selectedFile.$$hashKey===b.$$hashKey)return void(m.currentTarget=b);n();var c=b.loaded||!b.persisted,d=c?a.when(b):f.loadFile(b);d.then(function(a){m.selectedFile=m.currentTarget=a,h.$emit("event:raml-editor-file-selected",a),n=h.$watch("fileBrowser.selectedFile.contents",function(b,c){b!==c&&(a.dirty=!0)})})},m.selectDirectory=function(a){m.currentTarget!==a&&(m.currentTarget=a,h.$emit("event:raml-editor-directory-selected",a))},m.saveFile=function(a){f.saveFile(a).then(function(){e.broadcast("event:notification",{message:"File saved.",expires:!0})})},m.showContextMenu=function(a,b){o.open(a,b)},m.contextMenuOpenedFor=function(a){return o&&o.target===a},b.addEventListener("keydown",j),h.fileBrowser=m,h.registerContextMenu=function(a){o=a},h.$on("event:raml-editor-file-created",function(a,b){m.selectFile(b)}),h.$on("event:raml-editor-directory-created",function(a,b){m.selectDirectory(b)}),h.$on("event:raml-editor-file-selected",function(a,b){i(b)}),h.$on("event:raml-editor-directory-selected",function(a,b){i(b)}),h.$on("event:raml-editor-filetree-modified",function(a,b){var c=f.getParent(b);c.sortChildren()}),h.$on("event:raml-editor-file-removed",function(a,b){var c=[];h.homeDirectory.forEachChildDo(function(a){a.isDirectory||c.push(a)}),b===m.selectedFile&&c.length>0?m.selectFile(c[0]):0===c.length&&setTimeout(k,0)}),h.$on("$destroy",function(){b.removeEventListener("keydown",j)}),h.$watch("fileBrowser.selectedFile.path",function(a,b){a!==b&&d.set("currentFile",JSON.stringify({path:a,name:a.slice(a.lastIndexOf("/")+1)}))}),f.loadDirectory().then(function(a){h.homeDirectory=a,m.rootFile=l(a);var b=[];if(h.homeDirectory.forEachChildDo(function(a){a.isDirectory||b.push(a)}),!b.length)return void k();var c=JSON.parse(d.get("currentFile","{}")),e=f.getByPath(c.path)||m.rootFile||b[0];m.selectFile(e)})}return{restrict:"E",templateUrl:"views/raml-editor-file-browser.tmpl.html",controller:h}}])}(),function(){"use strict";angular.module("ramlEditorApp").directive("ramlEditorSaveFileButton",["$rootScope","ramlRepository",function(a,b){return{restrict:"E",template:'<span role="save-button" ng-click="saveFile()"><i class="fa fa-save"></i>&nbsp;Save</span>',link:function(c){c.saveFile=function(){var d=c.fileBrowser.selectedFile;b.saveFile(d).then(function(){a.$broadcast("event:notification",{message:"File saved.",expires:!0})})}}}}])}(),function(){"use strict";angular.module("ramlEditorApp").directive("ramlEditorNewFolderButton",["$injector","ramlRepository","generateName","newNameModal",function(a,b,c,d){return{restrict:"E",template:'<span role="new-button" ng-click="newFolder()"><i class="fa fa-folder-open"></i>&nbsp;New Folder</span>',link:function(a){a.newFolder=function(){var e=a.fileBrowser.currentTarget,f=e.isDirectory?e:b.getParent(e),g=c(f.getDirectories().map(function(a){return a.name}),"Folder"),h="Input a name for your new folder:",i="Add a new folder",j=[{message:"That folder name is already taken.",validate:function(a){return!f.children.some(function(b){return b.name.toLowerCase()===a.toLowerCase()})}}];d.open(h,g,j,i).then(function(a){b.createDirectory(f,a)})}}}}])}(),function(){"use strict";angular.module("ramlEditorApp").directive("ramlEditorNewFileButton",["$injector","ramlRepository","generateName","newNameModal",function(a,b,c,d){return{restrict:"E",template:'<span role="new-button" ng-click="newFile()"><i class="fa fa-plus"></i>&nbsp;New File</span>',link:function(a){a.newFile=function(){var e=a.fileBrowser.currentTarget,f=e.isDirectory?e:b.getParent(e),g=c(f.getFiles().map(function(a){return a.name}),"Untitled-","raml"),h="Add a new file",i=["For a new RAML spec, be sure to name your file <something>.raml; ","For files to be !included, feel free to use an extension or not."].join(""),j=[{message:"That file name is already taken.",validate:function(a){return!f.children.some(function(b){return b.name.toLowerCase()===a.toLowerCase()})}}];d.open(i,g,j,h).then(function(a){b.createFile(f,a)})}}}}])}(),function(){"use strict";angular.module("ramlEditorApp").directive("ramlEditorExportFilesButton",["$rootScope","ramlRepository",function(a,b){return{restrict:"E",template:'<span role="export-button" ng-click="exportFiles()"><i class="fa fa-download"></i>&nbsp;Export files</span>',link:function(a){a.exportFiles=function(){b.exportFiles()}}}}])}(),function(){"use strict";angular.module("ui.tree").directive("uiTreeNode",["treeConfig","$uiTreeHelper","$window","$document","$timeout","ramlRepository","config",function(a,b,c,d,e,f,g){return{require:["^uiTreeNodes","^uiTree","?uiTreeNode"],link:function(h,i,j,k){var l={};angular.extend(l,a),l.nodeClass&&i.addClass(l.nodeClass),h.init(k),h.collapsed=!!b.getNodeAttribute(h,"collapsed"),h.$watch(j.collapsed,function(a){"boolean"==typeof a&&(h.collapsed=a)}),h.$watch("collapsed",function(a){b.setNodeAttribute(h,"collapsed",a),j.$set("collapsed",a)});var m,n,o,p,q,r,s,t,u,v="ontouchstart"in window,w=!0,x=!1,y=null,z=!1,A=null,B=1e3,C=document.body,D=document.documentElement,E=function(a){if((v||2!==a.button&&3!==a.which)&&!(a.uiTreeDragging||a.originalEvent&&a.originalEvent.uiTreeDragging)){var e=angular.element(a.target),f=e.scope();if(f&&f.$type&&!("uiTreeNode"!==f.$type&&"uiTreeHandle"!==f.$type||"uiTreeNode"===f.$type&&f.$handleScope)){var j=e.prop("tagName").toLowerCase();if("input"!==j&&"textarea"!==j&&"button"!==j&&"select"!==j){for(;e&&e[0]&&e[0]!==i;){if(b.nodrag(e))return;e=e.parent()}if(h.beforeDrag(h)){a.uiTreeDragging=!0,a.originalEvent&&(a.originalEvent.uiTreeDragging=!0),a.preventDefault();var k=b.eventObj(a);n=!0,o=b.dragInfo(h);var q=h.$element.prop("tagName");s=angular.element(c.document.createElement(q)),l.hiddenClass&&s.addClass(l.hiddenClass),p=b.positionStarted(k,h.$element),r=angular.element(c.document.createElement(h.$parentNodesScope.$element.prop("tagName"))).addClass(h.$parentNodesScope.$element.attr("class")).addClass(l.dragClass).addClass("light"===g.get("theme")?"drag-light":""),r.css("z-index",9999),h.$element.after(s),r.append(h.$element.clone().html(h.$element.children()[0].innerHTML)),d.find("body").append(r),r.css({left:k.pageX-p.offsetX+"px",top:k.pageY-p.offsetY+"px"}),m={dragging:r},h.$element.addClass("drag-elm");var w=angular.element(r[0].lastChild).scope();w.collapsed=!0,angular.element(d).bind("touchend",K),angular.element(d).bind("touchcancel",K),angular.element(d).bind("touchmove",J),angular.element(d).bind("mouseup",K),angular.element(d).bind("mousemove",J),angular.element(d).bind("mouseleave",L),t=Math.max(C.scrollHeight,C.offsetHeight,D.clientHeight,D.scrollHeight,D.offsetHeight),u=Math.max(C.scrollWidth,C.offsetWidth,D.clientWidth,D.scrollWidth,D.offsetWidth),h.$treeScope.isDragging=!0}}}}},F=function(a){if(!x)return void(w||(x=!0,h.$apply(function(){h.$callbacks.dragStart(o.eventArgs(m,p))})));var d,f,g,i=b.eventObj(a);if(r){a.preventDefault(),c.getSelection?c.getSelection().removeAllRanges():c.document.selection&&c.document.selection.empty(),d=i.pageX-p.offsetX,f=i.pageY-p.offsetY,g={left:d,right:d+r[0].scrollWidth+5,top:f,bottom:f+r[0].scrollHeight},g.left<0?d=0:g.right>u&&(d=u-r[0].scrollWidth-5),g.top<0?f=0:g.bottom>t&&(f=t-r[0].scrollHeight),r.css({left:d+"px",top:f+"px"});var j=window.pageYOffset||c.document.documentElement.scrollTop,k=j+(window.innerHeight||c.document.clientHeight||c.document.clientHeight);if(k<i.pageY&&t>=k&&window.scrollBy(0,10),j>i.pageY&&window.scrollBy(0,-10),b.positionMoved(a,p,n),n)return void(n=!1);var l;angular.isFunction(r.hide)?r.hide():(l=r[0].style.display,r[0].style.display="none");var s=i.pageX-c.document.body.scrollLeft,v=i.pageY-(window.pageYOffset||c.document.documentElement.scrollTop);c.document.elementFromPoint(s,v);var y=angular.element(c.document.elementFromPoint(s,v));angular.isFunction(r.show)?r.show():r[0].style.display=l;var z=y.scope();if(!p.dirAx&&z!==h.prevHoverNode){var C=!1;if(h.prevHoverNode=z,!z)return;if("uiTree"===z.$type&&z.dragEnabled&&(C=z.isEmpty()),"uiTreeHandle"===z.$type&&(z=z.$nodeScope),"uiTreeDummyNode"===z.$type)return q=z.$parentNodesScope.accept(h,-1),q&&o.moveTo(z.$parentNodesScope,z.$parentNodesScope.childNodes(),H(h.$modelValue,z.$parentNodesScope.$modelValue)),$(".dragover").removeClass("dragover"),y.addClass("dragover"),void(A&&(e.cancel(A),A=null));if("uiTreeNode"!==z.$type&&!C)return;e.cancel(A),$(".dragover").removeClass("dragover"),z.$childNodesScope?(angular.element(z.$element.children()[0]).addClass("dragover"),z.collapsed&&(A=e(function(){z.collapsed=!1,h.nodeToExpand=null},B)),h.nodeToExpand=z):z.$parentNodeScope?(y.addClass("dragover"),angular.element(z.$parentNodeScope.$element.children()[0]).addClass("dragover"),h.nodeToExpand=z.$parentNodeScope):y.addClass("dragover"),C?z.$nodesScope.accept(h,0)&&o.moveTo(z.$nodesScope,z.$nodesScope.childNodes(),0):z.dragEnabled()&&(y=z.$element,q=z.$parentNodesScope.accept(h,z.index()),q&&(z.$childNodesScope?o.moveTo(z.$childNodesScope,z.childNodes(),H(h.$modelValue,z.$childNodesScope.$modelValue)):o.moveTo(z.$parentNodesScope,z.$parentNodesScope.childNodes(),H(h.$modelValue,z.$parentNodesScope.$modelValue))))}h.$apply(function(){h.$callbacks.dragMove(o.eventArgs(m,p))})}},G=function(a){a.preventDefault(),r&&(h.$treeScope.$apply(function(){h.$callbacks.beforeDrop(o.eventArgs(m,p))}),s.replaceWith(h.$element),r.remove(),r=null,h.$$apply?(o.apply(),h.$treeScope.$apply(function(){h.$callbacks.dropped(o.eventArgs(m,p))})):M(),h.$treeScope.$apply(function(){var a=o.eventArgs(m,p);a.canceled=z,h.$callbacks.dragStop(a)}),h.$$apply=!1,o=null),angular.element(d).unbind("touchend",K),angular.element(d).unbind("touchcancel",K),angular.element(d).unbind("touchmove",J),angular.element(d).unbind("mouseup",K),angular.element(d).unbind("mousemove",J),angular.element(c.document.body).unbind("mouseleave",L),$(".dragover").removeClass("dragover"),h.$element.removeClass("drag-elm"),h.$treeScope.isDragging=!1,h.prevHoverNode=null,z=!1},H=function(a,b){for(var c,d=0,e=b.length-1;e>=d;)c=Math.floor((d+e)/2),f.sortingFunction.call(null,b[c],a)>0?e=c-1:d=c+1;return d},I=function(a){h.dragEnabled()&&E(a)},J=function(a){F(a)},K=function(a){h.$$apply=q,G(a)},L=function(a){h.$$apply=!1,z=!0,G(a)},M=function(){e(function(){i.unbind(),i.bind("touchstart mousedown",function(a){w=!0,x=!1,y=e(function(){w=!1,I(a)},h.dragDelay)}),i.bind("touchend touchcancel mouseup",function(){e.cancel(y)})})};M(),angular.element(c.document.body).bind("keydown",function(a){27===a.keyCode&&L(a)})}}}]).directive("uiTreeDummyNode",["treeConfig",function(a){return{require:["^uiTreeNodes","^uiTree"],template:"<div class=\"file-item dummy\" ng-class=\"{'no-drop': fileBrowser.cursorState === 'no', copy: fileBrowser.cursorState === 'ok'}\"></div>",restrict:"E",replace:!0,controller:function(a,b){this.scope=a,a.$element=b,a.$parentNodeScope=null,a.$childNodesScope=null,a.$parentNodesScope=null,a.$treeScope=null,a.$$apply=!1,a.$type="uiTreeDummyNode",a.init=function(b){var c=b[0];a.$treeScope=b[1]?b[1].scope:null,a.$parentNodeScope=c.scope.$nodeScope,a.$parentNodesScope=c.scope}},link:function(b,c,d,e){var f={};angular.extend(f,a),f.nodeClass&&c.addClass(f.nodeClass),b.init(e)}}}])}(),angular.module("ramlEditorApp").run(["$templateCache",function(a){"use strict";a.put("views/confirm-modal.html",'<form name="form" novalidate>\n  <div class="modal-header">\n    <h3>{{data.title}}</h3>\n  </div>\n\n  <div class="modal-body">\n    <p>{{data.message}}</p>\n  </div>\n\n  <div class="modal-footer">\n    <button type="button" class="btn btn-default" ng-click="$dismiss()">Cancel</button>\n    <button type="button" class="btn btn-primary" ng-click="$close()">OK</button>\n  </div>\n</form>\n'),a.put("views/help.html",'<div class="modal-header">\n    <h3><i class="fa fa-question-circle"></i> Help</h3>\n</div>\n\n<div class="modal-body">\n    <p>\n        The API Designer for RAML is built by MuleSoft, and is a web-based editor designed to help you author RAML specifications for your APIs.\n        <br />\n        <br />\n        RAML is a human-and-machine readable modeling language for REST APIs, backed by a workgroup of industry leaders.\n    </p>\n\n    <p>\n        To learn more about the RAML specification and other tools which support RAML, please visit <a href="http://www.raml.org" target="_blank">http://www.raml.org</a>.\n        <br />\n        <br />\n        For specific questions, or to get help from the community, head to the community forum at <a href="http://forums.raml.org" target="_blank">http://forums.raml.org</a>.\n    </p>\n</div>\n'),a.put("views/new-name-modal.html",'<form name="form" novalidate ng-submit="submit(form)">\n  <div class="modal-header">\n    <h3>{{input.title}}</h3>\n  </div>\n\n  <div class="modal-body">\n    <!-- name -->\n    <div class="form-group" ng-class="{\'has-error\': form.$submitted && form.name.$invalid}">\n      <p>{{input.message}}</p>\n      <!-- label -->\n      <label for="name" class="control-label required-field-label">Name</label>\n\n      <!-- input -->\n      <input id="name" name="name" type="text"\n             ng-model="input.newName" class="form-control"\n             ui-validate="\'isValid($value)\'"\n             ng-maxlength="64" ap-focus="true" required>\n\n      <!-- error -->\n      <p class="help-block" ng-show="form.$submitted && form.name.$error.required">Please provide a name.</p>\n      <p class="help-block" ng-show="form.$submitted && form.name.$error.maxlength">Name must be shorter than 64 characters.</p>\n      <p class="help-block" ng-show="form.$submitted && form.name.$error.validator">{{validationErrorMessage}}</p>\n    </div>\n  </div>\n\n  <div class="modal-footer">\n    <button type="button" class="btn btn-default" ng-click="$dismiss()">Cancel</button>\n    <button type="submit" class="btn btn-primary">OK</button>\n  </div>\n</form>\n'),a.put("views/raml-editor-context-menu.tmpl.html",'<ul role="context-menu" ng-show="opened">\n  <li role="context-menu-item" ng-repeat="action in actions" ng-click="action.execute()">{{ action.label }}</li>\n</ul>\n'),a.put("views/raml-editor-file-browser.tmpl.html",'<raml-editor-context-menu></raml-editor-context-menu>\n<script type="text/ng-template" id="file-item.html">\n  <div ui-tree-handle class="file-item" ng-click="fileBrowser.select(node)"\n    ng-class="{currentfile: fileBrowser.currentTarget.path === node.path && !isDragging,\n      dirty: node.dirty,\n      geared: fileBrowser.contextMenuOpenedFor(node),\n      directory: node.isDirectory,\n      \'no-drop\': fileBrowser.cursorState === \'no\',\n      copy: fileBrowser.cursorState === \'ok\'}">\n    <span class="file-name" ng-Dblclick="toggleFolderCollapse(node)">\n      <i class="fa icon fa-caret-right fa-fw" ng-if="node.isDirectory" ng-class="{\'fa-rotate-90\': !collapsed}"></i>\n      <i class="fa icon fa-fw" ng-class="{\'fa-folder-o\': node.isDirectory, \'fa-file-text-o\': !node.isDirectory}"></i>\n      &nbsp;{{node.name}}\n    </span>\n    <i class="fa fa-cog" ng-click="fileBrowser.showContextMenu($event, node)" ng-class="{hidden: isDragging}" data-nodrag></i>\n  </div>\n\n  <ul ui-tree-nodes ng-if="node.isDirectory" ng-class="{hidden: collapsed}" ng-model="node.children">\n    <li ui-tree-node ng-repeat="node in node.children" ng-include="\'file-item.html\'" data-collapsed="node.collapsed">\n    </li>\n  </ul>\n</script>\n\n<div ui-tree="fileTreeOptions" ng-model="homeDirectory" class="file-list" data-drag-delay="300" data-empty-place-holder-enabled="false">\n  <ul ui-tree-nodes ng-model="homeDirectory.children" id="tree-root">\n    <ui-tree-dummy-node class="top"></ui-tree-dummy-node>\n    <li ui-tree-node ng-repeat="node in homeDirectory.children" ng-include="\'file-item.html\'" data-collapsed="node.collapsed"></li>\n    <ui-tree-dummy-node class="bottom" ng-click="fileBrowser.select(homeDirectory)"></ui-tree-dummy-node>\n  </ul>\n</div>\n'),a.put("views/raml-editor-main.tmpl.html",'<div role="raml-editor" class="{{theme}}">\n  <div role="notifications" ng-controller="notifications" class="hidden" ng-class="{hidden: !shouldDisplayNotifications, error: level === \'error\'}">\n    {{message}}\n    <i class="fa" ng-class="{\'fa-check\': level === \'info\', \'fa-warning\': level === \'error\'}" ng-click="hideNotifications()"></i>\n  </div>\n\n  <header>\n    <h1>\n      <strong>API</strong> Designer\n    </h1>\n\n    <a role="logo" target="_blank" href="http://mulesoft.com"></a>\n  </header>\n\n  <ul class="menubar">\n    <li class="menu-item menu-item-ll">\n      <raml-editor-new-file-button></raml-editor-new-file-button>\n    </li>\n    <li ng-show="supportsFolders" class="menu-item menu-item-ll">\n      <raml-editor-new-folder-button></raml-editor-new-folder-button>\n    </li>\n    <li class="menu-item menu-item-ll">\n      <raml-editor-save-file-button></raml-editor-save-file-button>\n    </li>\n    <li ng-show="canExportFiles()" class="menu-item menu-item-ll">\n      <raml-editor-export-files-button></raml-editor-export-files-button>\n    </li>\n    <li class="spacer file-absolute-path">{{getSelectedFileAbsolutePath()}}</li>\n    <li class="menu-item menu-item-fr menu-item-mocking-service" ng-show="getIsMockingServiceVisible()" ng-controller="mockingServiceController" ng-click="toggleMockingService()">\n      <div class="title">Mocking Service</div>\n      <div class="field-wrapper" ng-class="{loading: loading}">\n        <span ng-if="loading"><i class="fa fa-spin fa-spinner"></i></span>\n        <div class="field" ng-if="!loading">\n          <input type="checkbox" value="None" id="mockingServiceEnabled" ng-checked="enabled" ng-click="$event.preventDefault()" />\n          <label for="mockingServiceEnabled"></label>\n        </div>\n      </div>\n    </li>\n    <li class="menu-item menu-item-fr" ng-click="openHelp()">\n      <i class="help fa fa-question-circle"></i>\n      <span>&nbsp;Help</span>\n    </li>\n  </ul>\n\n  <div role="flexColumns">\n    <raml-editor-file-browser role="browser"></raml-editor-file-browser>\n\n    <div id="browserAndEditor" ng-splitter="vertical" ng-splitter-collapse-target="prev"><div class="split split-left">&nbsp;</div></div>\n\n    <div role="editor" ng-class="{error: currentError}">\n      <div id="code" role="code"></div>\n\n      <div role="shelf" ng-show="getIsShelfVisible()" ng-class="{expanded: !shelf.collapsed}">\n        <div role="shelf-tab" ng-click="toggleShelf()">\n          <i class="fa fa-inbox fa-lg"></i><i class="fa" ng-class="shelf.collapsed ? \'fa-caret-up\' : \'fa-caret-down\'"></i>\n        </div>\n\n        <div role="shelf-container" ng-show="!shelf.collapsed" ng-include src="\'views/raml-editor-shelf.tmpl.html\'"></div>\n      </div>\n    </div>\n\n    <div id="consoleAndEditor" ng-show="getIsConsoleVisible()" ng-splitter="vertical" ng-splitter-collapse-target="next"><div class="split split-right">&nbsp;</div></div>\n\n    <div ng-show="getIsConsoleVisible()" role="preview-wrapper">\n      <raml-console with-root-documentation></raml-console>\n    </div>\n  </div>\n</div>\n'),a.put("views/raml-editor-shelf.tmpl.html",'<ul role="sections" ng-controller="ramlEditorShelf">\n  <li role="section" ng-repeat="section in model.sections | orderBy:orderSections" class="{{section.name | dasherize}}">\n    {{section.name}}&nbsp;({{section.items.length}})\n    <ul role="items">\n      <li ng-repeat="item in section.items" ng-click="itemClick(item)"><i class="fa fa-reply"></i><span>{{item.title}}</span></li>\n    </ul>\n  </li>\n</ul>\n')
}]);