"use strict";(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++){s(r[o])}return s})({1:[function(require,module,exports){function _isObject(obj){return obj===Object(obj)}function _objectToArray(obj){if(Array.isArray(obj)){return obj}return Object.keys(obj).map(function(key){if(_isObject(obj[key])){obj[key].key=key}return obj[key]})}function _arrayToObject(arr){return arr.reduce(function(acc,cur){Object.keys(cur).forEach(function(key){acc[key]=cur[key]});return acc},{})}function recursiveObjectToArray(obj){if(_isObject(obj)){Object.keys(obj).forEach(function(key){var value=obj[key];if(_isObject(obj)&&["responses","body","queryParameters","headers","properties","baseUriParameters","annotations","uriParameters"].indexOf(key)!==-1){obj[key]=_objectToArray(value)}recursiveObjectToArray(value)})}else if(Array.isArray(obj)){obj.forEach(function(value){recursiveObjectToArray(value)})}return obj}function arraysToObjects(ramlObj){["types","traits","resourceTypes","annotationTypes","securitySchemes"].forEach(function(key){if(ramlObj[key]){ramlObj[key]=_arrayToObject(ramlObj[key])}});return ramlObj}module.exports={arraysToObjects:arraysToObjects,recursiveObjectToArray:recursiveObjectToArray}},{}],2:[function(require,module,exports){var raml2obj=require("./");window.raml2obj=raml2obj},{"./":4}],3:[function(require,module,exports){function _isObject(obj){return obj===Object(obj)}function makeConsistent(obj,types){if(_isObject(obj)){if(obj.type){if(Array.isArray(obj.type)){obj.type=obj.type[0]}if(types&&types&&types[obj.type]){Object.assign(obj,types[obj.type])}}if(obj.items&&types&&types[obj.items]){obj.items=types[obj.items]}if(obj.examples&&obj.examples.length){obj.examples=obj.examples.map(function(example){return example.value?example.value:example})}if(obj.structuredExample){if(typeof obj.examples==="undefined"){obj.examples=[]}obj.examples.push(obj.structuredExample.value);delete obj.example;delete obj.structuredExample}Object.keys(obj).forEach(function(key){var value=obj[key];makeConsistent(value,types)})}else if(Array.isArray(obj)){obj.forEach(function(value){makeConsistent(value,types)})}return obj}module.exports=makeConsistent},{}],4:[function(require,module,exports){"use strict";var makeExamplesAndTypesConsistent=require("./consistency-helpers");var _require=require("./arrays-objects-helpers"),arraysToObjects=_require.arraysToObjects,recursiveObjectToArray=_require.recursiveObjectToArray;function _makeUniqueId(string){string=string.replace(/\W/g,"_");string=string.replace(new RegExp("^_+"),"");return string.toLowerCase()}function _addRaml2htmlProperties(ramlObj,parentUrl,allUriParameters,baseUri){if(ramlObj.documentation){ramlObj.documentation.forEach(function(docSection){docSection.uniqueId=_makeUniqueId(docSection.title)})}if(!ramlObj.resources){return ramlObj}baseUri=baseUri||ramlObj.baseUri;if(baseUri&&baseUri[baseUri.length-1]==="/"){baseUri=baseUri.substr(0,baseUri.length-1)}ramlObj.resources.forEach(function(resource){resource.parentUrl=parentUrl||"";resource.uniqueId=_makeUniqueId(resource.parentUrl+resource.relativeUri);resource.absoluteUrl=baseUri+resource.relativeUri;resource.allUriParameters=ramlObj.baseUriParameters||[];if(allUriParameters){resource.allUriParameters=resource.allUriParameters.concat(allUriParameters)}if(resource.uriParameters){resource.allUriParameters=resource.allUriParameters.concat(resource.uriParameters)}if(resource.methods){resource.methods.forEach(function(method){method.allUriParameters=resource.allUriParameters;method.absoluteUrl=resource.absoluteUrl})}_addRaml2htmlProperties(resource,resource.parentUrl+resource.relativeUri,resource.allUriParameters,baseUri)});return ramlObj}function _expandRootTypes(types){if(!types){return types}Object.keys(types).forEach(function(key){datatype_expansion.js.expandedForm(types[key],types,function(err,expanded){if(expanded){datatype_expansion.js.canonicalForm(expanded,function(err2,canonical){if(canonical){types[key]=canonical}})}})});return types}function _enhanceRamlObj(ramlObj){ramlObj=arraysToObjects(ramlObj);var types=makeExamplesAndTypesConsistent(_expandRootTypes(ramlObj.types));delete ramlObj.types;ramlObj=makeExamplesAndTypesConsistent(ramlObj,types);ramlObj=recursiveObjectToArray(ramlObj);ramlObj=_addRaml2htmlProperties(ramlObj);if(types){ramlObj.types=types}return ramlObj}module.exports.parse=function(source){return _enhanceRamlObj(source)}},{"./arrays-objects-helpers":1,"./consistency-helpers":3}]},{},[2]);
